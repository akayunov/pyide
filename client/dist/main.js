!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class o{constructor(e){for(let t=1;t<=e;t++){let e=document.createElement("div");e.className="line-number",e.textContent=String(t),document.getElementById("line-number").appendChild(e)}}adjust(e){let t=parseInt(document.getElementById("line-number").lastChild.textContent);for(let n=t+1;n<=t+Math.abs(t-e);n++)if(e>t){let e=document.createElement("div");e.className="line-number",e.textContent=String(n),document.getElementById("line-number").appendChild(e)}else document.getElementById("line-number").removeChild(document.getElementById("line-number").lastElementChild)}getByNumber(e){return document.getElementsByClassName("line-number").item(e)}}class i{constructor(){this.autoCompleteElement=null,this.activeVariant=0,this.createAutocompleteElement([]),this.active=!1}commandGetAutocompleteShow(e,t,n){return JSON.stringify({type:"autoCompleteShow",data:{fileName:n,lineText:e.textContent,positionInLine:t,lineNumber:parseInt(e.getAttribute("tabIndex"))}})}createAutocompleteElement(e){!0===this.active&&this.hide(),this.active=!0,this.autoCompleteElement=document.createElement("div"),this.autoCompleteElement.className="autocomplete",this.refill(e)}refill(e){for(;this.autoCompleteElement.firstChild;)this.autoCompleteElement.removeChild(this.autoCompleteElement.firstChild);for(let t of e){let e=document.createElement("div");e.textContent=t,this.autoCompleteElement.appendChild(e)}}show(e,t){this.active=!0,this.autoCompleteElement.style.top=e.bottom.toString()+"px",this.autoCompleteElement.style.left=e.left.toString()+"px",t.appendChild(this.autoCompleteElement)}getSymbols(e){return this.autoCompleteElement.childNodes.item(this.activeVariant).textContent.slice(e)}hide(){this.active&&(this.active=!1,this.autoCompleteElement.remove(),this.activeVariant=0)}hlNext(){if(this.activeVariant!==this.autoCompleteElement.childNodes.length&&(this.autoCompleteElement.childNodes.item(this.activeVariant).removeAttribute("id"),this.activeVariant+=1,this.active)){this.autoCompleteElement.childNodes.item(this.activeVariant).setAttribute("id","active-autocomplete")}}hlPrev(){if(0!==this.activeVariant&&(this.autoCompleteElement.childNodes.item(this.activeVariant).removeAttribute("id"),this.activeVariant-=1,this.active)){this.autoCompleteElement.childNodes.item(this.activeVariant).setAttribute("id","active-autocomplete")}}}class r extends i{constructor(){super()}}class s{constructor(e){this.curentFile="",this.curentFile="",this.code=e,$.ajax({method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:"/server/filelisting"}).done(function(e){e.forEach(function(e){let t=$(e)[0];const n=document.getElementById("filelisting");n?n.appendChild(t):console.log("нет елемента filelisting")})}).fail(function(e,t){console.log("все сломалось в folder listing",e,t)})}get(e){const t=e.target;if(!t)return void console.log("event.target is empty in folder listing get");let n=t.parentNode;if(!n)return void console.log("event.target.parentNode is empty in folder listing get");const o=n.childNodes[0];if(n&&"rotate(180deg)"===o.style.transform){o.style.transform="rotate(90deg)";for(let e=n.childNodes.length-1;e>=0;e--)["folderlink","filelink"].includes(n.childNodes[e].className)&&n.removeChild(n.childNodes[e])}else"rotate(90deg)"===o.style.transform?(o.style.transform="rotate(180deg)",$.ajax({method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:e.target.href}).done(function(e){e.forEach(function(e){$(n).append($(e));let t=$(e)[0];document.getElementById("filelisting").appendChild(t)})}).fail(function(e,t){console.log("все сломалось в folder listing",e,t)})):o.style.transform="rotate(90deg)";e.preventDefault(),e.stopPropagation()}showFile(e){let t,n=this;return $.ajax({async:!1,method:"GET",url:e.target.attributes.href.value,dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(o){Array.from(document.getElementById("code").children).forEach(function(e){e.remove()}),o.forEach(function(e){document.getElementById("code").appendChild($(e)[0])}),n.curentFile=e.target.attributes.href.value,t=o.length}).fail(function(e,t){console.log("все сломалось в get CODE",e,t)}),t}}class l{constructor(e,t){this._cursorParentElement=null,this.position=null,this.cursorHighlightElement=null,this.code=e,this.lineNumber=t,this.createCursorHTMLElement(),this.createCursorHightlightElement();let n=this.code.getFirstElement();this.cursorParentElement=n,this.cursorParentElement.appendChild(this.cursorElement),this.cursorParentElement.appendChild(document.createTextNode("")),this.putCursorByPositionInNode(n,0),""===n.textContent&&(this.cursorText="\n")}createCursorHightlightElement(){this.cursorHighlightElement=document.createElement("div"),this.cursorHighlightElement.id="cursorHighlightElement",this.cursorHighlightElement.style.width="3px",this.cursorHighlightElement.style.height="18px",this.cursorHighlightElement.style.background="black"}createCursorHTMLElement(e=""){this.cursorElement=document.createElement("span"),this.cursorElement.className="cursor",this.cursorText=e}putCursorByPositionInNode(e,t){if(null===e)return void console.log("null element in putCursorByPositionInNode");if(this.cursorParentElement!==e){this.cursorParentElement=null;let n=e.textContent;this.cursorParentElement=e;let o=this.cursorParentElement.childNodes;1!==o.length&&console.log("childNodes.length:=",o.length);let i=o.item(0).splitText(t);this.cursorText=this.cursorParentElement.textContent.slice(t,t+1),i.textContent=n.slice(t+1),i.before(this.cursorElement)}else if(t!==this.getPositionInNode()){let e="",n="",o="";e=this.cursorParentElement.textContent.slice(0,t),n=this.cursorParentElement.textContent.slice(t,t+1),o=this.cursorParentElement.textContent.slice(t+1),this.cursorElement.previousSibling.textContent=e,this.cursorText=n,this.cursorElement.nextSibling.textContent=o}else console.log("Put cursor in same position.");let n=this.lineNumber.getByNumber(parseInt(e.parentElement.getAttribute("tabIndex"))-1),o=n.getBoundingClientRect(),i=this.cursorElement.getBoundingClientRect();this.cursorHighlightElement.style.top=(i.top-o.top).toString()+"px",this.cursorHighlightElement.style.left=(i.left-o.left-3).toString()+"px",n.appendChild(this.cursorHighlightElement),this.scrollIntoView()}getCoordinate(){return this.cursorElement.getBoundingClientRect()}getPositionInNode(){return this.cursorElement.previousSibling.textContent.length}resetLinePosition(){this.position=null}setLinePosition(){null===this.position&&(this.position=this.code.getPositionInLine(this.cursorParentElement,this.getPositionInNode()))}getLineNumber(){return this.code.getLineNumber(this.cursorParentElement)}scrollIntoView(){this.cursorElement.scrollIntoView({block:"nearest",inline:"nearest"})}set cursorParentElement(e){null===e?(this.cursorElement.replaceWith(this.cursorText),this.cursorParentElement.normalize(),this._cursorParentElement=null,this.cursorText=""):(e.setAttribute("nodeid",Math.floor(1e9*Math.random()+1).toString()),this._cursorParentElement=e)}get cursorParentElement(){return this._cursorParentElement}set cursorText(e){this.cursorElement.textContent=e}get cursorText(){return this.cursorElement.textContent}putSymbol(e){this.cursorElement.previousSibling.textContent+=e,this.putCursorByPositionInNode(this.cursorParentElement,this.getPositionInNode()),this.resetLinePosition()}moveLeft(){if(""!==this.cursorElement.previousSibling.textContent)this.putCursorByPositionInNode(this.cursorParentElement,this.getPositionInNode()-1);else if(""===this.cursorElement.previousSibling.textContent){let e=this.code.getPreviousElement(this.cursorParentElement);this.putCursorByPositionInNode(e,e.textContent.length-1)}this.resetLinePosition()}moveRight(){""!==this.cursorElement.nextSibling.textContent?this.putCursorByPositionInNode(this.cursorParentElement,this.getPositionInNode()+1):""===this.cursorElement.nextSibling.textContent&&this.putCursorByPositionInNode(this.code.getNextElement(this.cursorParentElement),0),this.resetLinePosition()}moveUpRow(){this.setLinePosition();let e=this.code.getOverElement(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}moveDownRow(){this.setLinePosition();let e=this.code.getUnderElement(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}pageDown(){this.setLinePosition();let e=this.code.pageDown(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}pageUp(){this.setLinePosition();let e=this.code.pageUp(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}moveHome(){this.putCursorByPositionInNode(this.code.getFirstElementOnLineByNode(this.cursorParentElement),0),this.resetLinePosition()}moveEnd(){let e=this.code.getLastElementOnLineByNode(this.cursorParentElement);this.putCursorByPositionInNode(e,e.textContent.length-1),this.resetLinePosition()}deleteSymbolUnder(){if(this.moveRight(),0!==this.getPositionInNode())this.cursorElement.previousSibling.textContent=this.cursorElement.previousSibling.textContent.slice(0,this.getPositionInNode()-1);else{let e=this.code.getPreviousElement(this.cursorParentElement);e.textContent=e.textContent.slice(0,e.textContent.length-1),0===e.textContent.length&&this.code.removeNode(e)}}deleteSymbolBefore(){this.moveLeft(),this.deleteSymbolUnder()}setByClick(){let e=window.getSelection();console.log("selObj",e,e.getRangeAt(0),e.getRangeAt(0),"|"+e.toString()+"|");let t=e.anchorNode;if(t.nodeType!==Node.TEXT_NODE)return void console.log("selected node is not text type");let n=t.parentElement;"cursor"===t.parentElement.className&&(n=n.parentElement),this.putCursorByPositionInNode(n,e.anchorOffset),this.resetLinePosition()}addNewRow(){this.moveLeft();let e=this.code.divideLine(this.cursorParentElement),t=this.getPositionInNode();this.cursorElement.nextSibling.textContent="\n",this.putCursorByPositionInNode(e,t),this.cursorElement.previousSibling.textContent=""}goToDefinition(e){}putTab(){this.putSymbol("\t")}putString(e){for(let t of e)this.putSymbol(t)}}class a extends l{constructor(e,t){super(e,t)}putTab(){this.putSymbol(" "),this.putSymbol(" "),this.putSymbol(" "),this.putSymbol(" ")}}class u{constructor(){}init(e){$.ajax({method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:e.target.href.replace(/:31415\/server\/code/,":31415/server/tags")}).done(function(e){const t=document.getElementById("tags");if(t)for(let e=t.childNodes.length-1;e>=0;e--)t.removeChild(t.childNodes[e]);else console.log("parentDiv is empty in  tags listing");e.forEach(function(e){const t=document.getElementById("tags");t?t.appendChild($(e)[0]):console.log("tags is empty in  tags listing")})}).fail(function(e,t){console.log("все сломалось в tags listing",e,t)})}}class c{constructor(e,t){this.node=e,this.positionInNode=t}}class d{constructor(e){this.screenSize=40,this.fileName="/"+e.split("/").slice(3).join("/"),document.getElementById("code").appendChild(this.createNewLine(1))}createNewLine(e=1,t=""){let n=document.createElement("div");n.setAttribute("tabIndex",e.toString()),n.className="content-line";let o=document.createElement("span");return n.appendChild(o),o.appendChild(document.createTextNode(t)),n}putNewLineAfter(e,t=""){let n=this.createNewLine(1,t);return e.parentElement.after(n),n}getFirstLine(){let e=document.getElementsByClassName("content-line").item(0);return e.focus(),e}getLineByNumber(e){return document.querySelector('[tabIndex="'+e.toString()+'"]')}getNodeByPosition(e,t){let n=!1,o=0,i=0,r=e.firstChild;for(let s of e.childNodes)if((o+=s.textContent.length)>=t+1){r=s,i=s.textContent.length-(o-t),n=!0;break}return n||(i=(r=e.lastChild).textContent.length-1),new c(r,i)}recalculateTabIndex(e){let t=parseInt(e.previousElementSibling.getAttribute("tabIndex"))+1;for(e.setAttribute("tabIndex",t.toString());e.nextElementSibling;)t+=1,(e=e.nextElementSibling).setAttribute("tabIndex",t.toString())}getFirstElement(){return this.getFirstLine().childNodes.item(0)}getFirstElementOnLineByNode(e){return e.parentElement.firstChild}getLastElementOnLineByNode(e){return e.parentElement.lastChild}getPreviousElement(e){return null!==e.previousElementSibling?e.previousElementSibling:null!==e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastChild:null}getNextElement(e){return null!==e.nextElementSibling?e.nextElementSibling:null!==e.parentElement.nextElementSibling?e.parentElement.nextElementSibling.firstChild:null}getPositionInLine(e,t){let n=0;for(let o of e.parentElement.childNodes){if(o===e){n+=t;break}n+=o.textContent.length}return n}getLineNumber(e){return e.parentElement.getAttribute("tabIndex")}getOverElement(e,t){return null!==e.parentElement.previousElementSibling?this.getNodeByPosition(e.parentElement.previousElementSibling,t):new c(null,0)}getUnderElement(e,t){return null!==e.parentElement.nextElementSibling?this.getNodeByPosition(e.parentElement.nextElementSibling,t):new c(null,0)}pageUp(e,t){let n=e.parentElement,o=0;for(;n.previousElementSibling&&(o+=1,n=n.previousElementSibling,!(o>=this.screenSize)););return this.getNodeByPosition(n,t)}pageDown(e,t){let n=e.parentElement,o=0;for(;n.nextElementSibling&&(o+=1,n=n.nextElementSibling,!(o>=this.screenSize)););return this.getNodeByPosition(n,t)}divideLine(e){let t=this.putNewLineAfter(e);for(t.lastChild.replaceWith(e.parentElement.removeChild(e.parentElement.lastChild));e.parentElement.lastChild;){if(e.parentElement.lastChild===e){t.insertBefore(e.parentElement.lastChild.cloneNode(),t.firstChild),t.firstChild.textContent=e.parentElement.lastChild.textContent;break}t.insertBefore(e.parentElement.removeChild(e.parentElement.lastChild),t.firstChild)}return this.recalculateTabIndex(t),t.firstChild}removeNode(e){let t=null!==e.parentElement.previousElementSibling?e.parentElement.previousElementSibling:this.getFirstLine();if(1===e.parentElement.childNodes.length)e.parentElement.remove();else{if(""===e.textContent&&e.parentElement.nextElementSibling&&e===e.parentElement.lastChild){for(;e.parentElement.nextElementSibling.firstChild;)e.parentElement.appendChild(e.parentElement.nextElementSibling.removeChild(e.parentElement.nextElementSibling.firstChild));e.parentElement.nextElementSibling.remove()}e.remove()}this.recalculateTabIndex(t)}replaceLine(e,t,n){let o=this.getLineByNumber(e),i=document.createElement("div");i.innerHTML=t.join("");for(let e of o.childNodes){let t=e.getAttribute("nodeid");if(null!==t){let n=[];for(let e of Array.from(i.childNodes))e.getAttribute("nodeid")===t&&n.push(e);if(n.map(e=>e.textContent).join("")===e.textContent){for(let t of n.reverse())t.removeAttribute("nodeid"),e.after(t);e.remove()}else console.log("element content is different:|"+n.map(e=>e.textContent).join("")+"| vs |"+e.textContent,"|")}}}commandGetParseLineMsg(e){return JSON.stringify({type:"lineParse",data:{fileName:this.fileName,outerHTML:e.outerHTML,lineNumber:parseInt(e.getAttribute("tabIndex"))}})}}let m={};class h{constructor(){}registerCommandHandler(e,t){m[e]=t}}class p{constructor(e){this.connectionAttemptCounter=0,this.serverUrl=e,this.createSocket()}debug(...e){console.log(...e)}createSocket(){this.socket=new WebSocket(this.serverUrl),this.socket.onmessage=(e=>{this.onMessage(e)}),this.socket.onclose=(e=>{this.onClose(e)}),this.socket.onopen=(()=>{this.onOpen()}),this.socket.onerror=(e=>{console.error("WebSocket error observed:",e)})}onOpen(){this.debug("connected to:",this.serverUrl)}onClose(e){if(e.wasClean?this.debug("Clean closed"):this.debug("Connection reset by peer"),this.debug("Connection reset, code=:"+e.code+", reason="+e.reason,"connectionAttemptCounter=",this.connectionAttemptCounter),this.connectionAttemptCounter>10)throw this.debug("Connection attempt was too mush, just give up: ",this.connectionAttemptCounter),this.connectionAttemptCounter=0,new Error("Connection attempt was too mush, just give up");this.connectionAttemptCounter+=1,this.debug("Create new connection",this),this.socket.close(),this.createSocket()}onMessage(e){this.connectionAttemptCounter=0;let t=JSON.parse(e.data);this.debug("received:",t,t.type,typeof t,m),m[t.type](t)}sendCommand(e,t){if(!m[e])throw this.debug("Message handler is not found:",m,e,m[e]),new Error("Message handler is not found");this.socket.readyState===WebSocket.OPEN?(this.socket.send(t),this.debug("send:",t,e,typeof t)):(this.debug("send failed, socket in state: ",this.socket.readyState,t,m),this.createSocket())}}new class extends h{constructor(){super(),this.serverUrl="ws://"+window.location.host+"/server/command";let e=this;document.addEventListener("DOMContentLoaded",function(){e.setKeyBoardEventListeners(),e.setMouseEventListeners(),e.code=new d(""),e.tags=new u,e.fileListing=new s(e.code),e.autoComplete=new i,e.lineNumber=new o(1),e.cursor=new l(e.code,e.lineNumber),e.pressedKeys={},e.commandBus=new p(e.serverUrl),e.registerCommandHandler("lineParse",t=>{e.handlerLineParse(t)}),e.registerCommandHandler("autoCompleteShow",t=>{e.handlerAutocompleteShow(t)})})}handlerLineParse(e){if(this.code.fileName!==e.data.fileName)return;let t=this.code.getLineByNumber(e.data.lineNumber),n=this.cursor.getLineNumber(),o=this.code.getPositionInLine(this.cursor.cursorParentElement,this.cursor.getPositionInNode());if(this.code.replaceLine(e.data.lineNumber,e.data.lineElements,this.cursor),parseInt(n)===e.data.lineNumber){let e=this.code.getNodeByPosition(t,o);this.cursor.putCursorByPositionInNode(e.node,e.positionInNode)}}handlerAutocompleteShow(e){this.autoComplete.refill(e.data.result),this.autoComplete.show(this.cursor.getCoordinate(),this.lineNumber.getByNumber(e.data.lineNumber))}setKeyBoardEventListeners(){let e=this;document.getElementById("code").addEventListener("keyup",function(t){e.pressedKeys[t.code]=!1,t.preventDefault()}),document.getElementById("code").addEventListener("keydown",function(t){e.pressedKeys[t.code]=!0,"Enter"===t.code?(e.cursor.addNewRow(),t.preventDefault()):"Tab"===t.code?(e.autoComplete.active?(e.cursor.putString(e.autoComplete.getSymbols(e.cursor.getPositionInNode())),e.autoComplete.hide()):e.cursor.putTab(),t.preventDefault()):"ArrowUp"===t.code?(e.autoComplete.active?e.autoComplete.hlPrev():e.cursor.moveUpRow(),t.preventDefault()):"ArrowDown"===t.code?(e.autoComplete.active?e.autoComplete.hlNext():e.cursor.moveDownRow(),t.preventDefault()):"Space"===t.code?(e.cursor.putSymbol(t.key),e.autoComplete.hide(),t.preventDefault()):"PageUp"===t.code?(e.cursor.pageUp(),t.preventDefault()):"PageDown"===t.code?(e.cursor.pageDown(),t.preventDefault()):"End"===t.code?(e.cursor.moveEnd(),t.preventDefault()):"Home"===t.code?(e.cursor.moveHome(),t.preventDefault()):"ArrowLeft"===t.code?(e.cursor.moveLeft(),t.preventDefault()):"ArrowRight"===t.code?(e.cursor.moveRight(),t.preventDefault()):"ShiftLeft"===t.code||"ControlLeft"===t.code||"AltLeft"===t.code||"F5"===t.code||("Backspace"===t.code?(e.cursor.deleteSymbolBefore(),t.preventDefault()):"Delete"===t.code?(e.cursor.deleteSymbolUnder(),t.preventDefault()):(e.cursor.putSymbol(t.key),e.commandBus.sendCommand("autoCompleteShow",e.autoComplete.commandGetAutocompleteShow(t.target,e.code.getPositionInLine(e.cursor.cursorParentElement,e.cursor.getPositionInNode()),e.code.fileName)),t.preventDefault())),e.commandBus.sendCommand("lineParse",e.code.commandGetParseLineMsg(t.target))})}setMouseEventListeners(){let e=this;document.getElementById("code").addEventListener("click",function(t){e.cursor.setByClick(),e.autoComplete.hide(),e.pressedKeys.ControlLeft&&e.cursor.goToDefinition(e.fileListing.curentFile),t.preventDefault()}),document.getElementById("filelisting").addEventListener("click",function(t){const n=t.target;if("filelink"===n.parentElement.className){let o=e.fileListing.showFile(t);e.lineNumber.adjust(o);let s=n.getAttribute("href");s.endsWith(".py")?(e.code=new d(s),e.cursor=new a(e.code,e.lineNumber),e.autoComplete=new r):(e.code=new d(s),e.cursor=new l(e.code,e.lineNumber),e.autoComplete=new i)}else"folderlink"===n.parentElement.className&&e.fileListing.get(t);t.preventDefault()})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpbmUtbnVtYmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hdXRvY29tcGxldGUvdHh0LWF1dG9jb21wbGV0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXV0b2NvbXBsZXRlL3B5LWF1dG9jb21wbGV0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsZS1saXN0aW5nLnRzIiwid2VicGFjazovLy8uL3NyYy9jdXJzb3JzL3R4dC1jdXJzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2N1cnNvcnMvcHktY3Vyc29yLnRzIiwid2VicGFjazovLy8uL3NyYy90YWdzL3RhZ3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1hbmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1hbmQtYnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTGluZU51bWJlciIsIltvYmplY3QgT2JqZWN0XSIsImxpbmVDb3VudCIsImRpdkxpbmVOdW1iZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsIlN0cmluZyIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJuZXdWYWx1ZSIsImN1cnJlbnRWYWx1ZSIsInBhcnNlSW50IiwibGFzdENoaWxkIiwiTWF0aCIsImFicyIsInJlbW92ZUNoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsIm51bWJlciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJpdGVtIiwiVHh0QXV0b2NvbXBsZXRlIiwidGhpcyIsImF1dG9Db21wbGV0ZUVsZW1lbnQiLCJhY3RpdmVWYXJpYW50IiwiY3JlYXRlQXV0b2NvbXBsZXRlRWxlbWVudCIsImFjdGl2ZSIsImNvZGVMaW5lIiwicG9zaXRpb25JbkxpbmUiLCJmaWxlTmFtZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0eXBlIiwiZGF0YSIsImxpbmVUZXh0IiwibGluZU51bWJlciIsImdldEF0dHJpYnV0ZSIsInJlc3VsdCIsImhpZGUiLCJyZWZpbGwiLCJmaXJzdENoaWxkIiwibGluZSIsInNwYW4iLCJyZWN0IiwicGFyZW50RWxlbWVudCIsInN0eWxlIiwidG9wIiwiYm90dG9tIiwidG9TdHJpbmciLCJsZWZ0Iiwic3RhcnRQb3NpdGlvbiIsImNoaWxkTm9kZXMiLCJzbGljZSIsInJlbW92ZSIsImxlbmd0aCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInB5X2F1dG9jb21wbGV0ZV9QeUF1dG9jb21wbGV0ZSIsInN1cGVyIiwiRmlsZUxpc3RpbmciLCJjb2RlIiwiY3VyZW50RmlsZSIsIiQiLCJhamF4IiwibWV0aG9kIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsInVybCIsImRvbmUiLCJyZXNwb25zZSIsImZvckVhY2giLCJlbGVtZW50Iiwibm9kZSIsIm15RWxlbWVudCIsImNvbnNvbGUiLCJsb2ciLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXZlbnQiLCJ0YXJnZXQiLCJwYXJlbnREaXYiLCJwYXJlbnROb2RlIiwiY2hpbGROb2RlMCIsInRyYW5zZm9ybSIsImluY2x1ZGVzIiwiaHJlZiIsImFwcGVuZCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic2VsZiIsImFzeW5jIiwiYXR0cmlidXRlcyIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwiVHh0Q3Vyc29yIiwiX2N1cnNvclBhcmVudEVsZW1lbnQiLCJwb3NpdGlvbiIsImN1cnNvckhpZ2hsaWdodEVsZW1lbnQiLCJjcmVhdGVDdXJzb3JIVE1MRWxlbWVudCIsImNyZWF0ZUN1cnNvckhpZ2h0bGlnaHRFbGVtZW50IiwiZ2V0Rmlyc3RFbGVtZW50IiwiY3Vyc29yUGFyZW50RWxlbWVudCIsImN1cnNvckVsZW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsInB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUiLCJjdXJzb3JUZXh0IiwiaWQiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmQiLCJwYXJlbnRDdXJzb3JOb2RlIiwiY3Vyc29yUG9zaXRpb25Jbk5vZGUiLCJpbml0VGV4dENvbnRlbnQiLCJuZXh0VGV4dE5vZGUiLCJzcGxpdFRleHQiLCJiZWZvcmUiLCJnZXRQb3NpdGlvbkluTm9kZSIsInByZXZpb3VzU2libGluZ1RleHQiLCJuZXh0U2libGluZ1RleHQiLCJwcmV2aW91c1NpYmxpbmciLCJuZXh0U2libGluZyIsImxpbmVOdW1iZXJFbGVtZW50IiwiZ2V0QnlOdW1iZXIiLCJsaW5lTnVtYmVyUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInNjcm9sbEludG9WaWV3IiwiZ2V0UG9zaXRpb25JbkxpbmUiLCJnZXRMaW5lTnVtYmVyIiwiYmxvY2siLCJpbmxpbmUiLCJlbCIsInJlcGxhY2VXaXRoIiwibm9ybWFsaXplIiwiZmxvb3IiLCJyYW5kb20iLCJjaGFyIiwicmVzZXRMaW5lUG9zaXRpb24iLCJwcmV2aW91c0VsZW1lbnQiLCJnZXRQcmV2aW91c0VsZW1lbnQiLCJnZXROZXh0RWxlbWVudCIsInNldExpbmVQb3NpdGlvbiIsIm5ld1Bvc2l0aW9uIiwiZ2V0T3ZlckVsZW1lbnQiLCJwb3NpdGlvbkluTm9kZSIsImdldFVuZGVyRWxlbWVudCIsIm5ld0VsZW1lbnQiLCJwYWdlRG93biIsInBhZ2VVcCIsImdldEZpcnN0RWxlbWVudE9uTGluZUJ5Tm9kZSIsImxhc3RFbGVtZW50IiwiZ2V0TGFzdEVsZW1lbnRPbkxpbmVCeU5vZGUiLCJtb3ZlUmlnaHQiLCJwcmV2RWxlbWVudCIsInJlbW92ZU5vZGUiLCJtb3ZlTGVmdCIsImRlbGV0ZVN5bWJvbFVuZGVyIiwic2VsT2JqIiwid2luZG93IiwiZ2V0U2VsZWN0aW9uIiwiZ2V0UmFuZ2VBdCIsImFuY2hvck5vZGUiLCJub2RlVHlwZSIsIk5vZGUiLCJURVhUX05PREUiLCJhbmNob3JPZmZzZXQiLCJuZXdOb2RlIiwiZGl2aWRlTGluZSIsInB1dFN5bWJvbCIsInN0ciIsInB5X2N1cnNvcl9QeUN1cnNvciIsIlRhZ3MiLCJyZXBsYWNlIiwidGFncyIsIlBvc2l0aW9uSW5Ob2RlIiwiQ29kZSIsInNjcmVlblNpemUiLCJzcGxpdCIsImpvaW4iLCJjcmVhdGVOZXdMaW5lIiwidGFiSW5kZXgiLCJ0ZXh0IiwiZGl2RWxlbWVudCIsInNwYW5FbGVtZW50IiwibmV3TGluZSIsImFmdGVyIiwiZmlyc3RMaW5lIiwiZm9jdXMiLCJxdWVyeVNlbGVjdG9yIiwiYnJlYWtGbGFnIiwibmV3TGluZVBvc2l0aW9uIiwibmV3UG9zaXRpb25Jbk5vZGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZ2V0Rmlyc3RMaW5lIiwib2xkTGluZVBvc2l0aW9uIiwiZ2V0Tm9kZUJ5UG9zaXRpb24iLCJjb3VudGVyIiwicHV0TmV3TGluZUFmdGVyIiwiaW5zZXJ0QmVmb3JlIiwiY2xvbmVOb2RlIiwicmVjYWxjdWxhdGVUYWJJbmRleCIsImVsZW1lbnRUb1JlY2FsY3VsYXRlRnJvbSIsImxpbmVFbGVtZW50cyIsImN1cnNvciIsImdldExpbmVCeU51bWJlciIsInRtcENvbnRhaW5lciIsImlubmVySFRNTCIsIm9sZEVsIiwibm9kZUlkIiwiZWxlbWVudHNUb1JlcGxhY2UiLCJuZXdFbCIsInB1c2giLCJtYXAiLCJ4IiwicmV2ZXJzZSIsIm91dGVySFRNTCIsImhhbmRsZXJzIiwiQ29tbWFuZEhhbmRsZXJzIiwibXNnVHlwZSIsImNhbGxiYWNrIiwiY29tbWFuZF9idXNfQ29tbWFuZEJ1cyIsImNvbm5lY3Rpb25BdHRlbXB0Q291bnRlciIsInNlcnZlclVybCIsImNyZWF0ZVNvY2tldCIsImFyZ3MiLCJzb2NrZXQiLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJvbk1lc3NhZ2UiLCJvbmNsb3NlIiwib25DbG9zZSIsIm9ub3BlbiIsIm9uT3BlbiIsIm9uZXJyb3IiLCJlcnJvciIsImRlYnVnIiwid2FzQ2xlYW4iLCJyZWFzb24iLCJFcnJvciIsImNsb3NlIiwibXNnIiwibWVzc2FnZSIsInBhcnNlIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwibG9jYXRpb24iLCJob3N0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEtleUJvYXJkRXZlbnRMaXN0ZW5lcnMiLCJzZXRNb3VzZUV2ZW50TGlzdGVuZXJzIiwiZmlsZUxpc3RpbmciLCJhdXRvQ29tcGxldGUiLCJwcmVzc2VkS2V5cyIsImNvbW1hbmRCdXMiLCJyZWdpc3RlckNvbW1hbmRIYW5kbGVyIiwiaGFuZGxlckxpbmVQYXJzZSIsImhhbmRsZXJBdXRvY29tcGxldGVTaG93IiwianNvbkRhdGEiLCJjdXJyZW50TGluZU51bWJlciIsIm9sZFBvc2l0aW9uIiwicmVwbGFjZUxpbmUiLCJzaG93IiwiZ2V0Q29vcmRpbmF0ZSIsImFkZE5ld1JvdyIsInB1dFN0cmluZyIsImdldFN5bWJvbHMiLCJwdXRUYWIiLCJobFByZXYiLCJtb3ZlVXBSb3ciLCJobE5leHQiLCJtb3ZlRG93blJvdyIsIm1vdmVFbmQiLCJtb3ZlSG9tZSIsImRlbGV0ZVN5bWJvbEJlZm9yZSIsInNlbmRDb21tYW5kIiwiY29tbWFuZEdldEF1dG9jb21wbGV0ZVNob3ciLCJjb21tYW5kR2V0UGFyc2VMaW5lTXNnIiwic2V0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SyxHQUN2RSxNQUFNQyxFQUFzQkQsRUFBTUMsT0FDbEMsR0FBdUMsYUFBbkNBLEVBQU9wQyxjQUFjdkMsVUFBMEIsQ0FFL0MsSUFBSUosRUFBWXlGLEVBQUttSyxZQUFZNkIsU0FBUzNNLEdBRTFDVyxFQUFLdkQsV0FBV3dQLE9BQU8xUixHQUV2QixJQUFJNEIsRUFBV21ELEVBQU81QyxhQUFhLFFBQy9CUCxFQUFTK1AsU0FBUyxRQUNsQmxNLEVBQUs5QixLQUFPLElBQUlvSCxFQUFLbkosR0FDckI2RCxFQUFLbUgsT0FBUyxJQUFJbEMsRUFBU2pGLEVBQUs5QixLQUFNOEIsRUFBS3ZELFlBQzNDdUQsRUFBS29LLGFBQWUsSUFBSXJNLElBRXhCaUMsRUFBSzlCLEtBQU8sSUFBSW9ILEVBQUtuSixHQUNyQjZELEVBQUttSCxPQUFTLElBQUk3RyxFQUFVTixFQUFLOUIsS0FBTThCLEVBQUt2RCxZQUM1Q3VELEVBQUtvSyxhQUFlLElBQUl6TyxPQUVjLGVBQW5DMkQsRUFBT3BDLGNBQWN2QyxXQUM1QnFGLEVBQUttSyxZQUFZalIsSUFBSW1HLEdBR3pCQSxFQUFNUyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNsYXNzIExpbmVOdW1iZXIge1xuICAgIGNvbnN0cnVjdG9yIChsaW5lQ291bnQ6bnVtYmVyKXtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbGluZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBkaXZMaW5lTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBkaXZMaW5lTnVtYmVyLmNsYXNzTmFtZSA9ICdsaW5lLW51bWJlcic7XG4gICAgICAgICAgICBkaXZMaW5lTnVtYmVyLnRleHRDb250ZW50ID0gU3RyaW5nKGkpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmUtbnVtYmVyJykuYXBwZW5kQ2hpbGQoZGl2TGluZU51bWJlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRqdXN0KG5ld1ZhbHVlOm51bWJlcil7XG4gICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZS1udW1iZXInKS5sYXN0Q2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudFZhbHVlICsgMTsgaSA8PSBjdXJyZW50VmFsdWUgKyBNYXRoLmFicyhjdXJyZW50VmFsdWUgLSBuZXdWYWx1ZSk7IGkrKykge1xuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID4gY3VycmVudFZhbHVlKXtcbiAgICAgICAgICAgICAgICBsZXQgZGl2TGluZU51bWJlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGRpdkxpbmVOdW1iZXIuY2xhc3NOYW1lID0gJ2xpbmUtbnVtYmVyJztcbiAgICAgICAgICAgICAgICBkaXZMaW5lTnVtYmVyLnRleHRDb250ZW50ID0gU3RyaW5nKGkpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcicpLmFwcGVuZENoaWxkKGRpdkxpbmVOdW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZS1udW1iZXInKS5yZW1vdmVDaGlsZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZS1udW1iZXInKS5sYXN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRCeU51bWJlcihudW1iZXI6IG51bWJlcil7XG4gICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbGluZS1udW1iZXInKS5pdGVtKG51bWJlcik7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFR4dEF1dG9jb21wbGV0ZSB7XG4gICAgcHVibGljIGFjdGl2ZTogQm9vbGVhbjtcbiAgICBwdWJsaWMgYXV0b0NvbXBsZXRlRWxlbWVudDogSFRNTEVsZW1lbnQgPSBudWxsO1xuICAgIHB1YmxpYyBhY3RpdmVWYXJpYW50IDogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNyZWF0ZUF1dG9jb21wbGV0ZUVsZW1lbnQoW10pO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuXG4gICAgY29tbWFuZEdldEF1dG9jb21wbGV0ZVNob3coY29kZUxpbmU6IEhUTUxFbGVtZW50LCBwb3NpdGlvbkluTGluZTogbnVtYmVyLCBmaWxlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIC8vIFRPRE8gZG8gc2NoZW1hXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJhdXRvQ29tcGxldGVTaG93XCIsXG4gICAgICAgICAgICBcImRhdGFcIjoge1xuICAgICAgICAgICAgICAgIFwiZmlsZU5hbWVcIjogZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgXCJsaW5lVGV4dFwiOiBjb2RlTGluZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgICAgICBcInBvc2l0aW9uSW5MaW5lXCI6IHBvc2l0aW9uSW5MaW5lLFxuICAgICAgICAgICAgICAgIFwibGluZU51bWJlclwiOiBwYXJzZUludChjb2RlTGluZS5nZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JykpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZUF1dG9jb21wbGV0ZUVsZW1lbnQocmVzdWx0OiBBcnJheTxzdHJpbmc+KSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuY2xhc3NOYW1lID0gJ2F1dG9jb21wbGV0ZSc7XG4gICAgICAgIC8vIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3llbGxvdyc7XG4gICAgICAgIHRoaXMucmVmaWxsKHJlc3VsdCk7XG5cbiAgICB9XG5cbiAgICByZWZpbGwocmVzdWx0OiBBcnJheTxzdHJpbmc+KXtcbiAgICAgICAgd2hpbGUgKHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgIHJlc3VsdCkge1xuICAgICAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBsaW5lO1xuICAgICAgICAgICAgdGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNob3cocmVjdDogQ2xpZW50UmVjdCwgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAvLyB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsICdcInRvcDonICsgcmVjdC5ib3R0b20gKyAncHg7bGVmdDonICsgcmVjdC5sZWZ0ICsgJ3B4XCInKTtcbiAgICAgICAgdGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LnN0eWxlLnRvcCA9IHJlY3QuYm90dG9tLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuc3R5bGUubGVmdCA9IHJlY3QubGVmdC50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIGdldFN5bWJvbHMoc3RhcnRQb3NpdGlvbjpudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5jaGlsZE5vZGVzLml0ZW0odGhpcy5hY3RpdmVWYXJpYW50KS50ZXh0Q29udGVudC5zbGljZShzdGFydFBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVZhcmlhbnQgPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGxOZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmVWYXJpYW50ID09PSB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICg8SFRNTEVsZW1lbnQ+dGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmNoaWxkTm9kZXMuaXRlbSh0aGlzLmFjdGl2ZVZhcmlhbnQpKS5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIHRoaXMuYWN0aXZlVmFyaWFudCArPSAxO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGxldCBhY3RpdmVWYXJpYW50ID0gPEhUTUxFbGVtZW50PnRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5jaGlsZE5vZGVzLml0ZW0odGhpcy5hY3RpdmVWYXJpYW50KTtcbiAgICAgICAgICAgIGFjdGl2ZVZhcmlhbnQuc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtYXV0b2NvbXBsZXRlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBobFByZXYoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVZhcmlhbnQgPT09IDApe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICg8SFRNTEVsZW1lbnQ+dGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmNoaWxkTm9kZXMuaXRlbSh0aGlzLmFjdGl2ZVZhcmlhbnQpKS5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIHRoaXMuYWN0aXZlVmFyaWFudCAtPSAxO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGxldCBhY3RpdmVWYXJpYW50ID0gPEhUTUxFbGVtZW50PnRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5jaGlsZE5vZGVzLml0ZW0odGhpcy5hY3RpdmVWYXJpYW50KTtcbiAgICAgICAgICAgIGFjdGl2ZVZhcmlhbnQuc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtYXV0b2NvbXBsZXRlJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1R4dEF1dG9jb21wbGV0ZX0gZnJvbSBcIi4vdHh0LWF1dG9jb21wbGV0ZVwiO1xuXG5leHBvcnQgY2xhc3MgUHlBdXRvY29tcGxldGUgZXh0ZW5kcyBUeHRBdXRvY29tcGxldGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGaWxlTGlzdGluZyB7XG4gICAgcHVibGljIGN1cmVudEZpbGU6IHN0cmluZz0nJztcbiAgICBwdWJsaWMgY29kZTtcbiAgICBjb25zdHJ1Y3Rvcihjb2RlKSB7XG4gICAgICAgIHRoaXMuY3VyZW50RmlsZSA9ICcnO1xuICAgICAgICB0aGlzLmNvZGU9IGNvZGU7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgIHVybDogJy9zZXJ2ZXIvZmlsZWxpc3RpbmcnXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbGVtZW50OiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGUgPSAkKGVsZW1lbnQpWzBdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBteUVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlbGlzdGluZycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIG15RWxlbWVudCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBteUVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQvdC10YIg0LXQu9C10LzQtdC90YLQsCBmaWxlbGlzdGluZycpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZvbGRlciBsaXN0aW5nIHJlc3BvbmUnLCByZXNwb25zZSlcbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQstGB0LUg0YHQu9C+0LzQsNC70L7RgdGMINCyIGZvbGRlciBsaXN0aW5nJywganFYSFIsIHRleHRTdGF0dXMpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldChldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgOiBIVE1MRWxlbWVudCB8IG51bGwgPSA8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoIXRhcmdldCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXZlbnQudGFyZ2V0IGlzIGVtcHR5IGluIGZvbGRlciBsaXN0aW5nIGdldCcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudERpdjogTm9kZSB8IG51bGwgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKCFwYXJlbnREaXYpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2V2ZW50LnRhcmdldC5wYXJlbnROb2RlIGlzIGVtcHR5IGluIGZvbGRlciBsaXN0aW5nIGdldCcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGROb2RlMCA6IEhUTUxFbGVtZW50ID0gcGFyZW50RGl2LmNoaWxkTm9kZXNbMF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChwYXJlbnREaXYgJiYgY2hpbGROb2RlMC5zdHlsZS50cmFuc2Zvcm0gPT09ICdyb3RhdGUoMTgwZGVnKScpIHtcbiAgICAgICAgICAgIGNoaWxkTm9kZTAuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSg5MGRlZyknO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBhcmVudERpdi5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKFsnZm9sZGVybGluaycsICdmaWxlbGluayddLmluY2x1ZGVzKChwYXJlbnREaXYuY2hpbGROb2Rlc1tpXSBhcyBIVE1MRWxlbWVudCkuY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnREaXYucmVtb3ZlQ2hpbGQocGFyZW50RGl2LmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGlsZE5vZGUwLnN0eWxlLnRyYW5zZm9ybSA9PT0gJ3JvdGF0ZSg5MGRlZyknKSB7XG4gICAgICAgICAgICBjaGlsZE5vZGUwLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMTgwZGVnKSc7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgICAgICAgICAgdXJsOiAoPEhUTUxBbmNob3JFbGVtZW50PmV2ZW50LnRhcmdldCkuaHJlZlxuICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50OiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgJChwYXJlbnREaXYpLmFwcGVuZCgkKGVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGUgPSAkKGVsZW1lbnQpWzBdO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZWxpc3RpbmcnKS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ9Cy0YHQtSDRgdC70L7QvNCw0LvQvtGB0Ywg0LIgZm9sZGVyIGxpc3RpbmcnLCBqcVhIUiwgdGV4dFN0YXR1cylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2hpbGROb2RlMC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDkwZGVnKSc7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgc2hvd0ZpbGUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzLCBsaW5lQ291bnQ7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICB1cmw6ICg8RWxlbWVudD5ldmVudC50YXJnZXQpLmF0dHJpYnV0ZXNbJ2hyZWYnXS52YWx1ZSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuY2hpbGRyZW4pLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbGVtZW50OiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvZGUnKS5hcHBlbmRDaGlsZCgkKGVsZW1lbnQpWzBdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZWxmLmN1cmVudEZpbGUgPSAoPEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5hdHRyaWJ1dGVzWydocmVmJ10udmFsdWU7XG4gICAgICAgICAgICBsaW5lQ291bnQgPSByZXNwb25zZS5sZW5ndGg7XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn0LLRgdC1INGB0LvQvtC80LDQu9C+0YHRjCDQsiBnZXQgQ09ERScsIGpxWEhSLCB0ZXh0U3RhdHVzKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpbmVDb3VudDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvZGV9IGZyb20gJy4uL2NvZGUnO1xuaW1wb3J0IHtMaW5lTnVtYmVyfSBmcm9tIFwiLi4vbGluZS1udW1iZXJcIjtcblxuXG5leHBvcnQgY2xhc3MgVHh0Q3Vyc29yIHtcbiAgICBwdWJsaWMgY29kZTogQ29kZTtcbiAgICBwdWJsaWMgbGluZU51bWJlcjpMaW5lTnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfY3Vyc29yUGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQgPSBudWxsO1xuICAgIGN1cnNvckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgcG9zaXRpb246IG51bWJlciA9IG51bGw7XG4gICAgcHJpdmF0ZSBjdXJzb3JIaWdobGlnaHRFbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGw7XG4gICAgLy8gcHJpdmF0ZSBjdXJzb3JUZXh0OiBzdHJpbmcgPSAnJzsgIHVzZSBzZXR0ZXIvZ2V0dGVyXG4gICAgLy8gY3Vyc29yUGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQgPSBudWxsOyB1c2Ugc2V0dGVyL2dldHRlclxuXG5cbiAgICBjb25zdHJ1Y3Rvcihjb2RlOiBDb2RlLCBsaW5lTnVtYmVyOiBMaW5lTnVtYmVyKSB7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmVOdW1iZXI7XG4gICAgICAgIHRoaXMuY3JlYXRlQ3Vyc29ySFRNTEVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVDdXJzb3JIaWdodGxpZ2h0RWxlbWVudCgpO1xuXG4gICAgICAgIGxldCBwYXJlbnRFbGVtZW50ID0gdGhpcy5jb2RlLmdldEZpcnN0RWxlbWVudCgpO1xuICAgICAgICB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50O1xuICAgICAgICB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jdXJzb3JFbGVtZW50KTtcbiAgICAgICAgdGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSk7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZShwYXJlbnRFbGVtZW50LCAwKTtcblxuICAgICAgICBpZiAocGFyZW50RWxlbWVudC50ZXh0Q29udGVudCA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGlzIGVtcHR5IHNvIGRvIHRoaXMgd2F5XG4gICAgICAgICAgICB0aGlzLmN1cnNvclRleHQgPSAnXFxuJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQ3Vyc29ySGlnaHRsaWdodEVsZW1lbnQoKSB7XG4gICAgICAgIC8vIFRPRE8gY3JlYXRlIGN1cnNvciBieSB3ZWIgY29tcG9uZW50XG4gICAgICAgIHRoaXMuY3Vyc29ySGlnaGxpZ2h0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmN1cnNvckhpZ2hsaWdodEVsZW1lbnQuaWQgPSAnY3Vyc29ySGlnaGxpZ2h0RWxlbWVudCc7XG4gICAgICAgIHRoaXMuY3Vyc29ySGlnaGxpZ2h0RWxlbWVudC5zdHlsZS53aWR0aCA9ICczcHgnOyAvL1RPRE8gY2FsY3VsYXRlIGl0IGluIHJ1bnRpbWVcbiAgICAgICAgdGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxOHB4JzsgLy9UT0RPIGNhbGN1bGF0ZSBpdCBpbiBydW50aW1lXG4gICAgICAgIHRoaXMuY3Vyc29ySGlnaGxpZ2h0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JsYWNrJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUN1cnNvckhUTUxFbGVtZW50KGN1cnNvclRleHQgPSAnJykge1xuICAgICAgICAvLyBUT0RPIGNyZWF0ZSBjdXJzb3IgYnkgd2ViIGNvbXBvbmVudFxuICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHRoaXMuY3Vyc29yRWxlbWVudC5jbGFzc05hbWUgPSAnY3Vyc29yJztcbiAgICAgICAgdGhpcy5jdXJzb3JUZXh0ID0gY3Vyc29yVGV4dDtcbiAgICB9XG5cbiAgICBwdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKHBhcmVudEN1cnNvck5vZGU6IEhUTUxFbGVtZW50LCBjdXJzb3JQb3NpdGlvbkluTm9kZTogbnVtYmVyKSB7XG4gICAgICAgIGlmIChwYXJlbnRDdXJzb3JOb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5rIGlmIG5ldyBub2RlIGlzIG51bGxcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdudWxsIGVsZW1lbnQgaW4gcHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCAhPT0gcGFyZW50Q3Vyc29yTm9kZSkge1xuICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHB1dCBjdXJzb3IgaW4gYW5vdGhlciBub2RlXG4gICAgICAgICAgICB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQgPSBudWxsO1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgbmV3IG9uZVxuICAgICAgICAgICAgbGV0IGluaXRUZXh0Q29udGVudCA9IHBhcmVudEN1cnNvck5vZGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQgPSBwYXJlbnRDdXJzb3JOb2RlO1xuICAgICAgICAgICAgbGV0IGNoaWxkTm9kZXMgPSB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGlsZE5vZGVzLmxlbmd0aDo9JywgY2hpbGROb2Rlcy5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHRUZXh0Tm9kZSA9ICg8VGV4dD5jaGlsZE5vZGVzLml0ZW0oMCkpLnNwbGl0VGV4dChjdXJzb3JQb3NpdGlvbkluTm9kZSk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvclRleHQgPSB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQudGV4dENvbnRlbnQuc2xpY2UoY3Vyc29yUG9zaXRpb25Jbk5vZGUsIGN1cnNvclBvc2l0aW9uSW5Ob2RlICsgMSk7XG4gICAgICAgICAgICBuZXh0VGV4dE5vZGUudGV4dENvbnRlbnQgPSBpbml0VGV4dENvbnRlbnQuc2xpY2UoY3Vyc29yUG9zaXRpb25Jbk5vZGUgKyAxKTtcbiAgICAgICAgICAgIG5leHRUZXh0Tm9kZS5iZWZvcmUodGhpcy5jdXJzb3JFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjdXJzb3JQb3NpdGlvbkluTm9kZSAhPT0gdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHByZXZpb3VzU2libGluZ1RleHQgPSAnJywgY3Vyc29yVGV4dCA9ICcnLCBuZXh0U2libGluZ1RleHQgPSAnJztcbiAgICAgICAgICAgICAgICBwcmV2aW91c1NpYmxpbmdUZXh0ID0gdGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LnRleHRDb250ZW50LnNsaWNlKDAsIGN1cnNvclBvc2l0aW9uSW5Ob2RlKTtcbiAgICAgICAgICAgICAgICBjdXJzb3JUZXh0ID0gdGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LnRleHRDb250ZW50LnNsaWNlKGN1cnNvclBvc2l0aW9uSW5Ob2RlLCBjdXJzb3JQb3NpdGlvbkluTm9kZSArIDEpO1xuICAgICAgICAgICAgICAgIG5leHRTaWJsaW5nVGV4dCA9IHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudC50ZXh0Q29udGVudC5zbGljZShjdXJzb3JQb3NpdGlvbkluTm9kZSArIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yRWxlbWVudC5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQgPSBwcmV2aW91c1NpYmxpbmdUZXh0O1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yVGV4dCA9IGN1cnNvclRleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50Lm5leHRTaWJsaW5nLnRleHRDb250ZW50ID0gbmV4dFNpYmxpbmdUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHV0IGN1cnNvciBpbiBzYW1lIHBvc2l0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpbmVOdW1iZXJFbGVtZW50ID0gdGhpcy5saW5lTnVtYmVyLmdldEJ5TnVtYmVyKFxuICAgICAgICAgICAgcGFyc2VJbnQocGFyZW50Q3Vyc29yTm9kZS5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndGFiSW5kZXgnKSkgLSAxXG4gICAgICAgICk7XG4gICAgICAgIGxldCBsaW5lTnVtYmVyUmVjdCA9IGxpbmVOdW1iZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuY3Vyc29yRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50LnN0eWxlLnRvcCA9IChyZWN0LnRvcCAtIGxpbmVOdW1iZXJSZWN0LnRvcCkudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgIHRoaXMuY3Vyc29ySGlnaGxpZ2h0RWxlbWVudC5zdHlsZS5sZWZ0ID0gKHJlY3QubGVmdCAtIGxpbmVOdW1iZXJSZWN0LmxlZnQgLSAzKS50b1N0cmluZygpICsgJ3B4JzsgLy8gVE9ETyBjdWxjdWxhdGUgdGhpcygtMyBiZWNhdXNlIG9mIHdpZHRoIG9mIGN1cnNvckhpZ2xpZ2h0IGVsZW1lbnQpXG4gICAgICAgIGxpbmVOdW1iZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY3Vyc29ySGlnaGxpZ2h0RWxlbWVudCk7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldygpO1xuICAgIH1cblxuICAgIGdldENvb3JkaW5hdGUoKSA6IENsaWVudFJlY3R7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgfVxuXG4gICAgZ2V0UG9zaXRpb25Jbk5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvckVsZW1lbnQucHJldmlvdXNTaWJsaW5nLnRleHRDb250ZW50Lmxlbmd0aDsgLy8gbm90IC0xIGJlY2F1c2UgY3Vyc29yIGluY2x1ZGUgbGV0dGVyXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldExpbmVQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRMaW5lUG9zaXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5jb2RlLmdldFBvc2l0aW9uSW5MaW5lKHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBnZXRMaW5lTnVtYmVyKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmNvZGUuZ2V0TGluZU51bWJlcih0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQpO1xuICAgIH1cbiAgICBwcml2YXRlIHNjcm9sbEludG9WaWV3KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoeydibG9jayc6ICduZWFyZXN0JywgJ2lubGluZSc6ICduZWFyZXN0J30pO1xuICAgIH1cblxuICAgIHNldCBjdXJzb3JQYXJlbnRFbGVtZW50KGVsKSB7XG4gICAgICAgIGlmIChlbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnJlcGxhY2VXaXRoKHRoaXMuY3Vyc29yVGV4dCk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQubm9ybWFsaXplKCk7XG4gICAgICAgICAgICB0aGlzLl9jdXJzb3JQYXJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yVGV4dCA9ICcnO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgYnkgY29kZSBwYXJzaW5nIGFsZ2hvcml0bVxuICAgICAgICAgICAgLy8gdGhpcy5fY3Vyc29yUGFyZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ25vZGVpZCcpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ25vZGVpZCcsIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwKSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5fY3Vyc29yUGFyZW50RWxlbWVudCA9IGVsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGN1cnNvclBhcmVudEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJzb3JQYXJlbnRFbGVtZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0IGN1cnNvclRleHQoY3Vyc29yVGV4dDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yRWxlbWVudC50ZXh0Q29udGVudCA9IGN1cnNvclRleHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgY3Vyc29yVGV4dCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJzb3JFbGVtZW50LnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIHB1dFN5bWJvbChjaGFyOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCArPSBjaGFyO1xuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LCB0aGlzLmdldFBvc2l0aW9uSW5Ob2RlKCkpO1xuICAgICAgICB0aGlzLnJlc2V0TGluZVBvc2l0aW9uKCk7XG4gICAgfTtcblxuICAgIG1vdmVMZWZ0KCkge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZSh0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQsIHRoaXMuZ2V0UG9zaXRpb25Jbk5vZGUoKSAtIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3Vyc29yRWxlbWVudC5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICAgICBsZXQgcHJldmlvdXNFbGVtZW50ID0gdGhpcy5jb2RlLmdldFByZXZpb3VzRWxlbWVudCh0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKHByZXZpb3VzRWxlbWVudCwgcHJldmlvdXNFbGVtZW50LnRleHRDb250ZW50Lmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXRMaW5lUG9zaXRpb24oKTtcbiAgICB9O1xuXG4gICAgbW92ZVJpZ2h0KCkge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3JFbGVtZW50Lm5leHRTaWJsaW5nLnRleHRDb250ZW50ICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJzb3JFbGVtZW50Lm5leHRTaWJsaW5nLnRleHRDb250ZW50ID09PSAnJykge1xuICAgICAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKHRoaXMuY29kZS5nZXROZXh0RWxlbWVudCh0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQpLCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0TGluZVBvc2l0aW9uKCk7XG4gICAgfTtcblxuICAgIG1vdmVVcFJvdygpIHtcbiAgICAgICAgdGhpcy5zZXRMaW5lUG9zaXRpb24oKTtcbiAgICAgICAgbGV0IG5ld1Bvc2l0aW9uID0gdGhpcy5jb2RlLmdldE92ZXJFbGVtZW50KHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZShuZXdQb3NpdGlvbi5ub2RlLCBuZXdQb3NpdGlvbi5wb3NpdGlvbkluTm9kZSk7XG4gICAgfTtcblxuICAgIG1vdmVEb3duUm93KCkge1xuICAgICAgICB0aGlzLnNldExpbmVQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3UG9zaXRpb24gPSB0aGlzLmNvZGUuZ2V0VW5kZXJFbGVtZW50KHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZShuZXdQb3NpdGlvbi5ub2RlLCBuZXdQb3NpdGlvbi5wb3NpdGlvbkluTm9kZSk7XG4gICAgfTtcblxuICAgIHBhZ2VEb3duKCkge1xuICAgICAgICB0aGlzLnNldExpbmVQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3RWxlbWVudCA9IHRoaXMuY29kZS5wYWdlRG93bih0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQsIHRoaXMucG9zaXRpb24pO1xuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUobmV3RWxlbWVudC5ub2RlLCBuZXdFbGVtZW50LnBvc2l0aW9uSW5Ob2RlKTtcbiAgICB9O1xuXG4gICAgcGFnZVVwKCkge1xuICAgICAgICB0aGlzLnNldExpbmVQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3RWxlbWVudCA9IHRoaXMuY29kZS5wYWdlVXAodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LCB0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKG5ld0VsZW1lbnQubm9kZSwgbmV3RWxlbWVudC5wb3NpdGlvbkluTm9kZSk7XG4gICAgfTtcblxuICAgIG1vdmVIb21lKCkge1xuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUodGhpcy5jb2RlLmdldEZpcnN0RWxlbWVudE9uTGluZUJ5Tm9kZSh0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQpLCAwKTtcbiAgICAgICAgdGhpcy5yZXNldExpbmVQb3NpdGlvbigpO1xuICAgIH07XG5cbiAgICBtb3ZlRW5kKCkge1xuICAgICAgICBsZXQgbGFzdEVsZW1lbnQgPSB0aGlzLmNvZGUuZ2V0TGFzdEVsZW1lbnRPbkxpbmVCeU5vZGUodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKGxhc3RFbGVtZW50LCBsYXN0RWxlbWVudC50ZXh0Q29udGVudC5sZW5ndGggLSAxKTtcbiAgICAgICAgdGhpcy5yZXNldExpbmVQb3NpdGlvbigpO1xuICAgIH07XG5cbiAgICBkZWxldGVTeW1ib2xVbmRlcigpIHtcbiAgICAgICAgdGhpcy5tb3ZlUmlnaHQoKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0UG9zaXRpb25Jbk5vZGUoKSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9IHRoaXMuY3Vyc29yRWxlbWVudC5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQuc2xpY2UoMCwgdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpIC0gMSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwcmV2RWxlbWVudCA9IHRoaXMuY29kZS5nZXRQcmV2aW91c0VsZW1lbnQodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgIHByZXZFbGVtZW50LnRleHRDb250ZW50ID0gcHJldkVsZW1lbnQudGV4dENvbnRlbnQuc2xpY2UoMCwgcHJldkVsZW1lbnQudGV4dENvbnRlbnQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBpZiAocHJldkVsZW1lbnQudGV4dENvbnRlbnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2RlLnJlbW92ZU5vZGUocHJldkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgZGVsZXRlU3ltYm9sQmVmb3JlKCkge1xuICAgICAgICB0aGlzLm1vdmVMZWZ0KCk7XG4gICAgICAgIHRoaXMuZGVsZXRlU3ltYm9sVW5kZXIoKTtcbiAgICB9O1xuXG4gICAgc2V0QnlDbGljaygpIHtcbiAgICAgICAgLy9UT0RPIHdvcmtzIHN0cmFuZ2UgZml4IGl0XG4gICAgICAgIGxldCBzZWxPYmogPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxPYmonLCBzZWxPYmosIHNlbE9iai5nZXRSYW5nZUF0KDApLHNlbE9iai5nZXRSYW5nZUF0KDApLCAnfCcgKyBzZWxPYmoudG9TdHJpbmcoKSArICd8Jyk7XG4gICAgICAgIGxldCBhbmNob3JOb2RlID0gc2VsT2JqLmFuY2hvck5vZGU7XG4gICAgICAgIGlmIChhbmNob3JOb2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkIG5vZGUgaXMgbm90IHRleHQgdHlwZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJzb3JQYXJlbnRFbGVtZW50ID0gYW5jaG9yTm9kZS5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAoYW5jaG9yTm9kZS5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2N1cnNvcicpIHtcbiAgICAgICAgICAgIC8vIGNsaWNrIGluIGN1cnNvclxuICAgICAgICAgICAgY3Vyc29yUGFyZW50RWxlbWVudCA9IGN1cnNvclBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUoY3Vyc29yUGFyZW50RWxlbWVudCwgc2VsT2JqLmFuY2hvck9mZnNldCk7XG4gICAgICAgIHRoaXMucmVzZXRMaW5lUG9zaXRpb24oKTtcbiAgICB9O1xuXG4gICAgYWRkTmV3Um93KCkge1xuICAgICAgICB0aGlzLm1vdmVMZWZ0KCk7XG4gICAgICAgIGxldCBuZXdOb2RlID0gdGhpcy5jb2RlLmRpdmlkZUxpbmUodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgbGV0IHBvc2l0aW9uSW5Ob2RlID0gdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpO1xuICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgPSAnXFxuJztcbiAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKG5ld05vZGUsIHBvc2l0aW9uSW5Ob2RlKTtcbiAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9ICcnO1xuICAgIH07XG5cbiAgICBnb1RvRGVmaW5pdGlvbihmaWxlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIC8vIFRPRE8gd2h5IGlzIGl0ICBoZXJlXG4gICAgfVxuXG4gICAgcHV0VGFiKCkge1xuICAgICAgICAvLyBUT0RPIHdoeSBpcyBpdCBoZXJlXG4gICAgICAgIHRoaXMucHV0U3ltYm9sKCdcXHQnKTtcbiAgICB9XG5cbiAgICBwdXRTdHJpbmcoc3RyOiBzdHJpbmcpe1xuICAgICAgICBmb3IgKGxldCBpIG9mIHN0cil7XG4gICAgICAgICAgICB0aGlzLnB1dFN5bWJvbChpKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiaW1wb3J0IHtUeHRDdXJzb3J9IGZyb20gJy4vdHh0LWN1cnNvcic7XG5pbXBvcnQge0NvZGV9IGZyb20gXCIuLi9jb2RlXCI7XG5pbXBvcnQge0xpbmVOdW1iZXJ9IGZyb20gXCIuLi9saW5lLW51bWJlclwiO1xuXG5leHBvcnQgY2xhc3MgUHlDdXJzb3IgZXh0ZW5kcyBUeHRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGU6IENvZGUsIGxpbmVOdW1iZXI6IExpbmVOdW1iZXIpIHtcbiAgICAgICAgc3VwZXIoY29kZSwgbGluZU51bWJlcik7XG4gICAgfVxuXG4gICAgcHV0VGFiKCkge1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgIH07XG5cbiAgICAvLyBnb1RvRGVmaW5pdGlvbihjdXJlbnRGaWxlOnN0cmluZykge1xuICAgIC8vICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgLy8gICAgICQuYWpheCh7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIC8vICAgICAgICAgdXJsOiBjdXJlbnRGaWxlLFxuICAgIC8vICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAvLyAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgLy8gICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgLy8gICAgICAgICAgICAgXCJjb2RlX3N0cmluZ1wiOiAkKCQoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY3Vyc29yJylbMF0pLnBhcmVudHMoJy5jb250ZW50LWxpbmUnKVswXSkudGV4dCgpLFxuICAgIC8vICAgICAgICAgICAgIFwiY3Vyc29yX3Bvc2l0aW9uXCI6IFR4dEN1cnNvci5fZ2V0Q3Vyc29yU2libGluZ1RleHRzQnlDdXJzb3JzKClbMF0udGV4dEJlZm9yZUN1cnNvci5sZW5ndGggKyAxLFxuICAgIC8vICAgICAgICAgICAgIFwiY29kZV9saW5lX251bWJlclwiOiBwYXJzZUludCgkKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2N1cnNvcicpWzBdKS5wYXJlbnRzKCcuY29udGVudC1saW5lJylbMF0uZ2V0QXR0cmlidXRlKCd0YWJJbmRleCcpKSxcbiAgICAvLyAgICAgICAgICAgICBcInR5cGVcIjogXCJnb3RvZGVmaW5pdGlvblwiXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIC8vICAgICAgICAgbGV0IGNvbnRlbnRMSW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3RhYmluZGV4PVwiJyArIHBhcnNlSW50KHJlc3BvbnNlLmNvZGVfbGluZV9udW1iZXIpICsgJ1wiXScpIGFzIEhUTUxFbGVtZW50O1xuICAgIC8vICAgICAgICAgY29udGVudExJbmUuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7XG4gICAgLy8gICAgICAgICBsZXQgY3Vyc29yU2libGluZyA9IFR4dEN1cnNvci5fZ2V0Q3Vyc29yU2libGluZ1RleHRCeVBvc2l0aW9uKHJlc3BvbnNlLmN1cnNvcl9wb3NpdGlvbiArIDEsIGNvbnRlbnRMSW5lKTtcbiAgICAvLyAgICAgICAgIFR4dEN1cnNvci5fY3JlYXRlQ3Vyc29yKGNvbnRlbnRMSW5lLCBjdXJzb3JTaWJsaW5nLnRleHRCZWZvcmVDdXJzb3IsIGN1cnNvclNpYmxpbmcudGV4dEN1cnNvciwgY3Vyc29yU2libGluZy50ZXh0QWZ0ZXJDdXJzb3IpO1xuICAgIC8vICAgICAgICAgICAgIC8vc2VsZi5fc2V0Q3Vyc29yU2hpZnQocmVzcG9uc2UuY3Vyc29yX3Bvc2l0aW9uICsgMSwgJChjb250ZW50TEluZSkpO1xuICAgIC8vICAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfQstGB0LUg0YHQu9C+0LzQsNC70L7RgdGMINCyINCz0L4g0YLRgyDQtNC10YTQuNC90LjRiNC40L0nKVxuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG59XG4iLCJleHBvcnQgY2xhc3MgVGFncyB7XG4gICAgY29uc3RydWN0b3IgKCl7fVxuICAgIGluaXQgKGV2ZW50OiBNb3VzZUV2ZW50KXtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgdXJsOiAoPEhUTUxBbmNob3JFbGVtZW50PmV2ZW50LnRhcmdldCkuaHJlZi5yZXBsYWNlKC86MzE0MTVcXC9zZXJ2ZXJcXC9jb2RlLywgJzozMTQxNVxcL3NlcnZlci90YWdzJylcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudERpdjogSFRNTEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhZ3MnKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnREaXYpe1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBwYXJlbnREaXYuY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBpID49MDsgaS0tKXtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RGl2LnJlbW92ZUNoaWxkKHBhcmVudERpdi5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwYXJlbnREaXYgaXMgZW1wdHkgaW4gIHRhZ3MgbGlzdGluZycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbGVtZW50OiBzdHJpbmcpe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdzOiBIVE1MRWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFncycpO1xuICAgICAgICAgICAgICAgICAgICBpZih0YWdzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQoJChlbGVtZW50KVswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0YWdzIGlzIGVtcHR5IGluICB0YWdzIGxpc3RpbmcnKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmb2xkZXIgbGlzdGluZyByZXNwb25lJywgcmVzcG9uc2UpXG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn0LLRgdC1INGB0LvQvtC80LDQu9C+0YHRjCDQsiB0YWdzIGxpc3RpbmcnLGpxWEhSLCB0ZXh0U3RhdHVzKVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1R4dEN1cnNvcn0gZnJvbSBcIi4vY3Vyc29ycy90eHQtY3Vyc29yXCI7XG5cbmNsYXNzIFBvc2l0aW9uSW5Ob2RlIHtcbiAgICBwdWJsaWMgbm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgcHVibGljIHBvc2l0aW9uSW5Ob2RlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBIVE1MRWxlbWVudCwgcG9zaXRpb25Jbk5vZGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLnBvc2l0aW9uSW5Ob2RlID0gcG9zaXRpb25Jbk5vZGVcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb2RlIHtcbiAgICBwcml2YXRlIHNjcmVlblNpemU6IG51bWJlciA9IDQwOyAvLyBUT0RPIGNhbGN1bGF0ZSBpdCBvbiBydW4gdGltZSBhbmQgYWRqdXN0IG9uIHNjcmVlbiBzaXplIGNoYW5nZVxuICAgIHB1YmxpYyBmaWxlTmFtZTogc3RyaW5nO1xuXG4gICAgLy9UT0RPIHNob3VsZCBjb2RlLnRzIGJlIGRpdmlkZWQgYnkgdHlwZSBvZiBmaWxlIGxpa2UgY3Vyc29yIG9yIG5vP1xuICAgIC8vIG1heSBiZSBmb3IgdGV4dCBmaWxlIHdlIGRvbid0IG5lZWQgdG8gZ2VuZXJhdGUgc3BhbiB0YWcgZm9yIGVhY2ggd29ybGQ/XG5cbiAgICAvL1RPRE8gdGFiaW5kZXggc2hvdWxkIGJlIHVuaXEgaW4gZmlsZSBhbmQgc2hvdWxkIG5vdCBiZSByZXVzaW5nXG4gICAgY29uc3RydWN0b3IoZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmZpbGVOYW1lID0gJy8nICsgZmlsZU5hbWUuc3BsaXQoJy8nKS5zbGljZSgzKS5qb2luKCcvJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVOZXdMaW5lKDEpKTtcbiAgICB9XG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIHByaXZhdGUgY3JlYXRlTmV3TGluZSh0YWJJbmRleCA9IDEsIHRleHQgPSAnJykge1xuICAgICAgICBsZXQgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXZFbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCB0YWJJbmRleC50b1N0cmluZygpKTtcbiAgICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnY29udGVudC1saW5lJztcbiAgICAgICAgbGV0IHNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBkaXZFbGVtZW50LmFwcGVuZENoaWxkKHNwYW5FbGVtZW50KTtcbiAgICAgICAgc3BhbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpO1xuICAgICAgICByZXR1cm4gZGl2RWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHB1dE5ld0xpbmVBZnRlcihub2RlOiBIVE1MRWxlbWVudCwgdGV4dCA9ICcnKSB7XG4gICAgICAgIGxldCBuZXdMaW5lID0gdGhpcy5jcmVhdGVOZXdMaW5lKDEsIHRleHQpO1xuICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQuYWZ0ZXIobmV3TGluZSk7XG4gICAgICAgIHJldHVybiBuZXdMaW5lO1xuICAgIH1cblxuICAgIC8vIG5vaW5zcGVjdGlvbiBKU01ldGhvZENhbkJlU3RhdGljXG4gICAgcHJpdmF0ZSBnZXRGaXJzdExpbmUoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgZmlyc3RMaW5lID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbnRlbnQtbGluZScpLml0ZW0oMCk7XG4gICAgICAgIGZpcnN0TGluZS5mb2N1cygpO1xuICAgICAgICByZXR1cm4gZmlyc3RMaW5lO1xuICAgIH1cblxuICAgIGdldExpbmVCeU51bWJlcihuOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdGFiSW5kZXg9XCInICsgbi50b1N0cmluZygpICsgJ1wiXScpO1xuICAgIH1cblxuICAgIC8vIG5vaW5zcGVjdGlvbiBKU01ldGhvZENhbkJlU3RhdGljXG4gICAgZ2V0Tm9kZUJ5UG9zaXRpb24obGluZTogSFRNTEVsZW1lbnQsIHBvc2l0aW9uSW5MaW5lOiBudW1iZXIpOiBQb3NpdGlvbkluTm9kZSB7XG4gICAgICAgIGxldCBicmVha0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgbGV0IG5ld0xpbmVQb3NpdGlvbiA9IDA7XG4gICAgICAgIGxldCBuZXdQb3NpdGlvbkluTm9kZSA9IDA7XG4gICAgICAgIGxldCBuZXdOb2RlID0gbGluZS5maXJzdENoaWxkO1xuXG4gICAgICAgIGZvciAobGV0IGVsIG9mIGxpbmUuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgbmV3TGluZVBvc2l0aW9uICs9IGVsLnRleHRDb250ZW50Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChuZXdMaW5lUG9zaXRpb24gPj0gcG9zaXRpb25JbkxpbmUgKyAxKSB7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IGVsO1xuICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uSW5Ob2RlID0gZWwudGV4dENvbnRlbnQubGVuZ3RoIC0gKG5ld0xpbmVQb3NpdGlvbiAtIHBvc2l0aW9uSW5MaW5lKTtcbiAgICAgICAgICAgICAgICBicmVha0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghYnJlYWtGbGFnKSB7XG4gICAgICAgICAgICBuZXdOb2RlID0gbGluZS5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBuZXdQb3NpdGlvbkluTm9kZSA9IG5ld05vZGUudGV4dENvbnRlbnQubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBvc2l0aW9uSW5Ob2RlKDxIVE1MRWxlbWVudD5uZXdOb2RlLCBuZXdQb3NpdGlvbkluTm9kZSk7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIEpTTWV0aG9kQ2FuQmVTdGF0aWNcbiAgICBwcml2YXRlIHJlY2FsY3VsYXRlVGFiSW5kZXgobGluZTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgbGV0IHRhYkluZGV4OiBudW1iZXIgPSBwYXJzZUludChsaW5lLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuZ2V0QXR0cmlidXRlKCd0YWJJbmRleCcpKSArIDE7XG4gICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCd0YWJJbmRleCcsIHRhYkluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICB3aGlsZSAobGluZS5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICAgIHRhYkluZGV4ICs9IDE7XG4gICAgICAgICAgICBsaW5lID0gPEhUTUxFbGVtZW50PmxpbmUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgdGFiSW5kZXgudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRGaXJzdEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50PnRoaXMuZ2V0Rmlyc3RMaW5lKCkuY2hpbGROb2Rlcy5pdGVtKDApO1xuICAgIH1cblxuICAgIC8vIG5vaW5zcGVjdGlvbiBKU01ldGhvZENhbkJlU3RhdGljXG4gICAgZ2V0Rmlyc3RFbGVtZW50T25MaW5lQnlOb2RlKG5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+bm9kZS5wYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIEpTTWV0aG9kQ2FuQmVTdGF0aWNcbiAgICBnZXRMYXN0RWxlbWVudE9uTGluZUJ5Tm9kZShub2RlOiBIVE1MRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50Pm5vZGUucGFyZW50RWxlbWVudC5sYXN0Q2hpbGQ7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIEpTTWV0aG9kQ2FuQmVTdGF0aWNcbiAgICBnZXRQcmV2aW91c0VsZW1lbnQobm9kZTogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGlmIChub2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+bm9kZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobm9kZS5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50Pm5vZGUucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIGdldE5leHRFbGVtZW50KG5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmIChub2RlLm5leHRFbGVtZW50U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIDxIVE1MRWxlbWVudD5ub2RlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxIVE1MRWxlbWVudD5ub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIGdldFBvc2l0aW9uSW5MaW5lKG5vZGU6IEhUTUxFbGVtZW50LCBwb3NpdGlvbkluTm9kZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IG9sZExpbmVQb3NpdGlvbiA9IDA7XG4gICAgICAgIGZvciAobGV0IGVsIG9mIG5vZGUucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoZWwgPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICBvbGRMaW5lUG9zaXRpb24gKz0gcG9zaXRpb25Jbk5vZGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbGRMaW5lUG9zaXRpb24gKz0gZWwudGV4dENvbnRlbnQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvbGRMaW5lUG9zaXRpb247XG4gICAgfVxuXG5cbiAgICBnZXRMaW5lTnVtYmVyKG5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0YWJJbmRleCcpO1xuICAgIH1cblxuICAgIGdldE92ZXJFbGVtZW50KG5vZGU6IEhUTUxFbGVtZW50LCBwb3NpdGlvbkluTGluZTogbnVtYmVyKTogUG9zaXRpb25Jbk5vZGUge1xuICAgICAgICBpZiAobm9kZS5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5vZGVCeVBvc2l0aW9uKDxIVE1MRWxlbWVudD5ub2RlLnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZywgcG9zaXRpb25JbkxpbmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQb3NpdGlvbkluTm9kZShudWxsLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFVuZGVyRWxlbWVudChub2RlOiBIVE1MRWxlbWVudCwgcG9zaXRpb25JbkxpbmU6IG51bWJlcikge1xuICAgICAgICBpZiAobm9kZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZUJ5UG9zaXRpb24oPEhUTUxFbGVtZW50Pm5vZGUucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcsIHBvc2l0aW9uSW5MaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9zaXRpb25Jbk5vZGUobnVsbCwgMClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBhZ2VVcChub2RlOiBIVE1MRWxlbWVudCwgcG9zaXRpb25JbkxpbmU6IG51bWJlcik6IFBvc2l0aW9uSW5Ob2RlIHtcbiAgICAgICAgbGV0IGNvZGVMaW5lID0gbm9kZS5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgd2hpbGUgKGNvZGVMaW5lLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICAgIGNvdW50ZXIgKz0gMTtcbiAgICAgICAgICAgIGNvZGVMaW5lID0gPEhUTUxFbGVtZW50PmNvZGVMaW5lLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoY291bnRlciA+PSB0aGlzLnNjcmVlblNpemUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXROb2RlQnlQb3NpdGlvbihjb2RlTGluZSwgcG9zaXRpb25JbkxpbmUpO1xuICAgIH1cblxuICAgIHBhZ2VEb3duKG5vZGU6IEhUTUxFbGVtZW50LCBwb3NpdGlvbkluTGluZTogbnVtYmVyKTogUG9zaXRpb25Jbk5vZGUge1xuICAgICAgICBsZXQgY29kZUxpbmUgPSBub2RlLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgICAgICB3aGlsZSAoY29kZUxpbmUubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgICBjb3VudGVyICs9IDE7XG4gICAgICAgICAgICBjb2RlTGluZSA9IDxIVE1MRWxlbWVudD5jb2RlTGluZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoY291bnRlciA+PSB0aGlzLnNjcmVlblNpemUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXROb2RlQnlQb3NpdGlvbihjb2RlTGluZSwgcG9zaXRpb25JbkxpbmUpO1xuICAgIH1cblxuXG4gICAgZGl2aWRlTGluZShub2RlOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IG5ld0xpbmUgPSB0aGlzLnB1dE5ld0xpbmVBZnRlcihub2RlKTtcbiAgICAgICAgbmV3TGluZS5sYXN0Q2hpbGQucmVwbGFjZVdpdGgobm9kZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG5vZGUucGFyZW50RWxlbWVudC5sYXN0Q2hpbGQpKTtcblxuICAgICAgICB3aGlsZSAobm9kZS5wYXJlbnRFbGVtZW50Lmxhc3RDaGlsZCkge1xuICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50RWxlbWVudC5sYXN0Q2hpbGQgPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICBuZXdMaW5lLmluc2VydEJlZm9yZShub2RlLnBhcmVudEVsZW1lbnQubGFzdENoaWxkLmNsb25lTm9kZSgpLCBuZXdMaW5lLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIG5ld0xpbmUuZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9IG5vZGUucGFyZW50RWxlbWVudC5sYXN0Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdMaW5lLmluc2VydEJlZm9yZShub2RlLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZS5wYXJlbnRFbGVtZW50Lmxhc3RDaGlsZCksIG5ld0xpbmUuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVRhYkluZGV4KG5ld0xpbmUpO1xuICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50Pm5ld0xpbmUuZmlyc3RDaGlsZDtcbiAgICB9XG5cbiAgICByZW1vdmVOb2RlKG5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCBlbGVtZW50VG9SZWNhbGN1bGF0ZUZyb20gPSBub2RlLnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyAhPT0gbnVsbCA/IG5vZGUucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIDogdGhpcy5nZXRGaXJzdExpbmUoKTtcbiAgICAgICAgaWYgKG5vZGUucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG5vZGUudGV4dENvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgJiYgbm9kZSA9PT0gbm9kZS5wYXJlbnRFbGVtZW50Lmxhc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobm9kZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5yZW1vdmVDaGlsZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5maXJzdENoaWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVRhYkluZGV4KDxIVE1MRWxlbWVudD5lbGVtZW50VG9SZWNhbGN1bGF0ZUZyb20pO1xuICAgIH1cblxuICAgIHJlcGxhY2VMaW5lKG46IG51bWJlciwgbGluZUVsZW1lbnRzOiBBcnJheTxzdHJpbmc+LCBjdXJzb3I6IFR4dEN1cnNvcikge1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuZ2V0TGluZUJ5TnVtYmVyKG4pO1xuICAgICAgICBsZXQgdG1wQ29udGFpbmVyOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0bXBDb250YWluZXIuaW5uZXJIVE1MID0gbGluZUVsZW1lbnRzLmpvaW4oJycpO1xuICAgICAgICBmb3IgKGxldCBvbGRFbCBvZiBsaW5lLmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICAgIGxldCBub2RlSWQgPSAoPEhUTUxFbGVtZW50Pm9sZEVsKS5nZXRBdHRyaWJ1dGUoJ25vZGVpZCcpO1xuICAgICAgICAgICAgaWYgKG5vZGVJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50c1RvUmVwbGFjZSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG5ld0VsIG9mIEFycmF5LmZyb20odG1wQ29udGFpbmVyLmNoaWxkTm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0YXJ0YXRhJywgbmV3RWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKDxIVE1MRWxlbWVudD5uZXdFbCkuZ2V0QXR0cmlidXRlKCdub2RlaWQnKSA9PT0gbm9kZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1RvUmVwbGFjZS5wdXNoKG5ld0VsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGF0IHRleHQgaXMgZXF1YWwgYW5kIGVsZW1lbnQgZG9lcyd0IGNoYW5nZSBmcm9tIHNlbmQgcmVxdWVzdFxuICAgICAgICAgICAgICAgIC8vIGlmIChlbGVtZW50c1RvUmVwbGFjZS5tYXAoeCA9PiB4LnRleHRDb250ZW50KS5qb2luKCcnKSA9PT0gb2xkRWwudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHNUb1JlcGxhY2UubWFwKHggPT4geC50ZXh0Q29udGVudCkuam9pbignJykgPT09IG9sZEVsLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVsIG9mIGVsZW1lbnRzVG9SZXBsYWNlLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDxIVE1MRWxlbWVudD5lbCkucmVtb3ZlQXR0cmlidXRlKCdub2RlaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEVsLmFmdGVyKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbGRFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZWxlbWVudCBjb250ZW50IGlzIGRpZmZlcmVudDp8JyArIGVsZW1lbnRzVG9SZXBsYWNlLm1hcCh4ID0+IHgudGV4dENvbnRlbnQpLmpvaW4oJycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICd8IHZzIHwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEVsLnRleHRDb250ZW50LCAnfCdcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbW1hbmRHZXRQYXJzZUxpbmVNc2coY29kZUxpbmU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFRPRE8gZG8gc2NoZW1hXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJsaW5lUGFyc2VcIixcbiAgICAgICAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgICAgICAgICAgXCJmaWxlTmFtZVwiOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIFwib3V0ZXJIVE1MXCI6IGNvZGVMaW5lLm91dGVySFRNTCxcbiAgICAgICAgICAgICAgICBcImxpbmVOdW1iZXJcIjogcGFyc2VJbnQoY29kZUxpbmUuZ2V0QXR0cmlidXRlKCd0YWJJbmRleCcpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW50ZXJmYWNlIEhhbmRsZXJzIHtcbiAgICBbaW5kZXg6IHN0cmluZ106IENhbGxhYmxlRnVuY3Rpb25cbn1cblxuZXhwb3J0IGxldCBoYW5kbGVyczogSGFuZGxlcnMgPSB7fTtcblxuZXhwb3J0IGNsYXNzIENvbW1hbmRIYW5kbGVycyB7XG5cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIHJlZ2lzdGVyQ29tbWFuZEhhbmRsZXIobXNnVHlwZTogc3RyaW5nLCBjYWxsYmFjazogQ2FsbGFibGVGdW5jdGlvbikge1xuICAgICAgICBoYW5kbGVyc1ttc2dUeXBlXSA9IGNhbGxiYWNrO1xuICAgIH1cbn0iLCJpbXBvcnQge2hhbmRsZXJzfSBmcm9tIFwiLi9jb21tYW5kXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kQnVzIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlcnZlclVybDogc3RyaW5nO1xuICAgIHByaXZhdGUgY29ubmVjdGlvbkF0dGVtcHRDb3VudGVyOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgc29ja2V0OiBXZWJTb2NrZXQ7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNlcnZlclVybCA9IHVybDtcbiAgICAgICAgdGhpcy5jcmVhdGVTb2NrZXQoKTtcbiAgICB9XG5cbiAgICBkZWJ1ZyguLi5hcmdzOiBBcnJheTxhbnk+KXtcbiAgICAgICAgY29uc29sZS5sb2coLi4uYXJncyk7XG4gICAgfVxuICAgIGNyZWF0ZVNvY2tldCgpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMuc2VydmVyVXJsKTtcbiAgICAgICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7dGhpcy5vbk1lc3NhZ2UoZXZlbnQpfTtcbiAgICAgICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4ge3RoaXMub25DbG9zZShldmVudCl9O1xuICAgICAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7dGhpcy5vbk9wZW4oKX07XG4gICAgICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXZWJTb2NrZXQgZXJyb3Igb2JzZXJ2ZWQ6XCIsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5kZWJ1ZyhcImNvbm5lY3RlZCB0bzpcIiwgdGhpcy5zZXJ2ZXJVcmwpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoZXZlbnQ6IENsb3NlRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50Lndhc0NsZWFuKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdDbGVhbiBjbG9zZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0Nvbm5lY3Rpb24gcmVzZXQgYnkgcGVlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVidWcoJ0Nvbm5lY3Rpb24gcmVzZXQsIGNvZGU9OicgKyBldmVudC5jb2RlICsgJywgcmVhc29uPScgKyBldmVudC5yZWFzb24sICdjb25uZWN0aW9uQXR0ZW1wdENvdW50ZXI9JywgdGhpcy5jb25uZWN0aW9uQXR0ZW1wdENvdW50ZXIpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uQXR0ZW1wdENvdW50ZXIgPiAxMCkge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnQ29ubmVjdGlvbiBhdHRlbXB0IHdhcyB0b28gbXVzaCwganVzdCBnaXZlIHVwOiAnLCB0aGlzLmNvbm5lY3Rpb25BdHRlbXB0Q291bnRlcik7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25BdHRlbXB0Q291bnRlciA9IDA7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gYXR0ZW1wdCB3YXMgdG9vIG11c2gsIGp1c3QgZ2l2ZSB1cCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkF0dGVtcHRDb3VudGVyICs9IDE7XG4gICAgICAgIHRoaXMuZGVidWcoJ0NyZWF0ZSBuZXcgY29ubmVjdGlvbicsIHRoaXMpO1xuICAgICAgICB0aGlzLnNvY2tldC5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZVNvY2tldCgpO1xuICAgIH1cblxuICAgIG9uTWVzc2FnZShtc2c6IE1lc3NhZ2VFdmVudCkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25BdHRlbXB0Q291bnRlciA9IDA7XG4gICAgICAgIGxldCBtZXNzYWdlID0gSlNPTi5wYXJzZShtc2cuZGF0YSk7XG4gICAgICAgIHRoaXMuZGVidWcoJ3JlY2VpdmVkOicsIG1lc3NhZ2UsIG1lc3NhZ2UudHlwZSwgKHR5cGVvZiBtZXNzYWdlKSwgaGFuZGxlcnMpO1xuICAgICAgICBoYW5kbGVyc1ttZXNzYWdlLnR5cGVdKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHNlbmRDb21tYW5kKG1zZ1R5cGU6IHN0cmluZywgbXNnOiBzdHJpbmcpIHtcbiAgICAgICAgLy9UT0RPIHdoeSBjYW4ndCBnZXQgYnkgaGFuZGxlcnMubXNnVHlwZT9cbiAgICAgICAgaWYgKGhhbmRsZXJzW21zZ1R5cGVdKSB7XG4gICAgICAgICAgICBpZiAoIHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuc2VuZChtc2cpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVidWcoJ3NlbmQ6JywgbXNnLCBtc2dUeXBlLCAodHlwZW9mIG1zZykpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Zygnc2VuZCBmYWlsZWQsIHNvY2tldCBpbiBzdGF0ZTogJywgdGhpcy5zb2NrZXQucmVhZHlTdGF0ZSwgbXNnLCBoYW5kbGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ01lc3NhZ2UgaGFuZGxlciBpcyBub3QgZm91bmQ6JywgaGFuZGxlcnMsIG1zZ1R5cGUsIGhhbmRsZXJzW21zZ1R5cGVdKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZSBoYW5kbGVyIGlzIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtMaW5lTnVtYmVyfSBmcm9tICcuL2xpbmUtbnVtYmVyJztcbmltcG9ydCB7UHlBdXRvY29tcGxldGV9IGZyb20gJy4vYXV0b2NvbXBsZXRlL3B5LWF1dG9jb21wbGV0ZSc7XG5pbXBvcnQge1R4dEF1dG9jb21wbGV0ZX0gZnJvbSBcIi4vYXV0b2NvbXBsZXRlL3R4dC1hdXRvY29tcGxldGVcIjtcbmltcG9ydCB7RmlsZUxpc3Rpbmd9IGZyb20gJy4vZmlsZS1saXN0aW5nJztcbmltcG9ydCB7VHh0Q3Vyc29yfSBmcm9tICcuL2N1cnNvcnMvdHh0LWN1cnNvcic7XG5pbXBvcnQge1B5Q3Vyc29yfSBmcm9tICcuL2N1cnNvcnMvcHktY3Vyc29yJztcbmltcG9ydCB7VGFnc30gZnJvbSAnLi90YWdzL3RhZ3MnO1xuaW1wb3J0IHtDb2RlfSBmcm9tICcuL2NvZGUnO1xuaW1wb3J0IHtDb21tYW5kQnVzfSBmcm9tICcuL2NvbW1hbmQtYnVzJztcbmltcG9ydCB7Q29tbWFuZEhhbmRsZXJzfSBmcm9tICcuL2NvbW1hbmQnO1xuXG5cbmludGVyZmFjZSBLZXlDb2RlcyB7XG4gICAgW2luZGV4OiBzdHJpbmddOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgTGluZVBhcnNlIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgZGF0YToge1xuICAgICAgICBsaW5lTnVtYmVyOiBudW1iZXI7XG4gICAgICAgIGxpbmVFbGVtZW50czogQXJyYXk8c3RyaW5nPjtcbiAgICAgICAgZmlsZU5hbWU6IHN0cmluZztcbiAgICB9XG59XG5cbmludGVyZmFjZSBBdXRvY29tcGxldGVTaG93IHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgZGF0YToge1xuICAgICAgICBsaW5lTnVtYmVyOiBudW1iZXI7XG4gICAgICAgIHZhcmlhbnRzOiBBcnJheTxzdHJpbmc+O1xuICAgICAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgICAgICBsaW5lVGV4dDogc3RyaW5nO1xuICAgICAgICBwb3NpdGlvbkluTGluZTogbnVtYmVyXG4gICAgICAgIHJlc3VsdDogQXJyYXk8c3RyaW5nPjtcbiAgICAgICAgcHJlZml4OiBBcnJheTxzdHJpbmc+O1xuICAgIH1cbn1cblxuY2xhc3MgTWFpbiBleHRlbmRzIENvbW1hbmRIYW5kbGVycyB7XG4gICAgcHVibGljIGNvZGU6IENvZGU7XG4gICAgcHVibGljIGN1cnNvcjogVHh0Q3Vyc29yO1xuICAgIHB1YmxpYyB0YWdzOiBUYWdzO1xuICAgIHB1YmxpYyBmaWxlTGlzdGluZzogRmlsZUxpc3Rpbmc7XG4gICAgcHVibGljIGF1dG9Db21wbGV0ZTogVHh0QXV0b2NvbXBsZXRlO1xuICAgIHB1YmxpYyBsaW5lTnVtYmVyOiBMaW5lTnVtYmVyO1xuICAgIHB1YmxpYyBwcmVzc2VkS2V5czogS2V5Q29kZXM7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXM7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy9UT0RPIGNoYW5nZSBmaXJlZm94LT4gYWJvdXQ6Y29uZmlnICAtPiBuZXR3b3JrLndlYnNvY2tldC5hbGxvd0luc2VjdXJlRnJvbUhUVFBTIHRvIGZhbHNlXG4gICAgICAgIHRoaXMuc2VydmVyVXJsID0gXCJ3czovL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyBcIi9zZXJ2ZXIvY29tbWFuZFwiO1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNldEtleUJvYXJkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHNlbGYuc2V0TW91c2VFdmVudExpc3RlbmVycygpO1xuICAgICAgICAgICAgc2VsZi5jb2RlID0gbmV3IENvZGUoJycpO1xuXG4gICAgICAgICAgICBzZWxmLnRhZ3MgPSBuZXcgVGFncygpO1xuXG4gICAgICAgICAgICBzZWxmLmZpbGVMaXN0aW5nID0gbmV3IEZpbGVMaXN0aW5nKHNlbGYuY29kZSk7XG5cbiAgICAgICAgICAgIHNlbGYuYXV0b0NvbXBsZXRlID0gbmV3IFR4dEF1dG9jb21wbGV0ZSgpO1xuXG4gICAgICAgICAgICBzZWxmLmxpbmVOdW1iZXIgPSBuZXcgTGluZU51bWJlcigxKTtcblxuICAgICAgICAgICAgc2VsZi5jdXJzb3IgPSBuZXcgVHh0Q3Vyc29yKHNlbGYuY29kZSwgc2VsZi5saW5lTnVtYmVyKTtcblxuICAgICAgICAgICAgc2VsZi5wcmVzc2VkS2V5cyA9IHt9O1xuICAgICAgICAgICAgc2VsZi5jb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoc2VsZi5zZXJ2ZXJVcmwpO1xuXG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyQ29tbWFuZEhhbmRsZXIoXCJsaW5lUGFyc2VcIiwgKHg6IExpbmVQYXJzZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlckxpbmVQYXJzZSh4KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyQ29tbWFuZEhhbmRsZXIoXCJhdXRvQ29tcGxldGVTaG93XCIsICh4OiBBdXRvY29tcGxldGVTaG93KSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVyQXV0b2NvbXBsZXRlU2hvdyh4KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaGFuZGxlckxpbmVQYXJzZShqc29uRGF0YTogTGluZVBhcnNlKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdqc29uRGF0YS5kYXRhLmZpbGVOYW1lJywganNvbkRhdGEuZGF0YSwganNvbkRhdGEuZGF0YS5maWxlTmFtZSk7XG4gICAgICAgIGlmICh0aGlzLmNvZGUuZmlsZU5hbWUgIT09IGpzb25EYXRhLmRhdGEuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluZSA9IHRoaXMuY29kZS5nZXRMaW5lQnlOdW1iZXIoanNvbkRhdGEuZGF0YS5saW5lTnVtYmVyKTtcbiAgICAgICAgbGV0IGN1cnJlbnRMaW5lTnVtYmVyID0gdGhpcy5jdXJzb3IuZ2V0TGluZU51bWJlcigpO1xuICAgICAgICBsZXQgb2xkUG9zaXRpb24gPSB0aGlzLmNvZGUuZ2V0UG9zaXRpb25JbkxpbmUodGhpcy5jdXJzb3IuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5jdXJzb3IuZ2V0UG9zaXRpb25Jbk5vZGUoKSk7XG5cbiAgICAgICAgdGhpcy5jb2RlLnJlcGxhY2VMaW5lKGpzb25EYXRhLmRhdGEubGluZU51bWJlciwganNvbkRhdGEuZGF0YS5saW5lRWxlbWVudHMsIHRoaXMuY3Vyc29yKTtcbiAgICAgICAgLy8gVE9ETyBpbiBjYXNlIGxpbmUgcmVtb3ZhbCB0YWJJbmRleCB3aWxsIGJlIHRoZSBzYW1lIG9uIGFub3RoZXIgbGluZVxuICAgICAgICBpZiAocGFyc2VJbnQoY3VycmVudExpbmVOdW1iZXIpID09PSBqc29uRGF0YS5kYXRhLmxpbmVOdW1iZXIpIHtcbiAgICAgICAgICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuY29kZS5nZXROb2RlQnlQb3NpdGlvbihsaW5lLCBvbGRQb3NpdGlvbik7XG4gICAgICAgICAgICB0aGlzLmN1cnNvci5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKG5ld1Bvc2l0aW9uLm5vZGUsIG5ld1Bvc2l0aW9uLnBvc2l0aW9uSW5Ob2RlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZXJBdXRvY29tcGxldGVTaG93KGpzb25EYXRhOiBBdXRvY29tcGxldGVTaG93KSB7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlLnJlZmlsbChqc29uRGF0YS5kYXRhLnJlc3VsdCk7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlLnNob3codGhpcy5jdXJzb3IuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMubGluZU51bWJlci5nZXRCeU51bWJlcihqc29uRGF0YS5kYXRhLmxpbmVOdW1iZXIpKTtcbiAgICB9XG5cbiAgICBzZXRLZXlCb2FyZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYucHJlc3NlZEtleXNbZXZlbnQuY29kZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgc2VsZi5wcmVzc2VkS2V5c1tldmVudC5jb2RlXSA9IHRydWU7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY29kZScsIGV2ZW50LmNvZGUpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5hZGROZXdSb3coKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnVGFiJykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF1dG9Db21wbGV0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucHV0U3RyaW5nKHNlbGYuYXV0b0NvbXBsZXRlLmdldFN5bWJvbHMoc2VsZi5jdXJzb3IuZ2V0UG9zaXRpb25Jbk5vZGUoKSkpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucHV0VGFiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF1dG9Db21wbGV0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdXRvQ29tcGxldGUuaGxQcmV2KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IubW92ZVVwUm93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYXV0b0NvbXBsZXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5obE5leHQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5tb3ZlRG93blJvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucHV0U3ltYm9sKGV2ZW50LmtleSk7XG4gICAgICAgICAgICAgICAgc2VsZi5hdXRvQ29tcGxldGUuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdQYWdlVXAnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucGFnZVVwKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1BhZ2VEb3duJykge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLnBhZ2VEb3duKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0VuZCcpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5tb3ZlRW5kKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0hvbWUnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IubW92ZUhvbWUoKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLm1vdmVMZWZ0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IubW92ZVJpZ2h0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1NoaWZ0TGVmdCcpIHtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0NvbnRyb2xMZWZ0Jykge1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQWx0TGVmdCcpIHtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Y1Jykge1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQmFja3NwYWNlJykge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLmRlbGV0ZVN5bWJvbEJlZm9yZSgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdEZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IuZGVsZXRlU3ltYm9sVW5kZXIoKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5wdXRTeW1ib2woZXZlbnQua2V5KTtcbiAgICAgICAgICAgICAgICBzZWxmLmNvbW1hbmRCdXMuc2VuZENvbW1hbmQoJ2F1dG9Db21wbGV0ZVNob3cnLFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5jb21tYW5kR2V0QXV0b2NvbXBsZXRlU2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgIDxIVE1MRWxlbWVudD5ldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUuZ2V0UG9zaXRpb25JbkxpbmUoc2VsZi5jdXJzb3IuY3Vyc29yUGFyZW50RWxlbWVudCwgc2VsZi5jdXJzb3IuZ2V0UG9zaXRpb25Jbk5vZGUoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUuZmlsZU5hbWVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5jb21tYW5kQnVzLnNlbmRDb21tYW5kKCdsaW5lUGFyc2UnLCBzZWxmLmNvZGUuY29tbWFuZEdldFBhcnNlTGluZU1zZyg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc2V0TW91c2VFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29kZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLmN1cnNvci5zZXRCeUNsaWNrKCk7XG4gICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5oaWRlKCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5wcmVzc2VkS2V5c1snQ29udHJvbExlZnQnXSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLmdvVG9EZWZpbml0aW9uKHNlbGYuZmlsZUxpc3RpbmcuY3VyZW50RmlsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlbGlzdGluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQ6IEhUTUxFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2ZpbGVsaW5rJykge1xuXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVDb3VudCA9IHNlbGYuZmlsZUxpc3Rpbmcuc2hvd0ZpbGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBjb3VudCBtdWx0aSBsaW5lIHN0cmluZyBsaWtlICcnJyAnJydcbiAgICAgICAgICAgICAgICBzZWxmLmxpbmVOdW1iZXIuYWRqdXN0KGxpbmVDb3VudCk7XG4gICAgICAgICAgICAgICAgLy8gdGFncy5pbml0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKCcucHknKSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUgPSBuZXcgQ29kZShmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yID0gbmV3IFB5Q3Vyc29yKHNlbGYuY29kZSwgc2VsZi5saW5lTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdXRvQ29tcGxldGUgPSBuZXcgUHlBdXRvY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUgPSBuZXcgQ29kZShmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yID0gbmV3IFR4dEN1cnNvcihzZWxmLmNvZGUsIHNlbGYubGluZU51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXV0b0NvbXBsZXRlID0gbmV3IFR4dEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID09PSAnZm9sZGVybGluaycpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmZpbGVMaXN0aW5nLmdldChldmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxubmV3IE1haW4oKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=