!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class o{constructor(e){for(let t=1;t<=e;t++){let e=document.createElement("div");e.className="line-number",e.textContent=String(t),document.getElementById("line-number").appendChild(e)}}adjust(e){let t=parseInt(document.getElementById("line-number").lastChild.textContent);for(let n=t+1;n<=t+Math.abs(t-e);n++)if(e>t){let e=document.createElement("div");e.className="line-number",e.textContent=String(n),document.getElementById("line-number").appendChild(e)}else document.getElementById("line-number").removeChild(document.getElementById("line-number").lastElementChild)}getByNumber(e){return document.getElementsByClassName("line-number").item(e)}addNumber(){let e=document.createElement("div");e.className="line-number",e.textContent=(document.getElementsByClassName("line-number").length+1).toString(),document.getElementById("line-number").appendChild(e)}}class i{constructor(){this.autoCompleteElement=null,this.activeVariant=0,this.createAutocompleteElement([]),this.active=!1}commandGetAutocompleteShow(e,t,n){return JSON.stringify({type:"autoCompleteShow",data:{fileName:n,lineText:e.textContent,positionInLine:t,lineNumber:parseInt(e.getAttribute("tabIndex"))}})}createAutocompleteElement(e){!0===this.active&&this.hide(),this.active=!0,this.autoCompleteElement=document.createElement("div"),this.autoCompleteElement.className="autocomplete",this.refill(e)}refill(e){for(;this.autoCompleteElement.firstChild;)this.autoCompleteElement.removeChild(this.autoCompleteElement.firstChild);for(let t of e){let e=document.createElement("div");e.textContent=t,this.autoCompleteElement.appendChild(e)}}show(e,t){this.active=!0,this.autoCompleteElement.style.top=e.bottom.toString()+"px",this.autoCompleteElement.style.left=e.left.toString()+"px",t.appendChild(this.autoCompleteElement)}getSymbols(e){return this.autoCompleteElement.childNodes.item(this.activeVariant).textContent.slice(e)}hide(){this.active&&(this.active=!1,this.autoCompleteElement.remove(),this.activeVariant=0)}hlNext(){if(this.activeVariant!==this.autoCompleteElement.childNodes.length&&(this.autoCompleteElement.childNodes.item(this.activeVariant).removeAttribute("id"),this.activeVariant+=1,this.active)){this.autoCompleteElement.childNodes.item(this.activeVariant).setAttribute("id","active-autocomplete")}}hlPrev(){if(0!==this.activeVariant&&(this.autoCompleteElement.childNodes.item(this.activeVariant).removeAttribute("id"),this.activeVariant-=1,this.active)){this.autoCompleteElement.childNodes.item(this.activeVariant).setAttribute("id","active-autocomplete")}}}class r extends i{constructor(){super()}}class s{constructor(e){this.curentFile="",this.curentFile="",this.code=e,$.ajax({method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:"/server/filelisting"}).done(function(e){e.forEach(function(e){let t=$(e)[0];const n=document.getElementById("filelisting");n?n.appendChild(t):console.log("нет елемента filelisting")})}).fail(function(e,t){console.log("все сломалось в folder listing",e,t)})}get(e){const t=e.target;if(!t)return void console.log("event.target is empty in folder listing get");let n=t.parentNode;if(!n)return void console.log("event.target.parentNode is empty in folder listing get");const o=n.childNodes[0];if(n&&"rotate(180deg)"===o.style.transform){o.style.transform="rotate(90deg)";for(let e=n.childNodes.length-1;e>=0;e--)["folderlink","filelink"].includes(n.childNodes[e].className)&&n.removeChild(n.childNodes[e])}else"rotate(90deg)"===o.style.transform?(o.style.transform="rotate(180deg)",$.ajax({method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:e.target.href}).done(function(e){e.forEach(function(e){$(n).append($(e));let t=$(e)[0];document.getElementById("filelisting").appendChild(t)})}).fail(function(e,t){console.log("все сломалось в folder listing",e,t)})):o.style.transform="rotate(90deg)";e.preventDefault(),e.stopPropagation()}showFile(e){let t,n=this;return $.ajax({async:!1,method:"GET",url:e.target.attributes.href.value,dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(o){Array.from(document.getElementById("code").children).forEach(function(e){e.remove()}),o.forEach(function(e){document.getElementById("code").appendChild($(e)[0])}),n.curentFile=e.target.attributes.href.value,t=o.length}).fail(function(e,t){console.log("все сломалось в get CODE",e,t)}),t}}class l{constructor(e,t){this._cursorParentElement=null,this.position=null,this.cursorHighlightElement=null,this.code=e,this.lineNumber=t,this.createCursorHTMLElement(),this.createCursorHightlightElement();let n=this.code.getFirstElement();this.cursorParentElement=n,this.cursorParentElement.appendChild(this.cursorElement),this.cursorParentElement.appendChild(document.createTextNode("")),this.putCursorByPositionInNode(n,0),""===n.textContent&&(this.cursorText="\n")}createCursorHightlightElement(){this.cursorHighlightElement=document.createElement("div"),this.cursorHighlightElement.id="cursorHighlightElement",this.cursorHighlightElement.style.width="3px",this.cursorHighlightElement.style.height="18px",this.cursorHighlightElement.style.background="black"}createCursorHTMLElement(e=""){this.cursorElement=document.createElement("span"),this.cursorElement.className="cursor",this.cursorText=e}putCursorByPositionInNode(e,t){if(null===e)return void console.log("null element in putCursorByPositionInNode");if(this.cursorParentElement!==e){this.cursorParentElement=null;let n=e.textContent;this.cursorParentElement=e;let o=this.cursorParentElement.childNodes;1!==o.length&&console.log("childNodes.length:=",o.length);let i=o.item(0).splitText(t);this.cursorText=this.cursorParentElement.textContent.slice(t,t+1),i.textContent=n.slice(t+1),i.before(this.cursorElement)}else if(t!==this.getPositionInNode()){let e="",n="",o="";e=this.cursorParentElement.textContent.slice(0,t),n=this.cursorParentElement.textContent.slice(t,t+1),o=this.cursorParentElement.textContent.slice(t+1),this.cursorElement.previousSibling.textContent=e,this.cursorText=n,this.cursorElement.nextSibling.textContent=o}else console.log("Put cursor in same position.");let n=this.lineNumber.getByNumber(parseInt(e.parentElement.getAttribute("tabIndex"))-1),o=n.getBoundingClientRect(),i=this.cursorElement.getBoundingClientRect();this.cursorHighlightElement.style.top=(i.top-o.top).toString()+"px",this.cursorHighlightElement.style.left=(i.left-o.left-3).toString()+"px",n.appendChild(this.cursorHighlightElement),this.scrollIntoView()}getCoordinate(){return this.cursorElement.getBoundingClientRect()}getPositionInNode(){return this.cursorElement.previousSibling.textContent.length}resetLinePosition(){this.position=null}setLinePosition(){null===this.position&&(this.position=this.code.getPositionInLine(this.cursorParentElement,this.getPositionInNode()))}getLineNumber(){return this.code.getLineNumber(this.cursorParentElement)}scrollIntoView(){this.cursorElement.scrollIntoView({block:"nearest",inline:"nearest"})}set cursorParentElement(e){null===e?(this.cursorElement.replaceWith(this.cursorText),this.cursorParentElement.normalize(),this._cursorParentElement=null,this.cursorText=""):(e.setAttribute("nodeid",Math.floor(1e9*Math.random()+1).toString()),this._cursorParentElement=e)}get cursorParentElement(){return this._cursorParentElement}set cursorText(e){this.cursorElement.textContent=e}get cursorText(){return this.cursorElement.textContent}putSymbol(e){this.cursorElement.previousSibling.textContent+=e,this.putCursorByPositionInNode(this.cursorParentElement,this.getPositionInNode()),this.resetLinePosition()}moveLeft(){if(""!==this.cursorElement.previousSibling.textContent)this.putCursorByPositionInNode(this.cursorParentElement,this.getPositionInNode()-1);else if(""===this.cursorElement.previousSibling.textContent){let e=this.code.getPreviousElement(this.cursorParentElement);if(null===e)return;this.putCursorByPositionInNode(e,e.textContent.length-1)}this.resetLinePosition()}moveRight(){if(""!==this.cursorElement.nextSibling.textContent)this.putCursorByPositionInNode(this.cursorParentElement,this.getPositionInNode()+1);else if(""===this.cursorElement.nextSibling.textContent){let e=this.code.getNextElement(this.cursorParentElement);if(null===e)return;this.putCursorByPositionInNode(e,0)}this.resetLinePosition()}moveUpRow(){this.setLinePosition();let e=this.code.getOverElement(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}moveDownRow(){this.setLinePosition();let e=this.code.getUnderElement(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}pageDown(){this.setLinePosition();let e=this.code.pageDown(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}pageUp(){this.setLinePosition();let e=this.code.pageUp(this.cursorParentElement,this.position);this.putCursorByPositionInNode(e.node,e.positionInNode)}moveHome(){this.putCursorByPositionInNode(this.code.getFirstElementOnLineByNode(this.cursorParentElement),0),this.resetLinePosition()}moveEnd(){let e=this.code.getLastElementOnLineByNode(this.cursorParentElement);this.putCursorByPositionInNode(e,e.textContent.length-1),this.resetLinePosition()}deleteSymbolUnder(){if(this.moveRight(),0!==this.getPositionInNode())this.cursorElement.previousSibling.textContent=this.cursorElement.previousSibling.textContent.slice(0,this.getPositionInNode()-1);else{let e=this.code.getPreviousElement(this.cursorParentElement);e.textContent=e.textContent.slice(0,e.textContent.length-1),0===e.textContent.length&&this.code.removeNode(e)}}deleteSymbolBefore(){this.moveLeft(),this.deleteSymbolUnder()}setByClick(){let e=window.getSelection();console.log("selObj",e,e.getRangeAt(0),e.getRangeAt(0),"|"+e.toString()+"|");let t=e.anchorNode;if(t.nodeType!==Node.TEXT_NODE)return void console.log("selected node is not text type");let n=t.parentElement;"cursor"===t.parentElement.className&&(n=n.parentElement),this.putCursorByPositionInNode(n,e.anchorOffset),this.resetLinePosition()}addNewRow(){let e=this.code.divideLine(this.cursorParentElement),t=this.getPositionInNode();this.moveLeft(),""!==this.cursorElement.nextSibling.textContent&&(this.cursorElement.nextSibling.textContent="\n"),e.textContent=e.textContent.slice(t),this.putCursorByPositionInNode(e,0),this.cursorElement.previousSibling.textContent=""}goToDefinition(e){}putTab(){this.putSymbol("\t")}putString(e){for(let t of e)this.putSymbol(t)}}class u extends l{constructor(e,t){super(e,t)}putTab(){this.putSymbol(" "),this.putSymbol(" "),this.putSymbol(" "),this.putSymbol(" ")}}class a{constructor(){}init(e){$.ajax({method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:e.target.href.replace(/:31415\/server\/code/,":31415/server/tags")}).done(function(e){const t=document.getElementById("tags");if(t)for(let e=t.childNodes.length-1;e>=0;e--)t.removeChild(t.childNodes[e]);else console.log("parentDiv is empty in  tags listing");e.forEach(function(e){const t=document.getElementById("tags");t?t.appendChild($(e)[0]):console.log("tags is empty in  tags listing")})}).fail(function(e,t){console.log("все сломалось в tags listing",e,t)})}}class c{constructor(e,t){this.node=e,this.positionInNode=t}}class d{constructor(e,t){this.screenSize=40,this.fileName="/"+e.split("/").slice(3).join("/"),this.lineNumber=t,document.getElementById("code").appendChild(this.createNewLine(1))}createNewLine(e=1,t=""){let n=document.createElement("div");n.setAttribute("tabIndex",e.toString()),n.className="content-line";let o=document.createElement("span");return n.appendChild(o),o.appendChild(document.createTextNode(t)),n}putNewLineAfter(e,t=""){let n=this.createNewLine(1,t);return e.parentElement.after(n),this.lineNumber.addNumber(),n}getFirstLine(){let e=document.getElementsByClassName("content-line").item(0);return e.focus(),e}getLineByNumber(e){return document.querySelector('[tabIndex="'+e.toString()+'"]')}getNodeByPosition(e,t){let n=!1,o=0,i=0,r=e.firstChild;for(let s of e.childNodes)if((o+=s.textContent.length)>=t+1){r=s,i=s.textContent.length-(o-t),n=!0;break}return n||(i=(r=e.lastChild).textContent.length-1),new c(r,i)}recalculateTabIndex(e){let t=parseInt(e.previousElementSibling.getAttribute("tabIndex"))+1;for(e.setAttribute("tabIndex",t.toString());e.nextElementSibling;)t+=1,(e=e.nextElementSibling).setAttribute("tabIndex",t.toString())}getFirstElement(){return this.getFirstLine().childNodes.item(0)}getFirstElementOnLineByNode(e){return e.parentElement.firstChild}getLastElementOnLineByNode(e){return e.parentElement.lastChild}getPreviousElement(e){return null!==e.previousElementSibling?e.previousElementSibling:null!==e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastChild:null}getNextElement(e){return null!==e.nextElementSibling?e.nextElementSibling:null!==e.parentElement.nextElementSibling?e.parentElement.nextElementSibling.firstChild:null}getPositionInLine(e,t){let n=0;for(let o of e.parentElement.childNodes){if(o===e){n+=t;break}n+=o.textContent.length}return n}getLineNumber(e){return e.parentElement.getAttribute("tabIndex")}getOverElement(e,t){return null!==e.parentElement.previousElementSibling?this.getNodeByPosition(e.parentElement.previousElementSibling,t):new c(null,0)}getUnderElement(e,t){return null!==e.parentElement.nextElementSibling?this.getNodeByPosition(e.parentElement.nextElementSibling,t):new c(null,0)}pageUp(e,t){let n=e.parentElement,o=0;for(;n.previousElementSibling&&(o+=1,n=n.previousElementSibling,!(o>=this.screenSize)););return this.getNodeByPosition(n,t)}pageDown(e,t){let n=e.parentElement,o=0;for(;n.nextElementSibling&&(o+=1,n=n.nextElementSibling,!(o>=this.screenSize)););return this.getNodeByPosition(n,t)}divideLine(e){let t=this.putNewLineAfter(e);for(t.lastChild.replaceWith(e.cloneNode()),t.lastChild.textContent=e.textContent;e.nextElementSibling;)t.appendChild(e.nextElementSibling),e=e.nextElementSibling;return this.recalculateTabIndex(t),t.firstChild}removeNode(e){let t=null!==e.parentElement.previousElementSibling?e.parentElement.previousElementSibling:this.getFirstLine();if(1===e.parentElement.childNodes.length)e.parentElement.remove();else{if(""===e.textContent&&e.parentElement.nextElementSibling&&e===e.parentElement.lastChild){for(;e.parentElement.nextElementSibling.firstChild;)e.parentElement.appendChild(e.parentElement.nextElementSibling.removeChild(e.parentElement.nextElementSibling.firstChild));e.parentElement.nextElementSibling.remove()}e.remove()}this.recalculateTabIndex(t)}replaceLine(e,t,n){let o=this.getLineByNumber(e),i=document.createElement("div");i.innerHTML=t.join("");for(let e of o.childNodes){let t=e.getAttribute("nodeid");if(null!==t){let n=[];for(let e of Array.from(i.childNodes))e.getAttribute("nodeid")===t&&n.push(e);if(n.map(e=>e.textContent).join("")===e.textContent){for(let t of n.reverse())t.removeAttribute("nodeid"),e.after(t);e.remove()}else console.log("element content is different:|"+n.map(e=>e.textContent).join("")+"| vs |"+e.textContent,"|")}}}commandGetParseLineMsg(e){return JSON.stringify({type:"lineParse",data:{fileName:this.fileName,outerHTML:e.outerHTML,lineNumber:parseInt(e.getAttribute("tabIndex"))}})}}let m={};class h{constructor(){}registerCommandHandler(e,t){m[e]=t}}class p{constructor(e){this.connectionAttemptCounter=0,this.serverUrl=e,this.createSocket()}debug(...e){console.log(...e)}createSocket(){this.socket=new WebSocket(this.serverUrl),this.socket.onmessage=(e=>{this.onMessage(e)}),this.socket.onclose=(e=>{this.onClose(e)}),this.socket.onopen=(()=>{this.onOpen()}),this.socket.onerror=(e=>{console.error("WebSocket error observed:",e)})}onOpen(){this.debug("connected to:",this.serverUrl)}onClose(e){if(e.wasClean?this.debug("Clean closed"):this.debug("Connection reset by peer"),this.debug("Connection reset, code=:"+e.code+", reason="+e.reason,"connectionAttemptCounter=",this.connectionAttemptCounter),this.connectionAttemptCounter>10)throw this.debug("Connection attempt was too mush, just give up: ",this.connectionAttemptCounter),this.connectionAttemptCounter=0,new Error("Connection attempt was too mush, just give up");this.connectionAttemptCounter+=1,this.debug("Create new connection",this),this.socket.close(),this.createSocket()}onMessage(e){this.connectionAttemptCounter=0;let t=JSON.parse(e.data);this.debug("received:",t,t.type,typeof t,m),m[t.type](t)}sendCommand(e,t){if(!m[e])throw this.debug("Message handler is not found:",m,e,m[e]),new Error("Message handler is not found");this.socket.readyState===WebSocket.OPEN?(this.socket.send(t),this.debug("send:",t,e,typeof t)):(this.debug("send failed, socket in state: ",this.socket.readyState,t,m),this.createSocket())}}new class extends h{constructor(){super(),this.serverUrl="ws://"+window.location.host+"/server/command";let e=this;document.addEventListener("DOMContentLoaded",function(){e.setKeyBoardEventListeners(),e.setMouseEventListeners(),e.lineNumber=new o(1),e.code=new d("",e.lineNumber),e.tags=new a,e.fileListing=new s(e.code),e.autoComplete=new i,e.cursor=new l(e.code,e.lineNumber),e.pressedKeys={},e.commandBus=new p(e.serverUrl),e.registerCommandHandler("lineParse",t=>{e.handlerLineParse(t)}),e.registerCommandHandler("autoCompleteShow",t=>{e.handlerAutocompleteShow(t)})})}handlerLineParse(e){if(this.code.fileName!==e.data.fileName)return;let t=this.code.getLineByNumber(e.data.lineNumber),n=this.cursor.getLineNumber(),o=this.code.getPositionInLine(this.cursor.cursorParentElement,this.cursor.getPositionInNode());if(this.code.replaceLine(e.data.lineNumber,e.data.lineElements,this.cursor),parseInt(n)===e.data.lineNumber){let e=this.code.getNodeByPosition(t,o);this.cursor.putCursorByPositionInNode(e.node,e.positionInNode)}}handlerAutocompleteShow(e){this.autoComplete.refill(e.data.result),this.autoComplete.show(this.cursor.getCoordinate(),this.lineNumber.getByNumber(e.data.lineNumber))}setKeyBoardEventListeners(){let e=this;document.getElementById("code").addEventListener("keyup",function(t){e.pressedKeys[t.code]=!1,t.preventDefault()}),document.getElementById("code").addEventListener("keydown",function(t){e.pressedKeys[t.code]=!0,"Enter"===t.code?(e.cursor.addNewRow(),t.preventDefault()):"Tab"===t.code?(e.autoComplete.active?(e.cursor.putString(e.autoComplete.getSymbols(e.cursor.getPositionInNode())),e.autoComplete.hide()):e.cursor.putTab(),t.preventDefault()):"ArrowUp"===t.code?(e.autoComplete.active?e.autoComplete.hlPrev():e.cursor.moveUpRow(),t.preventDefault()):"ArrowDown"===t.code?(e.autoComplete.active?e.autoComplete.hlNext():e.cursor.moveDownRow(),t.preventDefault()):"Space"===t.code?(e.cursor.putSymbol(t.key),e.autoComplete.hide(),t.preventDefault()):"PageUp"===t.code?(e.cursor.pageUp(),t.preventDefault()):"PageDown"===t.code?(e.cursor.pageDown(),t.preventDefault()):"End"===t.code?(e.cursor.moveEnd(),t.preventDefault()):"Home"===t.code?(e.cursor.moveHome(),t.preventDefault()):"ArrowLeft"===t.code?(e.cursor.moveLeft(),t.preventDefault()):"ArrowRight"===t.code?(e.cursor.moveRight(),t.preventDefault()):"ShiftLeft"===t.code||"ControlLeft"===t.code||"AltLeft"===t.code||"F5"===t.code||("Backspace"===t.code?(e.cursor.deleteSymbolBefore(),t.preventDefault()):"Delete"===t.code?(e.cursor.deleteSymbolUnder(),t.preventDefault()):(e.cursor.putSymbol(t.key),e.commandBus.sendCommand("autoCompleteShow",e.autoComplete.commandGetAutocompleteShow(t.target,e.code.getPositionInLine(e.cursor.cursorParentElement,e.cursor.getPositionInNode()),e.code.fileName)),t.preventDefault())),e.commandBus.sendCommand("lineParse",e.code.commandGetParseLineMsg(t.target))})}setMouseEventListeners(){let e=this;document.getElementById("code").addEventListener("click",function(t){e.cursor.setByClick(),e.autoComplete.hide(),e.pressedKeys.ControlLeft&&e.cursor.goToDefinition(e.fileListing.curentFile),t.preventDefault()}),document.getElementById("filelisting").addEventListener("click",function(t){const n=t.target;if("filelink"===n.parentElement.className){let o=e.fileListing.showFile(t);e.lineNumber.adjust(o);let s=n.getAttribute("href");s.endsWith(".py")?(e.code=new d(s,e.lineNumber),e.cursor=new u(e.code,e.lineNumber),e.autoComplete=new r):(e.code=new d(s,e.lineNumber),e.cursor=new l(e.code,e.lineNumber),e.autoComplete=new i)}else"folderlink"===n.parentElement.className&&e.fileListing.get(t);t.preventDefault()})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpbmUtbnVtYmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hdXRvY29tcGxldGUvdHh0LWF1dG9jb21wbGV0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXV0b2NvbXBsZXRlL3B5LWF1dG9jb21wbGV0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsZS1saXN0aW5nLnRzIiwid2VicGFjazovLy8uL3NyYy9jdXJzb3JzL3R4dC1jdXJzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2N1cnNvcnMvcHktY3Vyc29yLnRzIiwid2VicGFjazovLy8uL3NyYy90YWdzL3RhZ3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1hbmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1hbmQtYnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTGluZU51bWJlciIsIltvYmplY3QgT2JqZWN0XSIsImxpbmVDb3VudCIsImRpdkxpbmVOdW1iZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsIlN0cmluZyIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJuZXdWYWx1ZSIsImN1cnJlbnRWYWx1ZSIsInBhcnNlSW50IiwibGFzdENoaWxkIiwiTWF0aCIsImFicyIsInJlbW92ZUNoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsIm51bWJlciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJpdGVtIiwiZWwiLCJsZW5ndGgiLCJ0b1N0cmluZyIsIlR4dEF1dG9jb21wbGV0ZSIsInRoaXMiLCJhdXRvQ29tcGxldGVFbGVtZW50IiwiYWN0aXZlVmFyaWFudCIsImNyZWF0ZUF1dG9jb21wbGV0ZUVsZW1lbnQiLCJhY3RpdmUiLCJjb2RlTGluZSIsInBvc2l0aW9uSW5MaW5lIiwiZmlsZU5hbWUiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsImRhdGEiLCJsaW5lVGV4dCIsImxpbmVOdW1iZXIiLCJnZXRBdHRyaWJ1dGUiLCJyZXN1bHQiLCJoaWRlIiwicmVmaWxsIiwiZmlyc3RDaGlsZCIsImxpbmUiLCJzcGFuIiwicmVjdCIsInBhcmVudEVsZW1lbnQiLCJzdHlsZSIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJzdGFydFBvc2l0aW9uIiwiY2hpbGROb2RlcyIsInNsaWNlIiwicmVtb3ZlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicHlfYXV0b2NvbXBsZXRlX1B5QXV0b2NvbXBsZXRlIiwic3VwZXIiLCJGaWxlTGlzdGluZyIsImNvZGUiLCJjdXJlbnRGaWxlIiwiJCIsImFqYXgiLCJtZXRob2QiLCJkYXRhVHlwZSIsImNvbnRlbnRUeXBlIiwidXJsIiwiZG9uZSIsInJlc3BvbnNlIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJub2RlIiwibXlFbGVtZW50IiwiY29uc29sZSIsImxvZyIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJldmVudCIsInRhcmdldCIsInBhcmVudERpdiIsInBhcmVudE5vZGUiLCJjaGlsZE5vZGUwIiwidHJhbnNmb3JtIiwiaW5jbHVkZXMiLCJocmVmIiwiYXBwZW5kIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZWxmIiwiYXN5bmMiLCJhdHRyaWJ1dGVzIiwiQXJyYXkiLCJmcm9tIiwiY2hpbGRyZW4iLCJUeHRDdXJzb3IiLCJfY3Vyc29yUGFyZW50RWxlbWVudCIsInBvc2l0aW9uIiwiY3Vyc29ySGlnaGxpZ2h0RWxlbWVudCIsImNyZWF0ZUN1cnNvckhUTUxFbGVtZW50IiwiY3JlYXRlQ3Vyc29ySGlnaHRsaWdodEVsZW1lbnQiLCJnZXRGaXJzdEVsZW1lbnQiLCJjdXJzb3JQYXJlbnRFbGVtZW50IiwiY3Vyc29yRWxlbWVudCIsImNyZWF0ZVRleHROb2RlIiwicHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZSIsImN1cnNvclRleHQiLCJpZCIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZCIsInBhcmVudEN1cnNvck5vZGUiLCJjdXJzb3JQb3NpdGlvbkluTm9kZSIsImluaXRUZXh0Q29udGVudCIsIm5leHRUZXh0Tm9kZSIsInNwbGl0VGV4dCIsImJlZm9yZSIsImdldFBvc2l0aW9uSW5Ob2RlIiwicHJldmlvdXNTaWJsaW5nVGV4dCIsIm5leHRTaWJsaW5nVGV4dCIsInByZXZpb3VzU2libGluZyIsIm5leHRTaWJsaW5nIiwibGluZU51bWJlckVsZW1lbnQiLCJnZXRCeU51bWJlciIsImxpbmVOdW1iZXJSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwic2Nyb2xsSW50b1ZpZXciLCJnZXRQb3NpdGlvbkluTGluZSIsImdldExpbmVOdW1iZXIiLCJibG9jayIsImlubGluZSIsInJlcGxhY2VXaXRoIiwibm9ybWFsaXplIiwiZmxvb3IiLCJyYW5kb20iLCJjaGFyIiwicmVzZXRMaW5lUG9zaXRpb24iLCJwcmV2aW91c0VsZW1lbnQiLCJnZXRQcmV2aW91c0VsZW1lbnQiLCJuZXh0RWxlbWVudCIsImdldE5leHRFbGVtZW50Iiwic2V0TGluZVBvc2l0aW9uIiwibmV3UG9zaXRpb24iLCJnZXRPdmVyRWxlbWVudCIsInBvc2l0aW9uSW5Ob2RlIiwiZ2V0VW5kZXJFbGVtZW50IiwibmV3RWxlbWVudCIsInBhZ2VEb3duIiwicGFnZVVwIiwiZ2V0Rmlyc3RFbGVtZW50T25MaW5lQnlOb2RlIiwibGFzdEVsZW1lbnQiLCJnZXRMYXN0RWxlbWVudE9uTGluZUJ5Tm9kZSIsIm1vdmVSaWdodCIsInByZXZFbGVtZW50IiwicmVtb3ZlTm9kZSIsIm1vdmVMZWZ0IiwiZGVsZXRlU3ltYm9sVW5kZXIiLCJzZWxPYmoiLCJ3aW5kb3ciLCJnZXRTZWxlY3Rpb24iLCJnZXRSYW5nZUF0IiwiYW5jaG9yTm9kZSIsIm5vZGVUeXBlIiwiTm9kZSIsIlRFWFRfTk9ERSIsImFuY2hvck9mZnNldCIsIm5ld05vZGUiLCJkaXZpZGVMaW5lIiwicHV0U3ltYm9sIiwic3RyIiwicHlfY3Vyc29yX1B5Q3Vyc29yIiwiVGFncyIsInJlcGxhY2UiLCJ0YWdzIiwiUG9zaXRpb25Jbk5vZGUiLCJDb2RlIiwic2NyZWVuU2l6ZSIsInNwbGl0Iiwiam9pbiIsImNyZWF0ZU5ld0xpbmUiLCJ0YWJJbmRleCIsInRleHQiLCJkaXZFbGVtZW50Iiwic3BhbkVsZW1lbnQiLCJuZXdMaW5lIiwiYWZ0ZXIiLCJhZGROdW1iZXIiLCJmaXJzdExpbmUiLCJmb2N1cyIsInF1ZXJ5U2VsZWN0b3IiLCJicmVha0ZsYWciLCJuZXdMaW5lUG9zaXRpb24iLCJuZXdQb3NpdGlvbkluTm9kZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJuZXh0RWxlbWVudFNpYmxpbmciLCJnZXRGaXJzdExpbmUiLCJvbGRMaW5lUG9zaXRpb24iLCJnZXROb2RlQnlQb3NpdGlvbiIsImNvdW50ZXIiLCJwdXROZXdMaW5lQWZ0ZXIiLCJjbG9uZU5vZGUiLCJyZWNhbGN1bGF0ZVRhYkluZGV4IiwiZWxlbWVudFRvUmVjYWxjdWxhdGVGcm9tIiwibGluZUVsZW1lbnRzIiwiY3Vyc29yIiwiZ2V0TGluZUJ5TnVtYmVyIiwidG1wQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwib2xkRWwiLCJub2RlSWQiLCJlbGVtZW50c1RvUmVwbGFjZSIsIm5ld0VsIiwicHVzaCIsIm1hcCIsIngiLCJyZXZlcnNlIiwib3V0ZXJIVE1MIiwiaGFuZGxlcnMiLCJDb21tYW5kSGFuZGxlcnMiLCJtc2dUeXBlIiwiY2FsbGJhY2siLCJjb21tYW5kX2J1c19Db21tYW5kQnVzIiwiY29ubmVjdGlvbkF0dGVtcHRDb3VudGVyIiwic2VydmVyVXJsIiwiY3JlYXRlU29ja2V0IiwiYXJncyIsInNvY2tldCIsIldlYlNvY2tldCIsIm9ubWVzc2FnZSIsIm9uTWVzc2FnZSIsIm9uY2xvc2UiLCJvbkNsb3NlIiwib25vcGVuIiwib25PcGVuIiwib25lcnJvciIsImVycm9yIiwiZGVidWciLCJ3YXNDbGVhbiIsInJlYXNvbiIsIkVycm9yIiwiY2xvc2UiLCJtc2ciLCJtZXNzYWdlIiwicGFyc2UiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJsb2NhdGlvbiIsImhvc3QiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0S2V5Qm9hcmRFdmVudExpc3RlbmVycyIsInNldE1vdXNlRXZlbnRMaXN0ZW5lcnMiLCJmaWxlTGlzdGluZyIsImF1dG9Db21wbGV0ZSIsInByZXNzZWRLZXlzIiwiY29tbWFuZEJ1cyIsInJlZ2lzdGVyQ29tbWFuZEhhbmRsZXIiLCJoYW5kbGVyTGluZVBhcnNlIiwiaGFuZGxlckF1dG9jb21wbGV0ZVNob3ciLCJqc29uRGF0YSIsImN1cnJlbnRMaW5lTnVtYmVyIiwib2xkUG9zaXRpb24iLCJyZXBsYWNlTGluZSIsInNob3ciLCJnZXRDb29yZGluYXRlIiwiYWRkTmV3Um93IiwicHV0U3RyaW5nIiwiZ2V0U3ltYm9scyIsInB1dFRhYiIsImhsUHJldiIsIm1vdmVVcFJvdyIsImhsTmV4dCIsIm1vdmVEb3duUm93IiwibW92ZUVuZCIsIm1vdmVIb21lIiwiZGVsZXRlU3ltYm9sQmVmb3JlIiwic2VuZENvbW1hbmQiLCJjb21tYW5kR2V0QXV0b2NvbXBsZXRlU2hvdyIsImNvbW1hbmRHZXRQYXJzZUxpbmVNc2ciLCJzZXRCeUNsaWNrIiwiZ29Ub0RlZmluaXRpb24iLCJzaG93RmlsZSIsImFkanVzdCIsImVuZHNXaXRoIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFC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RSxLQUNYdEIsU0FBU0ssZUFBZSxRQUFRbVAsaUJBQWlCLFFBQVMsU0FBVTNLLEdBQ2hFVyxFQUFLbUgsT0FBTzJFLGFBQ1o5TCxFQUFLb0ssYUFBYXROLE9BQ2RrRCxFQUFLcUssWUFBeUIsYUFDOUJySyxFQUFLbUgsT0FBTzRFLGVBQWUvTCxFQUFLbUssWUFBWWhNLFlBRWhEa0IsRUFBTVMsbUJBR1Z0RixTQUFTSyxlQUFlLGVBQWVtUCxpQkFBaUIsUUFBUyxTQUFVM0ssR0FDdkUsTUFBTUMsRUFBc0JELEVBQU1DLE9BQ2xDLEdBQXVDLGFBQW5DQSxFQUFPbEMsY0FBYzFDLFVBQTBCLENBRS9DLElBQUlKLEVBQVkwRixFQUFLbUssWUFBWTZCLFNBQVMzTSxHQUUxQ1csRUFBS3JELFdBQVdzUCxPQUFPM1IsR0FFdkIsSUFBSStCLEVBQVdpRCxFQUFPMUMsYUFBYSxRQUMvQlAsRUFBUzZQLFNBQVMsUUFDbEJsTSxFQUFLOUIsS0FBTyxJQUFJb0gsRUFBS2pKLEVBQVUyRCxFQUFLckQsWUFDcENxRCxFQUFLbUgsT0FBUyxJQUFJbEMsRUFBU2pGLEVBQUs5QixLQUFNOEIsRUFBS3JELFlBQzNDcUQsRUFBS29LLGFBQWUsSUFBSXJNLElBRXhCaUMsRUFBSzlCLEtBQU8sSUFBSW9ILEVBQUtqSixFQUFVMkQsRUFBS3JELFlBQ3BDcUQsRUFBS21ILE9BQVMsSUFBSTdHLEVBQVVOLEVBQUs5QixLQUFNOEIsRUFBS3JELFlBQzVDcUQsRUFBS29LLGFBQWUsSUFBSXZPLE9BRWMsZUFBbkN5RCxFQUFPbEMsY0FBYzFDLFdBQzVCc0YsRUFBS21LLFlBQVlsUixJQUFJb0csR0FHekJBLEVBQU1TIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgTGluZU51bWJlciB7XG4gICAgY29uc3RydWN0b3IgKGxpbmVDb3VudDpudW1iZXIpe1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBsaW5lQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IGRpdkxpbmVOdW1iZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGRpdkxpbmVOdW1iZXIuY2xhc3NOYW1lID0gJ2xpbmUtbnVtYmVyJztcbiAgICAgICAgICAgIGRpdkxpbmVOdW1iZXIudGV4dENvbnRlbnQgPSBTdHJpbmcoaSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZS1udW1iZXInKS5hcHBlbmRDaGlsZChkaXZMaW5lTnVtYmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGp1c3QobmV3VmFsdWU6bnVtYmVyKXtcbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcicpLmxhc3RDaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50VmFsdWUgKyAxOyBpIDw9IGN1cnJlbnRWYWx1ZSArIE1hdGguYWJzKGN1cnJlbnRWYWx1ZSAtIG5ld1ZhbHVlKTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPiBjdXJyZW50VmFsdWUpe1xuICAgICAgICAgICAgICAgIGxldCBkaXZMaW5lTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgZGl2TGluZU51bWJlci5jbGFzc05hbWUgPSAnbGluZS1udW1iZXInO1xuICAgICAgICAgICAgICAgIGRpdkxpbmVOdW1iZXIudGV4dENvbnRlbnQgPSBTdHJpbmcoaSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmUtbnVtYmVyJykuYXBwZW5kQ2hpbGQoZGl2TGluZU51bWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcicpLnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcicpLmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldEJ5TnVtYmVyKG51bWJlcjogbnVtYmVyKXtcbiAgICAgICAgcmV0dXJuIDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsaW5lLW51bWJlcicpLml0ZW0obnVtYmVyKTtcbiAgICB9XG4gICAgYWRkTnVtYmVyKCl7XG4gICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbC5jbGFzc05hbWUgPSAnbGluZS1udW1iZXInO1xuICAgICAgICBlbC50ZXh0Q29udGVudCA9IChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsaW5lLW51bWJlcicpLmxlbmd0aCArIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lLW51bWJlcicpLmFwcGVuZENoaWxkKGVsKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVHh0QXV0b2NvbXBsZXRlIHtcbiAgICBwdWJsaWMgYWN0aXZlOiBCb29sZWFuO1xuICAgIHB1YmxpYyBhdXRvQ29tcGxldGVFbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGw7XG4gICAgcHVibGljIGFjdGl2ZVZhcmlhbnQgOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlQXV0b2NvbXBsZXRlRWxlbWVudChbXSk7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG5cbiAgICBjb21tYW5kR2V0QXV0b2NvbXBsZXRlU2hvdyhjb2RlTGluZTogSFRNTEVsZW1lbnQsIHBvc2l0aW9uSW5MaW5lOiBudW1iZXIsIGZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gVE9ETyBkbyBzY2hlbWFcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImF1dG9Db21wbGV0ZVNob3dcIixcbiAgICAgICAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgICAgICAgICAgXCJmaWxlTmFtZVwiOiBmaWxlTmFtZSxcbiAgICAgICAgICAgICAgICBcImxpbmVUZXh0XCI6IGNvZGVMaW5lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgICAgIFwicG9zaXRpb25JbkxpbmVcIjogcG9zaXRpb25JbkxpbmUsXG4gICAgICAgICAgICAgICAgXCJsaW5lTnVtYmVyXCI6IHBhcnNlSW50KGNvZGVMaW5lLmdldEF0dHJpYnV0ZSgndGFiSW5kZXgnKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlQXV0b2NvbXBsZXRlRWxlbWVudChyZXN1bHQ6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSB0cnVlKXtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hdXRvQ29tcGxldGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5jbGFzc05hbWUgPSAnYXV0b2NvbXBsZXRlJztcbiAgICAgICAgLy8gdGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAneWVsbG93JztcbiAgICAgICAgdGhpcy5yZWZpbGwocmVzdWx0KTtcblxuICAgIH1cblxuICAgIHJlZmlsbChyZXN1bHQ6IEFycmF5PHN0cmluZz4pe1xuICAgICAgICB3aGlsZSAodGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiAgcmVzdWx0KSB7XG4gICAgICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGxpbmU7XG4gICAgICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2hvdyhyZWN0OiBDbGllbnRSZWN0LCBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIC8vIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ1widG9wOicgKyByZWN0LmJvdHRvbSArICdweDtsZWZ0OicgKyByZWN0LmxlZnQgKyAncHhcIicpO1xuICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuc3R5bGUudG9wID0gcmVjdC5ib3R0b20udG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5zdHlsZS5sZWZ0ID0gcmVjdC5sZWZ0LnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudCk7XG4gICAgfVxuXG4gICAgZ2V0U3ltYm9scyhzdGFydFBvc2l0aW9uOm51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmNoaWxkTm9kZXMuaXRlbSh0aGlzLmFjdGl2ZVZhcmlhbnQpLnRleHRDb250ZW50LnNsaWNlKHN0YXJ0UG9zaXRpb24pO1xuICAgIH1cblxuICAgIGhpZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVmFyaWFudCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBobE5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVZhcmlhbnQgPT09IHRoaXMuYXV0b0NvbXBsZXRlRWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgKDxIVE1MRWxlbWVudD50aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuY2hpbGROb2Rlcy5pdGVtKHRoaXMuYWN0aXZlVmFyaWFudCkpLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgdGhpcy5hY3RpdmVWYXJpYW50ICs9IDE7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgbGV0IGFjdGl2ZVZhcmlhbnQgPSA8SFRNTEVsZW1lbnQ+dGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmNoaWxkTm9kZXMuaXRlbSh0aGlzLmFjdGl2ZVZhcmlhbnQpO1xuICAgICAgICAgICAgYWN0aXZlVmFyaWFudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1hdXRvY29tcGxldGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhsUHJldigpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlVmFyaWFudCA9PT0gMCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgKDxIVE1MRWxlbWVudD50aGlzLmF1dG9Db21wbGV0ZUVsZW1lbnQuY2hpbGROb2Rlcy5pdGVtKHRoaXMuYWN0aXZlVmFyaWFudCkpLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgdGhpcy5hY3RpdmVWYXJpYW50IC09IDE7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgbGV0IGFjdGl2ZVZhcmlhbnQgPSA8SFRNTEVsZW1lbnQ+dGhpcy5hdXRvQ29tcGxldGVFbGVtZW50LmNoaWxkTm9kZXMuaXRlbSh0aGlzLmFjdGl2ZVZhcmlhbnQpO1xuICAgICAgICAgICAgYWN0aXZlVmFyaWFudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1hdXRvY29tcGxldGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7VHh0QXV0b2NvbXBsZXRlfSBmcm9tIFwiLi90eHQtYXV0b2NvbXBsZXRlXCI7XG5cbmV4cG9ydCBjbGFzcyBQeUF1dG9jb21wbGV0ZSBleHRlbmRzIFR4dEF1dG9jb21wbGV0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEZpbGVMaXN0aW5nIHtcbiAgICBwdWJsaWMgY3VyZW50RmlsZTogc3RyaW5nPScnO1xuICAgIHB1YmxpYyBjb2RlO1xuICAgIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICAgICAgdGhpcy5jdXJlbnRGaWxlID0gJyc7XG4gICAgICAgIHRoaXMuY29kZT0gY29kZTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgdXJsOiAnL3NlcnZlci9maWxlbGlzdGluZydcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQ6IHN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZSA9ICQoZWxlbWVudClbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG15RWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVsaXN0aW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggbXlFbGVtZW50KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG15RWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ9C90LXRgiDQtdC70LXQvNC10L3RgtCwIGZpbGVsaXN0aW5nJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZm9sZGVyIGxpc3RpbmcgcmVzcG9uZScsIHJlc3BvbnNlKVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ9Cy0YHQtSDRgdC70L7QvNCw0LvQvtGB0Ywg0LIgZm9sZGVyIGxpc3RpbmcnLCBqcVhIUiwgdGV4dFN0YXR1cylcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0KGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA6IEhUTUxFbGVtZW50IHwgbnVsbCA9IDxIVE1MRWxlbWVudD5ldmVudC50YXJnZXQ7XG4gICAgICAgIGlmICghdGFyZ2V0KXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdldmVudC50YXJnZXQgaXMgZW1wdHkgaW4gZm9sZGVyIGxpc3RpbmcgZ2V0JylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50RGl2OiBOb2RlIHwgbnVsbCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBpZiAoIXBhcmVudERpdil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUgaXMgZW1wdHkgaW4gZm9sZGVyIGxpc3RpbmcgZ2V0JylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZE5vZGUwIDogSFRNTEVsZW1lbnQgPSBwYXJlbnREaXYuY2hpbGROb2Rlc1swXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKHBhcmVudERpdiAmJiBjaGlsZE5vZGUwLnN0eWxlLnRyYW5zZm9ybSA9PT0gJ3JvdGF0ZSgxODBkZWcpJykge1xuICAgICAgICAgICAgY2hpbGROb2RlMC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDkwZGVnKSc7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcGFyZW50RGl2LmNoaWxkTm9kZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAoWydmb2xkZXJsaW5rJywgJ2ZpbGVsaW5rJ10uaW5jbHVkZXMoKHBhcmVudERpdi5jaGlsZE5vZGVzW2ldIGFzIEhUTUxFbGVtZW50KS5jbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudERpdi5yZW1vdmVDaGlsZChwYXJlbnREaXYuY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoaWxkTm9kZTAuc3R5bGUudHJhbnNmb3JtID09PSAncm90YXRlKDkwZGVnKScpIHtcbiAgICAgICAgICAgIGNoaWxkTm9kZTAuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgxODBkZWcpJztcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICB1cmw6ICg8SFRNTEFuY2hvckVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5ocmVmXG4gICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQ6IHN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAkKHBhcmVudERpdikuYXBwZW5kKCQoZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZSA9ICQoZWxlbWVudClbMF07XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlbGlzdGluZycpLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn0LLRgdC1INGB0LvQvtC80LDQu9C+0YHRjCDQsiBmb2xkZXIgbGlzdGluZycsIGpxWEhSLCB0ZXh0U3RhdHVzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGlsZE5vZGUwLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoOTBkZWcpJztcbiAgICAgICAgfVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICBzaG93RmlsZShldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXMsIGxpbmVDb3VudDtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIHVybDogKDxFbGVtZW50PmV2ZW50LnRhcmdldCkuYXR0cmlidXRlc1snaHJlZiddLnZhbHVlLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCdcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvZGUnKS5jaGlsZHJlbikuZm9yRWFjaChcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQ6IHN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29kZScpLmFwcGVuZENoaWxkKCQoZWxlbWVudClbMF0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHNlbGYuY3VyZW50RmlsZSA9ICg8RWxlbWVudD5ldmVudC50YXJnZXQpLmF0dHJpYnV0ZXNbJ2hyZWYnXS52YWx1ZTtcbiAgICAgICAgICAgIGxpbmVDb3VudCA9IHJlc3BvbnNlLmxlbmd0aDtcbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQstGB0LUg0YHQu9C+0LzQsNC70L7RgdGMINCyIGdldCBDT0RFJywganFYSFIsIHRleHRTdGF0dXMpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZUNvdW50O1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29kZX0gZnJvbSAnLi4vY29kZSc7XG5pbXBvcnQge0xpbmVOdW1iZXJ9IGZyb20gXCIuLi9saW5lLW51bWJlclwiO1xuXG5cbmV4cG9ydCBjbGFzcyBUeHRDdXJzb3Ige1xuICAgIHB1YmxpYyBjb2RlOiBDb2RlO1xuICAgIHB1YmxpYyBsaW5lTnVtYmVyOkxpbmVOdW1iZXI7XG5cbiAgICBwcml2YXRlIF9jdXJzb3JQYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGw7XG4gICAgY3Vyc29yRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogbnVtYmVyID0gbnVsbDtcbiAgICBwcml2YXRlIGN1cnNvckhpZ2hsaWdodEVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gbnVsbDtcbiAgICAvLyBwcml2YXRlIGN1cnNvclRleHQ6IHN0cmluZyA9ICcnOyAgdXNlIHNldHRlci9nZXR0ZXJcbiAgICAvLyBjdXJzb3JQYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGw7IHVzZSBzZXR0ZXIvZ2V0dGVyXG5cblxuICAgIGNvbnN0cnVjdG9yKGNvZGU6IENvZGUsIGxpbmVOdW1iZXI6IExpbmVOdW1iZXIpIHtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlcjtcbiAgICAgICAgdGhpcy5jcmVhdGVDdXJzb3JIVE1MRWxlbWVudCgpO1xuICAgICAgICB0aGlzLmNyZWF0ZUN1cnNvckhpZ2h0bGlnaHRFbGVtZW50KCk7XG5cbiAgICAgICAgbGV0IHBhcmVudEVsZW1lbnQgPSB0aGlzLmNvZGUuZ2V0Rmlyc3RFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmN1cnNvckVsZW1lbnQpO1xuICAgICAgICB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpKTtcbiAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKHBhcmVudEVsZW1lbnQsIDApO1xuXG4gICAgICAgIGlmIChwYXJlbnRFbGVtZW50LnRleHRDb250ZW50ID09PSAnJykge1xuICAgICAgICAgICAgLy8gZG9jdW1lbnQgaXMgZW1wdHkgc28gZG8gdGhpcyB3YXlcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yVGV4dCA9ICdcXG4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVDdXJzb3JIaWdodGxpZ2h0RWxlbWVudCgpIHtcbiAgICAgICAgLy8gVE9ETyBjcmVhdGUgY3Vyc29yIGJ5IHdlYiBjb21wb25lbnRcbiAgICAgICAgdGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuY3Vyc29ySGlnaGxpZ2h0RWxlbWVudC5pZCA9ICdjdXJzb3JIaWdobGlnaHRFbGVtZW50JztcbiAgICAgICAgdGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50LnN0eWxlLndpZHRoID0gJzNweCc7IC8vVE9ETyBjYWxjdWxhdGUgaXQgaW4gcnVudGltZVxuICAgICAgICB0aGlzLmN1cnNvckhpZ2hsaWdodEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzE4cHgnOyAvL1RPRE8gY2FsY3VsYXRlIGl0IGluIHJ1bnRpbWVcbiAgICAgICAgdGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAnYmxhY2snO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQ3Vyc29ySFRNTEVsZW1lbnQoY3Vyc29yVGV4dCA9ICcnKSB7XG4gICAgICAgIC8vIFRPRE8gY3JlYXRlIGN1cnNvciBieSB3ZWIgY29tcG9uZW50XG4gICAgICAgIHRoaXMuY3Vyc29yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LmNsYXNzTmFtZSA9ICdjdXJzb3InO1xuICAgICAgICB0aGlzLmN1cnNvclRleHQgPSBjdXJzb3JUZXh0O1xuICAgIH1cblxuICAgIHB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUocGFyZW50Q3Vyc29yTm9kZTogSFRNTEVsZW1lbnQsIGN1cnNvclBvc2l0aW9uSW5Ob2RlOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHBhcmVudEN1cnNvck5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmsgaWYgbmV3IG5vZGUgaXMgbnVsbFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ251bGwgZWxlbWVudCBpbiBwdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50ICE9PSBwYXJlbnRDdXJzb3JOb2RlKSB7XG4gICAgICAgICAgICAvLyBkZWxldGUgaWYgcHV0IGN1cnNvciBpbiBhbm90aGVyIG5vZGVcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgb25lXG4gICAgICAgICAgICBsZXQgaW5pdFRleHRDb250ZW50ID0gcGFyZW50Q3Vyc29yTm9kZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCA9IHBhcmVudEN1cnNvck5vZGU7XG4gICAgICAgICAgICBsZXQgY2hpbGROb2RlcyA9IHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudC5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NoaWxkTm9kZXMubGVuZ3RoOj0nLCBjaGlsZE5vZGVzLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV4dFRleHROb2RlID0gKDxUZXh0PmNoaWxkTm9kZXMuaXRlbSgwKSkuc3BsaXRUZXh0KGN1cnNvclBvc2l0aW9uSW5Ob2RlKTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yVGV4dCA9IHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudC50ZXh0Q29udGVudC5zbGljZShjdXJzb3JQb3NpdGlvbkluTm9kZSwgY3Vyc29yUG9zaXRpb25Jbk5vZGUgKyAxKTtcbiAgICAgICAgICAgIG5leHRUZXh0Tm9kZS50ZXh0Q29udGVudCA9IGluaXRUZXh0Q29udGVudC5zbGljZShjdXJzb3JQb3NpdGlvbkluTm9kZSArIDEpO1xuICAgICAgICAgICAgbmV4dFRleHROb2RlLmJlZm9yZSh0aGlzLmN1cnNvckVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGN1cnNvclBvc2l0aW9uSW5Ob2RlICE9PSB0aGlzLmdldFBvc2l0aW9uSW5Ob2RlKCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNTaWJsaW5nVGV4dCA9ICcnLCBjdXJzb3JUZXh0ID0gJycsIG5leHRTaWJsaW5nVGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzU2libGluZ1RleHQgPSB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQudGV4dENvbnRlbnQuc2xpY2UoMCwgY3Vyc29yUG9zaXRpb25Jbk5vZGUpO1xuICAgICAgICAgICAgICAgIGN1cnNvclRleHQgPSB0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQudGV4dENvbnRlbnQuc2xpY2UoY3Vyc29yUG9zaXRpb25Jbk5vZGUsIGN1cnNvclBvc2l0aW9uSW5Ob2RlICsgMSk7XG4gICAgICAgICAgICAgICAgbmV4dFNpYmxpbmdUZXh0ID0gdGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LnRleHRDb250ZW50LnNsaWNlKGN1cnNvclBvc2l0aW9uSW5Ob2RlICsgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9IHByZXZpb3VzU2libGluZ1RleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JUZXh0ID0gY3Vyc29yVGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgPSBuZXh0U2libGluZ1RleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQdXQgY3Vyc29yIGluIHNhbWUgcG9zaXRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGluZU51bWJlckVsZW1lbnQgPSB0aGlzLmxpbmVOdW1iZXIuZ2V0QnlOdW1iZXIoXG4gICAgICAgICAgICBwYXJzZUludChwYXJlbnRDdXJzb3JOb2RlLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0YWJJbmRleCcpKSAtIDFcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGxpbmVOdW1iZXJSZWN0ID0gbGluZU51bWJlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5jdXJzb3JFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLmN1cnNvckhpZ2hsaWdodEVsZW1lbnQuc3R5bGUudG9wID0gKHJlY3QudG9wIC0gbGluZU51bWJlclJlY3QudG9wKS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgdGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50LnN0eWxlLmxlZnQgPSAocmVjdC5sZWZ0IC0gbGluZU51bWJlclJlY3QubGVmdCAtIDMpLnRvU3RyaW5nKCkgKyAncHgnOyAvLyBUT0RPIGN1bGN1bGF0ZSB0aGlzKC0zIGJlY2F1c2Ugb2Ygd2lkdGggb2YgY3Vyc29ySGlnbGlnaHQgZWxlbWVudClcbiAgICAgICAgbGluZU51bWJlckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jdXJzb3JIaWdobGlnaHRFbGVtZW50KTtcblxuICAgICAgICB0aGlzLnNjcm9sbEludG9WaWV3KCk7XG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZSgpIDogQ2xpZW50UmVjdHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3Vyc29yRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG5cbiAgICBnZXRQb3NpdGlvbkluTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3Vyc29yRWxlbWVudC5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQubGVuZ3RoOyAvLyBub3QgLTEgYmVjYXVzZSBjdXJzb3IgaW5jbHVkZSBsZXR0ZXJcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0TGluZVBvc2l0aW9uKCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldExpbmVQb3NpdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLmNvZGUuZ2V0UG9zaXRpb25JbkxpbmUodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LCB0aGlzLmdldFBvc2l0aW9uSW5Ob2RlKCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdldExpbmVOdW1iZXIoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZS5nZXRMaW5lTnVtYmVyKHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCk7XG4gICAgfVxuICAgIHByaXZhdGUgc2Nyb2xsSW50b1ZpZXcoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY3Vyc29yRWxlbWVudC5zY3JvbGxJbnRvVmlldyh7J2Jsb2NrJzogJ25lYXJlc3QnLCAnaW5saW5lJzogJ25lYXJlc3QnfSk7XG4gICAgfVxuXG4gICAgc2V0IGN1cnNvclBhcmVudEVsZW1lbnQoZWwpIHtcbiAgICAgICAgaWYgKGVsID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy5jdXJzb3JUZXh0KTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudC5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnNvclBhcmVudEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JUZXh0ID0gJyc7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBieSBjb2RlIHBhcnNpbmcgYWxnaG9yaXRtXG4gICAgICAgICAgICAvLyB0aGlzLl9jdXJzb3JQYXJlbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnbm9kZWlkJyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnbm9kZWlkJywgTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMDApICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLl9jdXJzb3JQYXJlbnRFbGVtZW50ID0gZWw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgY3Vyc29yUGFyZW50RWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnNvclBhcmVudEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXQgY3Vyc29yVGV4dChjdXJzb3JUZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnRleHRDb250ZW50ID0gY3Vyc29yVGV4dDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBjdXJzb3JUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvckVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgcHV0U3ltYm9sKGNoYXI6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQucHJldmlvdXNTaWJsaW5nLnRleHRDb250ZW50ICs9IGNoYXI7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZSh0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQsIHRoaXMuZ2V0UG9zaXRpb25Jbk5vZGUoKSk7XG4gICAgICAgIHRoaXMucmVzZXRMaW5lUG9zaXRpb24oKTtcbiAgICB9O1xuXG4gICAgbW92ZUxlZnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvckVsZW1lbnQucHJldmlvdXNTaWJsaW5nLnRleHRDb250ZW50ICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpIC0gMSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9PT0gJycpIHtcbiAgICAgICAgICAgIGxldCBwcmV2aW91c0VsZW1lbnQgPSB0aGlzLmNvZGUuZ2V0UHJldmlvdXNFbGVtZW50KHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNFbGVtZW50ID09PSBudWxsKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUocHJldmlvdXNFbGVtZW50LCBwcmV2aW91c0VsZW1lbnQudGV4dENvbnRlbnQubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNldExpbmVQb3NpdGlvbigpO1xuICAgIH07XG5cbiAgICBtb3ZlUmlnaHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvckVsZW1lbnQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LCB0aGlzLmdldFBvc2l0aW9uSW5Ob2RlKCkgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnNvckVsZW1lbnQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICAgICBsZXQgbmV4dEVsZW1lbnQgPSB0aGlzLmNvZGUuZ2V0TmV4dEVsZW1lbnQodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChuZXh0RWxlbWVudCA9PT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKG5leHRFbGVtZW50LCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0TGluZVBvc2l0aW9uKCk7XG4gICAgfTtcblxuICAgIG1vdmVVcFJvdygpIHtcbiAgICAgICAgdGhpcy5zZXRMaW5lUG9zaXRpb24oKTtcbiAgICAgICAgbGV0IG5ld1Bvc2l0aW9uID0gdGhpcy5jb2RlLmdldE92ZXJFbGVtZW50KHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZShuZXdQb3NpdGlvbi5ub2RlLCBuZXdQb3NpdGlvbi5wb3NpdGlvbkluTm9kZSk7XG4gICAgfTtcblxuICAgIG1vdmVEb3duUm93KCkge1xuICAgICAgICB0aGlzLnNldExpbmVQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3UG9zaXRpb24gPSB0aGlzLmNvZGUuZ2V0VW5kZXJFbGVtZW50KHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZShuZXdQb3NpdGlvbi5ub2RlLCBuZXdQb3NpdGlvbi5wb3NpdGlvbkluTm9kZSk7XG4gICAgfTtcblxuICAgIHBhZ2VEb3duKCkge1xuICAgICAgICB0aGlzLnNldExpbmVQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3RWxlbWVudCA9IHRoaXMuY29kZS5wYWdlRG93bih0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQsIHRoaXMucG9zaXRpb24pO1xuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUobmV3RWxlbWVudC5ub2RlLCBuZXdFbGVtZW50LnBvc2l0aW9uSW5Ob2RlKTtcbiAgICB9O1xuXG4gICAgcGFnZVVwKCkge1xuICAgICAgICB0aGlzLnNldExpbmVQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3RWxlbWVudCA9IHRoaXMuY29kZS5wYWdlVXAodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50LCB0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKG5ld0VsZW1lbnQubm9kZSwgbmV3RWxlbWVudC5wb3NpdGlvbkluTm9kZSk7XG4gICAgfTtcblxuICAgIG1vdmVIb21lKCkge1xuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUodGhpcy5jb2RlLmdldEZpcnN0RWxlbWVudE9uTGluZUJ5Tm9kZSh0aGlzLmN1cnNvclBhcmVudEVsZW1lbnQpLCAwKTtcbiAgICAgICAgdGhpcy5yZXNldExpbmVQb3NpdGlvbigpO1xuICAgIH07XG5cbiAgICBtb3ZlRW5kKCkge1xuICAgICAgICBsZXQgbGFzdEVsZW1lbnQgPSB0aGlzLmNvZGUuZ2V0TGFzdEVsZW1lbnRPbkxpbmVCeU5vZGUodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKGxhc3RFbGVtZW50LCBsYXN0RWxlbWVudC50ZXh0Q29udGVudC5sZW5ndGggLSAxKTtcbiAgICAgICAgdGhpcy5yZXNldExpbmVQb3NpdGlvbigpO1xuICAgIH07XG5cbiAgICBkZWxldGVTeW1ib2xVbmRlcigpIHtcbiAgICAgICAgdGhpcy5tb3ZlUmlnaHQoKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0UG9zaXRpb25Jbk5vZGUoKSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9IHRoaXMuY3Vyc29yRWxlbWVudC5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQuc2xpY2UoMCwgdGhpcy5nZXRQb3NpdGlvbkluTm9kZSgpIC0gMSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwcmV2RWxlbWVudCA9IHRoaXMuY29kZS5nZXRQcmV2aW91c0VsZW1lbnQodGhpcy5jdXJzb3JQYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgIHByZXZFbGVtZW50LnRleHRDb250ZW50ID0gcHJldkVsZW1lbnQudGV4dENvbnRlbnQuc2xpY2UoMCwgcHJldkVsZW1lbnQudGV4dENvbnRlbnQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBpZiAocHJldkVsZW1lbnQudGV4dENvbnRlbnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2RlLnJlbW92ZU5vZGUocHJldkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgZGVsZXRlU3ltYm9sQmVmb3JlKCkge1xuICAgICAgICB0aGlzLm1vdmVMZWZ0KCk7XG4gICAgICAgIHRoaXMuZGVsZXRlU3ltYm9sVW5kZXIoKTtcbiAgICB9O1xuXG4gICAgc2V0QnlDbGljaygpIHtcbiAgICAgICAgLy9UT0RPIHdvcmtzIHN0cmFuZ2UgZml4IGl0XG4gICAgICAgIGxldCBzZWxPYmogPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxPYmonLCBzZWxPYmosIHNlbE9iai5nZXRSYW5nZUF0KDApLHNlbE9iai5nZXRSYW5nZUF0KDApLCAnfCcgKyBzZWxPYmoudG9TdHJpbmcoKSArICd8Jyk7XG4gICAgICAgIGxldCBhbmNob3JOb2RlID0gc2VsT2JqLmFuY2hvck5vZGU7XG4gICAgICAgIGlmIChhbmNob3JOb2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkIG5vZGUgaXMgbm90IHRleHQgdHlwZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJzb3JQYXJlbnRFbGVtZW50ID0gYW5jaG9yTm9kZS5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAoYW5jaG9yTm9kZS5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2N1cnNvcicpIHtcbiAgICAgICAgICAgIC8vIGNsaWNrIGluIGN1cnNvclxuICAgICAgICAgICAgY3Vyc29yUGFyZW50RWxlbWVudCA9IGN1cnNvclBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB1dEN1cnNvckJ5UG9zaXRpb25Jbk5vZGUoY3Vyc29yUGFyZW50RWxlbWVudCwgc2VsT2JqLmFuY2hvck9mZnNldCk7XG4gICAgICAgIHRoaXMucmVzZXRMaW5lUG9zaXRpb24oKTtcbiAgICB9O1xuXG4gICAgYWRkTmV3Um93KCkge1xuICAgICAgICBsZXQgbmV3Tm9kZSA9IHRoaXMuY29kZS5kaXZpZGVMaW5lKHRoaXMuY3Vyc29yUGFyZW50RWxlbWVudCk7XG4gICAgICAgIGxldCBwb3NpdGlvbkluTm9kZSA9IHRoaXMuZ2V0UG9zaXRpb25Jbk5vZGUoKTtcbiAgICAgICAgdGhpcy5tb3ZlTGVmdCgpO1xuICAgICAgICBpZiAodGhpcy5jdXJzb3JFbGVtZW50Lm5leHRTaWJsaW5nLnRleHRDb250ZW50ICE9PSAnJyl7XG4gICAgICAgICAgICB0aGlzLmN1cnNvckVsZW1lbnQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQgPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICBuZXdOb2RlLnRleHRDb250ZW50ID0gbmV3Tm9kZS50ZXh0Q29udGVudC5zbGljZShwb3NpdGlvbkluTm9kZSk7XG4gICAgICAgIHRoaXMucHV0Q3Vyc29yQnlQb3NpdGlvbkluTm9kZShuZXdOb2RlLCAwKTtcbiAgICAgICAgLy8gdGhpcy5tb3ZlUmlnaHQoKTtcbiAgICAgICAgdGhpcy5jdXJzb3JFbGVtZW50LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9ICcnO1xuICAgIH07XG5cbiAgICBnb1RvRGVmaW5pdGlvbihmaWxlTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIC8vIFRPRE8gd2h5IGlzIGl0ICBoZXJlXG4gICAgfVxuXG4gICAgcHV0VGFiKCkge1xuICAgICAgICAvLyBUT0RPIHdoeSBpcyBpdCBoZXJlXG4gICAgICAgIHRoaXMucHV0U3ltYm9sKCdcXHQnKTtcbiAgICB9XG5cbiAgICBwdXRTdHJpbmcoc3RyOiBzdHJpbmcpe1xuICAgICAgICBmb3IgKGxldCBpIG9mIHN0cil7XG4gICAgICAgICAgICB0aGlzLnB1dFN5bWJvbChpKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiaW1wb3J0IHtUeHRDdXJzb3J9IGZyb20gJy4vdHh0LWN1cnNvcic7XG5pbXBvcnQge0NvZGV9IGZyb20gXCIuLi9jb2RlXCI7XG5pbXBvcnQge0xpbmVOdW1iZXJ9IGZyb20gXCIuLi9saW5lLW51bWJlclwiO1xuXG5leHBvcnQgY2xhc3MgUHlDdXJzb3IgZXh0ZW5kcyBUeHRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGU6IENvZGUsIGxpbmVOdW1iZXI6IExpbmVOdW1iZXIpIHtcbiAgICAgICAgc3VwZXIoY29kZSwgbGluZU51bWJlcik7XG4gICAgfVxuXG4gICAgcHV0VGFiKCkge1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgICAgICB0aGlzLnB1dFN5bWJvbCgnICcpO1xuICAgIH07XG5cbiAgICAvLyBnb1RvRGVmaW5pdGlvbihjdXJlbnRGaWxlOnN0cmluZykge1xuICAgIC8vICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgLy8gICAgICQuYWpheCh7XG4gICAgLy8gICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIC8vICAgICAgICAgdXJsOiBjdXJlbnRGaWxlLFxuICAgIC8vICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAvLyAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgLy8gICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgLy8gICAgICAgICAgICAgXCJjb2RlX3N0cmluZ1wiOiAkKCQoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY3Vyc29yJylbMF0pLnBhcmVudHMoJy5jb250ZW50LWxpbmUnKVswXSkudGV4dCgpLFxuICAgIC8vICAgICAgICAgICAgIFwiY3Vyc29yX3Bvc2l0aW9uXCI6IFR4dEN1cnNvci5fZ2V0Q3Vyc29yU2libGluZ1RleHRzQnlDdXJzb3JzKClbMF0udGV4dEJlZm9yZUN1cnNvci5sZW5ndGggKyAxLFxuICAgIC8vICAgICAgICAgICAgIFwiY29kZV9saW5lX251bWJlclwiOiBwYXJzZUludCgkKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2N1cnNvcicpWzBdKS5wYXJlbnRzKCcuY29udGVudC1saW5lJylbMF0uZ2V0QXR0cmlidXRlKCd0YWJJbmRleCcpKSxcbiAgICAvLyAgICAgICAgICAgICBcInR5cGVcIjogXCJnb3RvZGVmaW5pdGlvblwiXG4gICAgLy8gICAgICAgICB9KVxuICAgIC8vICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIC8vICAgICAgICAgbGV0IGNvbnRlbnRMSW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3RhYmluZGV4PVwiJyArIHBhcnNlSW50KHJlc3BvbnNlLmNvZGVfbGluZV9udW1iZXIpICsgJ1wiXScpIGFzIEhUTUxFbGVtZW50O1xuICAgIC8vICAgICAgICAgY29udGVudExJbmUuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7XG4gICAgLy8gICAgICAgICBsZXQgY3Vyc29yU2libGluZyA9IFR4dEN1cnNvci5fZ2V0Q3Vyc29yU2libGluZ1RleHRCeVBvc2l0aW9uKHJlc3BvbnNlLmN1cnNvcl9wb3NpdGlvbiArIDEsIGNvbnRlbnRMSW5lKTtcbiAgICAvLyAgICAgICAgIFR4dEN1cnNvci5fY3JlYXRlQ3Vyc29yKGNvbnRlbnRMSW5lLCBjdXJzb3JTaWJsaW5nLnRleHRCZWZvcmVDdXJzb3IsIGN1cnNvclNpYmxpbmcudGV4dEN1cnNvciwgY3Vyc29yU2libGluZy50ZXh0QWZ0ZXJDdXJzb3IpO1xuICAgIC8vICAgICAgICAgICAgIC8vc2VsZi5fc2V0Q3Vyc29yU2hpZnQocmVzcG9uc2UuY3Vyc29yX3Bvc2l0aW9uICsgMSwgJChjb250ZW50TEluZSkpO1xuICAgIC8vICAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfQstGB0LUg0YHQu9C+0LzQsNC70L7RgdGMINCyINCz0L4g0YLRgyDQtNC10YTQuNC90LjRiNC40L0nKVxuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG59XG4iLCJleHBvcnQgY2xhc3MgVGFncyB7XG4gICAgY29uc3RydWN0b3IgKCl7fVxuICAgIGluaXQgKGV2ZW50OiBNb3VzZUV2ZW50KXtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgdXJsOiAoPEhUTUxBbmNob3JFbGVtZW50PmV2ZW50LnRhcmdldCkuaHJlZi5yZXBsYWNlKC86MzE0MTVcXC9zZXJ2ZXJcXC9jb2RlLywgJzozMTQxNVxcL3NlcnZlci90YWdzJylcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudERpdjogSFRNTEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhZ3MnKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnREaXYpe1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBwYXJlbnREaXYuY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBpID49MDsgaS0tKXtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RGl2LnJlbW92ZUNoaWxkKHBhcmVudERpdi5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwYXJlbnREaXYgaXMgZW1wdHkgaW4gIHRhZ3MgbGlzdGluZycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNwb25zZS5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbGVtZW50OiBzdHJpbmcpe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdzOiBIVE1MRWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFncycpO1xuICAgICAgICAgICAgICAgICAgICBpZih0YWdzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQoJChlbGVtZW50KVswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0YWdzIGlzIGVtcHR5IGluICB0YWdzIGxpc3RpbmcnKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmb2xkZXIgbGlzdGluZyByZXNwb25lJywgcmVzcG9uc2UpXG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn0LLRgdC1INGB0LvQvtC80LDQu9C+0YHRjCDQsiB0YWdzIGxpc3RpbmcnLGpxWEhSLCB0ZXh0U3RhdHVzKVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1R4dEN1cnNvcn0gZnJvbSBcIi4vY3Vyc29ycy90eHQtY3Vyc29yXCI7XG5pbXBvcnQge0xpbmVOdW1iZXJ9IGZyb20gXCIuL2xpbmUtbnVtYmVyXCI7XG5cbmNsYXNzIFBvc2l0aW9uSW5Ob2RlIHtcbiAgICBwdWJsaWMgbm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgcHVibGljIHBvc2l0aW9uSW5Ob2RlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBIVE1MRWxlbWVudCwgcG9zaXRpb25Jbk5vZGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLnBvc2l0aW9uSW5Ob2RlID0gcG9zaXRpb25Jbk5vZGVcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb2RlIHtcbiAgICBwcml2YXRlIHNjcmVlblNpemU6IG51bWJlciA9IDQwOyAvLyBUT0RPIGNhbGN1bGF0ZSBpdCBvbiBydW4gdGltZSBhbmQgYWRqdXN0IG9uIHNjcmVlbiBzaXplIGNoYW5nZVxuICAgIHB1YmxpYyBmaWxlTmFtZTogc3RyaW5nO1xuICAgIHB1YmxpYyBsaW5lTnVtYmVyOiBMaW5lTnVtYmVyO1xuXG4gICAgLy9UT0RPIHNob3VsZCBjb2RlLnRzIGJlIGRpdmlkZWQgYnkgdHlwZSBvZiBmaWxlIGxpa2UgY3Vyc29yIG9yIG5vP1xuICAgIC8vIG1heSBiZSBmb3IgdGV4dCBmaWxlIHdlIGRvbid0IG5lZWQgdG8gZ2VuZXJhdGUgc3BhbiB0YWcgZm9yIGVhY2ggd29ybGQ/XG5cbiAgICAvL1RPRE8gdGFiaW5kZXggc2hvdWxkIGJlIHVuaXEgaW4gZmlsZSBhbmQgc2hvdWxkIG5vdCBiZSByZXVzaW5nXG4gICAgY29uc3RydWN0b3IoZmlsZU5hbWU6IHN0cmluZywgbGluZU51bWJlcjogTGluZU51bWJlcikge1xuICAgICAgICB0aGlzLmZpbGVOYW1lID0gJy8nICsgZmlsZU5hbWUuc3BsaXQoJy8nKS5zbGljZSgzKS5qb2luKCcvJyk7XG4gICAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmVOdW1iZXI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVOZXdMaW5lKDEpKTtcbiAgICB9XG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIHByaXZhdGUgY3JlYXRlTmV3TGluZSh0YWJJbmRleCA9IDEsIHRleHQgPSAnJykge1xuICAgICAgICBsZXQgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXZFbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCB0YWJJbmRleC50b1N0cmluZygpKTtcbiAgICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnY29udGVudC1saW5lJztcbiAgICAgICAgbGV0IHNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBkaXZFbGVtZW50LmFwcGVuZENoaWxkKHNwYW5FbGVtZW50KTtcbiAgICAgICAgc3BhbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpO1xuICAgICAgICByZXR1cm4gZGl2RWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHB1dE5ld0xpbmVBZnRlcihub2RlOiBIVE1MRWxlbWVudCwgdGV4dCA9ICcnKSB7XG4gICAgICAgIGxldCBuZXdMaW5lID0gdGhpcy5jcmVhdGVOZXdMaW5lKDEsIHRleHQpO1xuICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQuYWZ0ZXIobmV3TGluZSk7XG4gICAgICAgIHRoaXMubGluZU51bWJlci5hZGROdW1iZXIoKTtcbiAgICAgICAgcmV0dXJuIG5ld0xpbmU7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIEpTTWV0aG9kQ2FuQmVTdGF0aWNcbiAgICBwcml2YXRlIGdldEZpcnN0TGluZSgpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBmaXJzdExpbmUgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29udGVudC1saW5lJykuaXRlbSgwKTtcbiAgICAgICAgZmlyc3RMaW5lLmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBmaXJzdExpbmU7XG4gICAgfVxuXG4gICAgZ2V0TGluZUJ5TnVtYmVyKG46IG51bWJlcikge1xuICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1t0YWJJbmRleD1cIicgKyBuLnRvU3RyaW5nKCkgKyAnXCJdJyk7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIEpTTWV0aG9kQ2FuQmVTdGF0aWNcbiAgICBnZXROb2RlQnlQb3NpdGlvbihsaW5lOiBIVE1MRWxlbWVudCwgcG9zaXRpb25JbkxpbmU6IG51bWJlcik6IFBvc2l0aW9uSW5Ob2RlIHtcbiAgICAgICAgbGV0IGJyZWFrRmxhZyA9IGZhbHNlO1xuICAgICAgICBsZXQgbmV3TGluZVBvc2l0aW9uID0gMDtcbiAgICAgICAgbGV0IG5ld1Bvc2l0aW9uSW5Ob2RlID0gMDtcbiAgICAgICAgbGV0IG5ld05vZGUgPSBsaW5lLmZpcnN0Q2hpbGQ7XG5cbiAgICAgICAgZm9yIChsZXQgZWwgb2YgbGluZS5jaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICBuZXdMaW5lUG9zaXRpb24gKz0gZWwudGV4dENvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKG5ld0xpbmVQb3NpdGlvbiA+PSBwb3NpdGlvbkluTGluZSArIDEpIHtcbiAgICAgICAgICAgICAgICBuZXdOb2RlID0gZWw7XG4gICAgICAgICAgICAgICAgbmV3UG9zaXRpb25Jbk5vZGUgPSBlbC50ZXh0Q29udGVudC5sZW5ndGggLSAobmV3TGluZVBvc2l0aW9uIC0gcG9zaXRpb25JbkxpbmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFicmVha0ZsYWcpIHtcbiAgICAgICAgICAgIG5ld05vZGUgPSBsaW5lLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIG5ld1Bvc2l0aW9uSW5Ob2RlID0gbmV3Tm9kZS50ZXh0Q29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUG9zaXRpb25Jbk5vZGUoPEhUTUxFbGVtZW50Pm5ld05vZGUsIG5ld1Bvc2l0aW9uSW5Ob2RlKTtcbiAgICB9XG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIHByaXZhdGUgcmVjYWxjdWxhdGVUYWJJbmRleChsaW5lOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBsZXQgdGFiSW5kZXg6IG51bWJlciA9IHBhcnNlSW50KGxpbmUucHJldmlvdXNFbGVtZW50U2libGluZy5nZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JykpICsgMTtcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgdGFiSW5kZXgudG9TdHJpbmcoKSk7XG4gICAgICAgIHdoaWxlIChsaW5lLm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgdGFiSW5kZXggKz0gMTtcbiAgICAgICAgICAgIGxpbmUgPSA8SFRNTEVsZW1lbnQ+bGluZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCB0YWJJbmRleC50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEZpcnN0RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+dGhpcy5nZXRGaXJzdExpbmUoKS5jaGlsZE5vZGVzLml0ZW0oMCk7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIEpTTWV0aG9kQ2FuQmVTdGF0aWNcbiAgICBnZXRGaXJzdEVsZW1lbnRPbkxpbmVCeU5vZGUobm9kZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIDxIVE1MRWxlbWVudD5ub2RlLnBhcmVudEVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgICB9XG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIGdldExhc3RFbGVtZW50T25MaW5lQnlOb2RlKG5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+bm9kZS5wYXJlbnRFbGVtZW50Lmxhc3RDaGlsZDtcbiAgICB9XG5cbiAgICAvLyBub2luc3BlY3Rpb24gSlNNZXRob2RDYW5CZVN0YXRpY1xuICAgIGdldFByZXZpb3VzRWxlbWVudChub2RlOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgaWYgKG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIDxIVE1MRWxlbWVudD5ub2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChub2RlLnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+bm9kZS5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcubGFzdENoaWxkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vaW5zcGVjdGlvbiBKU01ldGhvZENhbkJlU3RhdGljXG4gICAgZ2V0TmV4dEVsZW1lbnQobm9kZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50Pm5vZGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPEhUTUxFbGVtZW50Pm5vZGUucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIG5vaW5zcGVjdGlvbiBKU01ldGhvZENhbkJlU3RhdGljXG4gICAgZ2V0UG9zaXRpb25JbkxpbmUobm9kZTogSFRNTEVsZW1lbnQsIHBvc2l0aW9uSW5Ob2RlOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgb2xkTGluZVBvc2l0aW9uID0gMDtcbiAgICAgICAgZm9yIChsZXQgZWwgb2Ygbm9kZS5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChlbCA9PT0gbm9kZSkge1xuICAgICAgICAgICAgICAgIG9sZExpbmVQb3NpdGlvbiArPSBwb3NpdGlvbkluTm9kZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9sZExpbmVQb3NpdGlvbiArPSBlbC50ZXh0Q29udGVudC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9sZExpbmVQb3NpdGlvbjtcbiAgICB9XG5cblxuICAgIGdldExpbmVOdW1iZXIobm9kZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RhYkluZGV4Jyk7XG4gICAgfVxuXG4gICAgZ2V0T3ZlckVsZW1lbnQobm9kZTogSFRNTEVsZW1lbnQsIHBvc2l0aW9uSW5MaW5lOiBudW1iZXIpOiBQb3NpdGlvbkluTm9kZSB7XG4gICAgICAgIGlmIChub2RlLnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZUJ5UG9zaXRpb24oPEhUTUxFbGVtZW50Pm5vZGUucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLCBwb3NpdGlvbkluTGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvc2l0aW9uSW5Ob2RlKG51bGwsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VW5kZXJFbGVtZW50KG5vZGU6IEhUTUxFbGVtZW50LCBwb3NpdGlvbkluTGluZTogbnVtYmVyKSB7XG4gICAgICAgIGlmIChub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROb2RlQnlQb3NpdGlvbig8SFRNTEVsZW1lbnQ+bm9kZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZywgcG9zaXRpb25JbkxpbmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQb3NpdGlvbkluTm9kZShudWxsLCAwKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGFnZVVwKG5vZGU6IEhUTUxFbGVtZW50LCBwb3NpdGlvbkluTGluZTogbnVtYmVyKTogUG9zaXRpb25Jbk5vZGUge1xuICAgICAgICBsZXQgY29kZUxpbmUgPSBub2RlLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgICAgICB3aGlsZSAoY29kZUxpbmUucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgY291bnRlciArPSAxO1xuICAgICAgICAgICAgY29kZUxpbmUgPSA8SFRNTEVsZW1lbnQ+Y29kZUxpbmUucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIGlmIChjb3VudGVyID49IHRoaXMuc2NyZWVuU2l6ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldE5vZGVCeVBvc2l0aW9uKGNvZGVMaW5lLCBwb3NpdGlvbkluTGluZSk7XG4gICAgfVxuXG4gICAgcGFnZURvd24obm9kZTogSFRNTEVsZW1lbnQsIHBvc2l0aW9uSW5MaW5lOiBudW1iZXIpOiBQb3NpdGlvbkluTm9kZSB7XG4gICAgICAgIGxldCBjb2RlTGluZSA9IG5vZGUucGFyZW50RWxlbWVudDtcblxuICAgICAgICBsZXQgY291bnRlciA9IDA7XG4gICAgICAgIHdoaWxlIChjb2RlTGluZS5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICAgIGNvdW50ZXIgKz0gMTtcbiAgICAgICAgICAgIGNvZGVMaW5lID0gPEhUTUxFbGVtZW50PmNvZGVMaW5lLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIGlmIChjb3VudGVyID49IHRoaXMuc2NyZWVuU2l6ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldE5vZGVCeVBvc2l0aW9uKGNvZGVMaW5lLCBwb3NpdGlvbkluTGluZSk7XG4gICAgfVxuXG5cbiAgICBkaXZpZGVMaW5lKG5vZGU6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgbmV3TGluZSA9IHRoaXMucHV0TmV3TGluZUFmdGVyKG5vZGUpO1xuICAgICAgICBuZXdMaW5lLmxhc3RDaGlsZC5yZXBsYWNlV2l0aChub2RlLmNsb25lTm9kZSgpKTtcbiAgICAgICAgbmV3TGluZS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBub2RlLnRleHRDb250ZW50O1xuICAgICAgICB3aGlsZSAobm9kZS5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICAgIG5ld0xpbmUuYXBwZW5kQ2hpbGQobm9kZS5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgICAgICAgICAgbm9kZSA9IDxIVE1MRWxlbWVudD5ub2RlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY2FsY3VsYXRlVGFiSW5kZXgobmV3TGluZSk7XG4gICAgICAgIHJldHVybiA8SFRNTEVsZW1lbnQ+bmV3TGluZS5maXJzdENoaWxkO1xuICAgIH1cblxuICAgIHJlbW92ZU5vZGUobm9kZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGVsZW1lbnRUb1JlY2FsY3VsYXRlRnJvbSA9IG5vZGUucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICE9PSBudWxsID8gbm9kZS5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgOiB0aGlzLmdldEZpcnN0TGluZSgpO1xuICAgICAgICBpZiAobm9kZS5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobm9kZS50ZXh0Q29udGVudCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZyAmJiBub2RlID09PSBub2RlLnBhcmVudEVsZW1lbnQubGFzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnJlbW92ZUNoaWxkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmZpcnN0Q2hpbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlY2FsY3VsYXRlVGFiSW5kZXgoPEhUTUxFbGVtZW50PmVsZW1lbnRUb1JlY2FsY3VsYXRlRnJvbSk7XG4gICAgfVxuXG4gICAgcmVwbGFjZUxpbmUobjogbnVtYmVyLCBsaW5lRWxlbWVudHM6IEFycmF5PHN0cmluZz4sIGN1cnNvcjogVHh0Q3Vyc29yKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5nZXRMaW5lQnlOdW1iZXIobik7XG4gICAgICAgIGxldCB0bXBDb250YWluZXI6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRtcENvbnRhaW5lci5pbm5lckhUTUwgPSBsaW5lRWxlbWVudHMuam9pbignJyk7XG4gICAgICAgIGZvciAobGV0IG9sZEVsIG9mIGxpbmUuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgbGV0IG5vZGVJZCA9ICg8SFRNTEVsZW1lbnQ+b2xkRWwpLmdldEF0dHJpYnV0ZSgnbm9kZWlkJyk7XG4gICAgICAgICAgICBpZiAobm9kZUlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRzVG9SZXBsYWNlID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmV3RWwgb2YgQXJyYXkuZnJvbSh0bXBDb250YWluZXIuY2hpbGROb2RlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RhcnRhdGEnLCBuZXdFbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoPEhUTUxFbGVtZW50Pm5ld0VsKS5nZXRBdHRyaWJ1dGUoJ25vZGVpZCcpID09PSBub2RlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzVG9SZXBsYWNlLnB1c2gobmV3RWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRoYXQgdGV4dCBpcyBlcXVhbCBhbmQgZWxlbWVudCBkb2VzJ3QgY2hhbmdlIGZyb20gc2VuZCByZXF1ZXN0XG4gICAgICAgICAgICAgICAgLy8gaWYgKGVsZW1lbnRzVG9SZXBsYWNlLm1hcCh4ID0+IHgudGV4dENvbnRlbnQpLmpvaW4oJycpID09PSBvbGRFbC50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1RvUmVwbGFjZS5tYXAoeCA9PiB4LnRleHRDb250ZW50KS5qb2luKCcnKSA9PT0gb2xkRWwudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWwgb2YgZWxlbWVudHNUb1JlcGxhY2UucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoPEhUTUxFbGVtZW50PmVsKS5yZW1vdmVBdHRyaWJ1dGUoJ25vZGVpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkRWwuYWZ0ZXIoZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9sZEVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbGVtZW50IGNvbnRlbnQgaXMgZGlmZmVyZW50OnwnICsgZWxlbWVudHNUb1JlcGxhY2UubWFwKHggPT4geC50ZXh0Q29udGVudCkuam9pbignJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3wgdnMgfCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkRWwudGV4dENvbnRlbnQsICd8J1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tbWFuZEdldFBhcnNlTGluZU1zZyhjb2RlTGluZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gVE9ETyBkbyBzY2hlbWFcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImxpbmVQYXJzZVwiLFxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcbiAgICAgICAgICAgICAgICBcImZpbGVOYW1lXCI6IHRoaXMuZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgXCJvdXRlckhUTUxcIjogY29kZUxpbmUub3V0ZXJIVE1MLFxuICAgICAgICAgICAgICAgIFwibGluZU51bWJlclwiOiBwYXJzZUludChjb2RlTGluZS5nZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JykpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbnRlcmZhY2UgSGFuZGxlcnMge1xuICAgIFtpbmRleDogc3RyaW5nXTogQ2FsbGFibGVGdW5jdGlvblxufVxuXG5leHBvcnQgbGV0IGhhbmRsZXJzOiBIYW5kbGVycyA9IHt9O1xuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEhhbmRsZXJzIHtcblxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJDb21tYW5kSGFuZGxlcihtc2dUeXBlOiBzdHJpbmcsIGNhbGxiYWNrOiBDYWxsYWJsZUZ1bmN0aW9uKSB7XG4gICAgICAgIGhhbmRsZXJzW21zZ1R5cGVdID0gY2FsbGJhY2s7XG4gICAgfVxufSIsImltcG9ydCB7aGFuZGxlcnN9IGZyb20gXCIuL2NvbW1hbmRcIjtcblxuZXhwb3J0IGNsYXNzIENvbW1hbmRCdXMge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc2VydmVyVXJsOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjb25uZWN0aW9uQXR0ZW1wdENvdW50ZXI6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBzb2NrZXQ6IFdlYlNvY2tldDtcblxuICAgIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2VydmVyVXJsID0gdXJsO1xuICAgICAgICB0aGlzLmNyZWF0ZVNvY2tldCgpO1xuICAgIH1cblxuICAgIGRlYnVnKC4uLmFyZ3M6IEFycmF5PGFueT4pe1xuICAgICAgICBjb25zb2xlLmxvZyguLi5hcmdzKTtcbiAgICB9XG4gICAgY3JlYXRlU29ja2V0KCkge1xuICAgICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5zZXJ2ZXJVcmwpO1xuICAgICAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHt0aGlzLm9uTWVzc2FnZShldmVudCl9O1xuICAgICAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gKGV2ZW50KSA9PiB7dGhpcy5vbkNsb3NlKGV2ZW50KX07XG4gICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9ICgpID0+IHt0aGlzLm9uT3BlbigpfTtcbiAgICAgICAgdGhpcy5zb2NrZXQub25lcnJvciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldlYlNvY2tldCBlcnJvciBvYnNlcnZlZDpcIiwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLmRlYnVnKFwiY29ubmVjdGVkIHRvOlwiLCB0aGlzLnNlcnZlclVybCk7XG4gICAgfVxuXG4gICAgb25DbG9zZShldmVudDogQ2xvc2VFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQud2FzQ2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0NsZWFuIGNsb3NlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnQ29ubmVjdGlvbiByZXNldCBieSBwZWVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJ1ZygnQ29ubmVjdGlvbiByZXNldCwgY29kZT06JyArIGV2ZW50LmNvZGUgKyAnLCByZWFzb249JyArIGV2ZW50LnJlYXNvbiwgJ2Nvbm5lY3Rpb25BdHRlbXB0Q291bnRlcj0nLCB0aGlzLmNvbm5lY3Rpb25BdHRlbXB0Q291bnRlcik7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25BdHRlbXB0Q291bnRlciA+IDEwKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdDb25uZWN0aW9uIGF0dGVtcHQgd2FzIHRvbyBtdXNoLCBqdXN0IGdpdmUgdXA6ICcsIHRoaXMuY29ubmVjdGlvbkF0dGVtcHRDb3VudGVyKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkF0dGVtcHRDb3VudGVyID0gMDtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29ubmVjdGlvbiBhdHRlbXB0IHdhcyB0b28gbXVzaCwganVzdCBnaXZlIHVwJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0aW9uQXR0ZW1wdENvdW50ZXIgKz0gMTtcbiAgICAgICAgdGhpcy5kZWJ1ZygnQ3JlYXRlIG5ldyBjb25uZWN0aW9uJywgdGhpcyk7XG4gICAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU29ja2V0KCk7XG4gICAgfVxuXG4gICAgb25NZXNzYWdlKG1zZzogTWVzc2FnZUV2ZW50KSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkF0dGVtcHRDb3VudGVyID0gMDtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKG1zZy5kYXRhKTtcbiAgICAgICAgdGhpcy5kZWJ1ZygncmVjZWl2ZWQ6JywgbWVzc2FnZSwgbWVzc2FnZS50eXBlLCAodHlwZW9mIG1lc3NhZ2UpLCBoYW5kbGVycyk7XG4gICAgICAgIGhhbmRsZXJzW21lc3NhZ2UudHlwZV0obWVzc2FnZSk7XG4gICAgfVxuXG4gICAgc2VuZENvbW1hbmQobXNnVHlwZTogc3RyaW5nLCBtc2c6IHN0cmluZykge1xuICAgICAgICAvL1RPRE8gd2h5IGNhbid0IGdldCBieSBoYW5kbGVycy5tc2dUeXBlP1xuICAgICAgICBpZiAoaGFuZGxlcnNbbXNnVHlwZV0pIHtcbiAgICAgICAgICAgIGlmICggdGhpcy5zb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5zZW5kKG1zZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Zygnc2VuZDonLCBtc2csIG1zZ1R5cGUsICh0eXBlb2YgbXNnKSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdzZW5kIGZhaWxlZCwgc29ja2V0IGluIHN0YXRlOiAnLCB0aGlzLnNvY2tldC5yZWFkeVN0YXRlLCBtc2csIGhhbmRsZXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVNvY2tldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnTWVzc2FnZSBoYW5kbGVyIGlzIG5vdCBmb3VuZDonLCBoYW5kbGVycywgbXNnVHlwZSwgaGFuZGxlcnNbbXNnVHlwZV0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXNzYWdlIGhhbmRsZXIgaXMgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0xpbmVOdW1iZXJ9IGZyb20gJy4vbGluZS1udW1iZXInO1xuaW1wb3J0IHtQeUF1dG9jb21wbGV0ZX0gZnJvbSAnLi9hdXRvY29tcGxldGUvcHktYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7VHh0QXV0b2NvbXBsZXRlfSBmcm9tIFwiLi9hdXRvY29tcGxldGUvdHh0LWF1dG9jb21wbGV0ZVwiO1xuaW1wb3J0IHtGaWxlTGlzdGluZ30gZnJvbSAnLi9maWxlLWxpc3RpbmcnO1xuaW1wb3J0IHtUeHRDdXJzb3J9IGZyb20gJy4vY3Vyc29ycy90eHQtY3Vyc29yJztcbmltcG9ydCB7UHlDdXJzb3J9IGZyb20gJy4vY3Vyc29ycy9weS1jdXJzb3InO1xuaW1wb3J0IHtUYWdzfSBmcm9tICcuL3RhZ3MvdGFncyc7XG5pbXBvcnQge0NvZGV9IGZyb20gJy4vY29kZSc7XG5pbXBvcnQge0NvbW1hbmRCdXN9IGZyb20gJy4vY29tbWFuZC1idXMnO1xuaW1wb3J0IHtDb21tYW5kSGFuZGxlcnN9IGZyb20gJy4vY29tbWFuZCc7XG5cblxuaW50ZXJmYWNlIEtleUNvZGVzIHtcbiAgICBbaW5kZXg6IHN0cmluZ106IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBMaW5lUGFyc2Uge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBkYXRhOiB7XG4gICAgICAgIGxpbmVOdW1iZXI6IG51bWJlcjtcbiAgICAgICAgbGluZUVsZW1lbnRzOiBBcnJheTxzdHJpbmc+O1xuICAgICAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgIH1cbn1cblxuaW50ZXJmYWNlIEF1dG9jb21wbGV0ZVNob3cge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBkYXRhOiB7XG4gICAgICAgIGxpbmVOdW1iZXI6IG51bWJlcjtcbiAgICAgICAgdmFyaWFudHM6IEFycmF5PHN0cmluZz47XG4gICAgICAgIGZpbGVOYW1lOiBzdHJpbmc7XG4gICAgICAgIGxpbmVUZXh0OiBzdHJpbmc7XG4gICAgICAgIHBvc2l0aW9uSW5MaW5lOiBudW1iZXJcbiAgICAgICAgcmVzdWx0OiBBcnJheTxzdHJpbmc+O1xuICAgICAgICBwcmVmaXg6IEFycmF5PHN0cmluZz47XG4gICAgfVxufVxuXG5jbGFzcyBNYWluIGV4dGVuZHMgQ29tbWFuZEhhbmRsZXJzIHtcbiAgICBwdWJsaWMgY29kZTogQ29kZTtcbiAgICBwdWJsaWMgY3Vyc29yOiBUeHRDdXJzb3I7XG4gICAgcHVibGljIHRhZ3M6IFRhZ3M7XG4gICAgcHVibGljIGZpbGVMaXN0aW5nOiBGaWxlTGlzdGluZztcbiAgICBwdWJsaWMgYXV0b0NvbXBsZXRlOiBUeHRBdXRvY29tcGxldGU7XG4gICAgcHVibGljIGxpbmVOdW1iZXI6IExpbmVOdW1iZXI7XG4gICAgcHVibGljIHByZXNzZWRLZXlzOiBLZXlDb2RlcztcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlcnZlclVybDogc3RyaW5nO1xuICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvL1RPRE8gY2hhbmdlIGZpcmVmb3gtPiBhYm91dDpjb25maWcgIC0+IG5ldHdvcmsud2Vic29ja2V0LmFsbG93SW5zZWN1cmVGcm9tSFRUUFMgdG8gZmFsc2VcbiAgICAgICAgdGhpcy5zZXJ2ZXJVcmwgPSBcIndzOi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArIFwiL3NlcnZlci9jb21tYW5kXCI7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0S2V5Qm9hcmRFdmVudExpc3RlbmVycygpO1xuICAgICAgICAgICAgc2VsZi5zZXRNb3VzZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBzZWxmLmxpbmVOdW1iZXIgPSBuZXcgTGluZU51bWJlcigxKTtcbiAgICAgICAgICAgIHNlbGYuY29kZSA9IG5ldyBDb2RlKCcnLCBzZWxmLmxpbmVOdW1iZXIpO1xuXG4gICAgICAgICAgICBzZWxmLnRhZ3MgPSBuZXcgVGFncygpO1xuXG4gICAgICAgICAgICBzZWxmLmZpbGVMaXN0aW5nID0gbmV3IEZpbGVMaXN0aW5nKHNlbGYuY29kZSk7XG5cbiAgICAgICAgICAgIHNlbGYuYXV0b0NvbXBsZXRlID0gbmV3IFR4dEF1dG9jb21wbGV0ZSgpO1xuXG5cblxuICAgICAgICAgICAgc2VsZi5jdXJzb3IgPSBuZXcgVHh0Q3Vyc29yKHNlbGYuY29kZSwgc2VsZi5saW5lTnVtYmVyKTtcblxuICAgICAgICAgICAgc2VsZi5wcmVzc2VkS2V5cyA9IHt9O1xuICAgICAgICAgICAgc2VsZi5jb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoc2VsZi5zZXJ2ZXJVcmwpO1xuXG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyQ29tbWFuZEhhbmRsZXIoXCJsaW5lUGFyc2VcIiwgKHg6IExpbmVQYXJzZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlckxpbmVQYXJzZSh4KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyQ29tbWFuZEhhbmRsZXIoXCJhdXRvQ29tcGxldGVTaG93XCIsICh4OiBBdXRvY29tcGxldGVTaG93KSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVyQXV0b2NvbXBsZXRlU2hvdyh4KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaGFuZGxlckxpbmVQYXJzZShqc29uRGF0YTogTGluZVBhcnNlKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdqc29uRGF0YS5kYXRhLmZpbGVOYW1lJywganNvbkRhdGEuZGF0YSwganNvbkRhdGEuZGF0YS5maWxlTmFtZSk7XG4gICAgICAgIGlmICh0aGlzLmNvZGUuZmlsZU5hbWUgIT09IGpzb25EYXRhLmRhdGEuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluZSA9IHRoaXMuY29kZS5nZXRMaW5lQnlOdW1iZXIoanNvbkRhdGEuZGF0YS5saW5lTnVtYmVyKTtcbiAgICAgICAgbGV0IGN1cnJlbnRMaW5lTnVtYmVyID0gdGhpcy5jdXJzb3IuZ2V0TGluZU51bWJlcigpO1xuICAgICAgICBsZXQgb2xkUG9zaXRpb24gPSB0aGlzLmNvZGUuZ2V0UG9zaXRpb25JbkxpbmUodGhpcy5jdXJzb3IuY3Vyc29yUGFyZW50RWxlbWVudCwgdGhpcy5jdXJzb3IuZ2V0UG9zaXRpb25Jbk5vZGUoKSk7XG5cbiAgICAgICAgdGhpcy5jb2RlLnJlcGxhY2VMaW5lKGpzb25EYXRhLmRhdGEubGluZU51bWJlciwganNvbkRhdGEuZGF0YS5saW5lRWxlbWVudHMsIHRoaXMuY3Vyc29yKTtcbiAgICAgICAgLy8gVE9ETyBpbiBjYXNlIGxpbmUgcmVtb3ZhbCB0YWJJbmRleCB3aWxsIGJlIHRoZSBzYW1lIG9uIGFub3RoZXIgbGluZVxuICAgICAgICBpZiAocGFyc2VJbnQoY3VycmVudExpbmVOdW1iZXIpID09PSBqc29uRGF0YS5kYXRhLmxpbmVOdW1iZXIpIHtcbiAgICAgICAgICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuY29kZS5nZXROb2RlQnlQb3NpdGlvbihsaW5lLCBvbGRQb3NpdGlvbik7XG4gICAgICAgICAgICB0aGlzLmN1cnNvci5wdXRDdXJzb3JCeVBvc2l0aW9uSW5Ob2RlKG5ld1Bvc2l0aW9uLm5vZGUsIG5ld1Bvc2l0aW9uLnBvc2l0aW9uSW5Ob2RlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZXJBdXRvY29tcGxldGVTaG93KGpzb25EYXRhOiBBdXRvY29tcGxldGVTaG93KSB7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlLnJlZmlsbChqc29uRGF0YS5kYXRhLnJlc3VsdCk7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlLnNob3codGhpcy5jdXJzb3IuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMubGluZU51bWJlci5nZXRCeU51bWJlcihqc29uRGF0YS5kYXRhLmxpbmVOdW1iZXIpKTtcbiAgICB9XG5cbiAgICBzZXRLZXlCb2FyZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYucHJlc3NlZEtleXNbZXZlbnQuY29kZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgc2VsZi5wcmVzc2VkS2V5c1tldmVudC5jb2RlXSA9IHRydWU7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY29kZScsIGV2ZW50LmNvZGUpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5hZGROZXdSb3coKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnVGFiJykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF1dG9Db21wbGV0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucHV0U3RyaW5nKHNlbGYuYXV0b0NvbXBsZXRlLmdldFN5bWJvbHMoc2VsZi5jdXJzb3IuZ2V0UG9zaXRpb25Jbk5vZGUoKSkpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucHV0VGFiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF1dG9Db21wbGV0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdXRvQ29tcGxldGUuaGxQcmV2KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IubW92ZVVwUm93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYXV0b0NvbXBsZXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5obE5leHQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5tb3ZlRG93blJvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucHV0U3ltYm9sKGV2ZW50LmtleSk7XG4gICAgICAgICAgICAgICAgc2VsZi5hdXRvQ29tcGxldGUuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdQYWdlVXAnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IucGFnZVVwKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1BhZ2VEb3duJykge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLnBhZ2VEb3duKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0VuZCcpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5tb3ZlRW5kKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0hvbWUnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IubW92ZUhvbWUoKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLm1vdmVMZWZ0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IubW92ZVJpZ2h0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1NoaWZ0TGVmdCcpIHtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0NvbnRyb2xMZWZ0Jykge1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQWx0TGVmdCcpIHtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Y1Jykge1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQmFja3NwYWNlJykge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLmRlbGV0ZVN5bWJvbEJlZm9yZSgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdEZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IuZGVsZXRlU3ltYm9sVW5kZXIoKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnNvci5wdXRTeW1ib2woZXZlbnQua2V5KTtcbiAgICAgICAgICAgICAgICBzZWxmLmNvbW1hbmRCdXMuc2VuZENvbW1hbmQoJ2F1dG9Db21wbGV0ZVNob3cnLFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5jb21tYW5kR2V0QXV0b2NvbXBsZXRlU2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgIDxIVE1MRWxlbWVudD5ldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUuZ2V0UG9zaXRpb25JbkxpbmUoc2VsZi5jdXJzb3IuY3Vyc29yUGFyZW50RWxlbWVudCwgc2VsZi5jdXJzb3IuZ2V0UG9zaXRpb25Jbk5vZGUoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUuZmlsZU5hbWVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5jb21tYW5kQnVzLnNlbmRDb21tYW5kKCdsaW5lUGFyc2UnLCBzZWxmLmNvZGUuY29tbWFuZEdldFBhcnNlTGluZU1zZyg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc2V0TW91c2VFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29kZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLmN1cnNvci5zZXRCeUNsaWNrKCk7XG4gICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZS5oaWRlKCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5wcmVzc2VkS2V5c1snQ29udHJvbExlZnQnXSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3Vyc29yLmdvVG9EZWZpbml0aW9uKHNlbGYuZmlsZUxpc3RpbmcuY3VyZW50RmlsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlbGlzdGluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQ6IEhUTUxFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2ZpbGVsaW5rJykge1xuXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVDb3VudCA9IHNlbGYuZmlsZUxpc3Rpbmcuc2hvd0ZpbGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBjb3VudCBtdWx0aSBsaW5lIHN0cmluZyBsaWtlICcnJyAnJydcbiAgICAgICAgICAgICAgICBzZWxmLmxpbmVOdW1iZXIuYWRqdXN0KGxpbmVDb3VudCk7XG4gICAgICAgICAgICAgICAgLy8gdGFncy5pbml0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKCcucHknKSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvZGUgPSBuZXcgQ29kZShmaWxlTmFtZSwgc2VsZi5saW5lTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJzb3IgPSBuZXcgUHlDdXJzb3Ioc2VsZi5jb2RlLCBzZWxmLmxpbmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZSA9IG5ldyBQeUF1dG9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29kZSA9IG5ldyBDb2RlKGZpbGVOYW1lLCBzZWxmLmxpbmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnNvciA9IG5ldyBUeHRDdXJzb3Ioc2VsZi5jb2RlLCBzZWxmLmxpbmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmF1dG9Db21wbGV0ZSA9IG5ldyBUeHRBdXRvY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2ZvbGRlcmxpbmsnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5maWxlTGlzdGluZy5nZXQoZXZlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbm5ldyBNYWluKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9